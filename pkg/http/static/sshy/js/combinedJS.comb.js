var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,b){a.raw=b;return a};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,r){if(a==Array.prototype||a==Object.prototype)return a;a[b]=r.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var r=a[b];if(r&&r.Math==Math)return r}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b){var r=$jscomp.propertyToPolyfillSymbol[b];if(null==r)return a[b];r=a[r];return void 0!==r?r:a[b]};
$jscomp.polyfill=function(a,b,r,k){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,r,k):$jscomp.polyfillUnisolated(a,b,r,k))};$jscomp.polyfillUnisolated=function(a,b,r,k){r=$jscomp.global;a=a.split(".");for(k=0;k<a.length-1;k++){var m=a[k];if(!(m in r))return;r=r[m]}a=a[a.length-1];k=r[a];b=b(k);b!=k&&null!=b&&$jscomp.defineProperty(r,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,r,k){var m=a.split(".");a=1===m.length;k=m[0];k=!a&&k in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var n=0;n<m.length-1;n++){var d=m[n];if(!(d in k))return;k=k[d]}m=m[m.length-1];r=$jscomp.IS_SYMBOL_NATIVE&&"es6"===r?k[m]:null;b=b(r);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,m,{configurable:!0,writable:!0,value:b}):b!==r&&($jscomp.propertyToPolyfillSymbol[m]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(m):$jscomp.POLYFILL_PREFIX+m,m=
$jscomp.propertyToPolyfillSymbol[m],$jscomp.defineProperty(k,m,{configurable:!0,writable:!0,value:b})))};$jscomp.polyfill("String.prototype.trimLeft",function(a){function b(){return this.replace(/^[\s\xa0]+/,"")}return a||b},"es_2019","es3");$jscomp.polyfill("String.prototype.trimStart",function(a){return a||String.prototype.trimLeft},"es_2019","es3");$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(r){}return!1};
$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.polyfill("Object.setPrototypeOf",function(a){return a||$jscomp.setPrototypeOf},"es6","es5");$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};
$jscomp.initSymbol=function(){};$jscomp.polyfill("Symbol",function(a){if(a)return a;var b=function(m,n){this.$jscomp$symbol$id_=m;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:n})};b.prototype.toString=function(){return this.$jscomp$symbol$id_};var r=0,k=function(m){if(this instanceof k)throw new TypeError("Symbol is not a constructor");return new b("jscomp_symbol_"+(m||"")+"_"+r++,m)};return k},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<b.length;r++){var k=$jscomp.global[b[r]];"function"===typeof k&&"function"!=typeof k.prototype[a]&&$jscomp.defineProperty(k.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return a},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(a){a={next:a};a[Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,b){a instanceof String&&(a+="");var r=0,k=!1,m={next:function(){if(!k&&r<a.length){var n=r++;return{value:b(n,a[n]),done:!1}}k=!0;return{done:!0,value:void 0}}};m[Symbol.iterator]=function(){return m};return m};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function r(d){return d instanceof m?d:new m(function(e,f){e(d)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(d){if(null==this.batch_){this.batch_=[];var e=this;this.asyncExecuteFunction(function(){e.executeBatch_()})}this.batch_.push(d)};var k=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(d){k(d,0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var d=
this.batch_;this.batch_=[];for(var e=0;e<d.length;++e){var f=d[e];d[e]=null;try{f()}catch(g){this.asyncThrow_(g)}}}this.batch_=null};b.prototype.asyncThrow_=function(d){this.asyncExecuteFunction(function(){throw d;})};var m=function(d){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var e=this.createResolveAndReject_();try{d(e.resolve,e.reject)}catch(f){e.reject(f)}};m.prototype.createResolveAndReject_=function(){function d(g){return function(c){f||(f=!0,g.call(e,c))}}var e=this,f=!1;
return{resolve:d(this.resolveTo_),reject:d(this.reject_)}};m.prototype.resolveTo_=function(d){if(d===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(d instanceof m)this.settleSameAsPromise_(d);else{a:switch(typeof d){case "object":var e=null!=d;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(d):this.fulfill_(d)}};m.prototype.resolveToNonPromiseObj_=function(d){var e=void 0;try{e=d.then}catch(f){this.reject_(f);return}"function"==typeof e?
this.settleSameAsThenable_(e,d):this.fulfill_(d)};m.prototype.reject_=function(d){this.settle_(2,d)};m.prototype.fulfill_=function(d){this.settle_(1,d)};m.prototype.settle_=function(d,e){if(0!=this.state_)throw Error("Cannot settle("+d+", "+e+"): Promise already settled in state"+this.state_);this.state_=d;this.result_=e;this.executeOnSettledCallbacks_()};m.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var d=0;d<this.onSettledCallbacks_.length;++d)n.asyncExecute(this.onSettledCallbacks_[d]);
this.onSettledCallbacks_=null}};var n=new b;m.prototype.settleSameAsPromise_=function(d){var e=this.createResolveAndReject_();d.callWhenSettled_(e.resolve,e.reject)};m.prototype.settleSameAsThenable_=function(d,e){var f=this.createResolveAndReject_();try{d.call(e,f.resolve,f.reject)}catch(g){f.reject(g)}};m.prototype.then=function(d,e){function f(q,w){return"function"==typeof q?function(u){try{g(q(u))}catch(y){c(y)}}:w}var g,c,l=new m(function(q,w){g=q;c=w});this.callWhenSettled_(f(d,g),f(e,c));return l};
m.prototype.catch=function(d){return this.then(void 0,d)};m.prototype.callWhenSettled_=function(d,e){function f(){switch(g.state_){case 1:d(g.result_);break;case 2:e(g.result_);break;default:throw Error("Unexpected state: "+g.state_);}}var g=this;null==this.onSettledCallbacks_?n.asyncExecute(f):this.onSettledCallbacks_.push(f)};m.resolve=r;m.reject=function(d){return new m(function(e,f){f(d)})};m.race=function(d){return new m(function(e,f){for(var g=$jscomp.makeIterator(d),c=g.next();!c.done;c=g.next())r(c.value).callWhenSettled_(e,
f)})};m.all=function(d){var e=$jscomp.makeIterator(d),f=e.next();return f.done?r([]):new m(function(g,c){function l(u){return function(y){q[u]=y;w--;0==w&&g(q)}}var q=[],w=0;do q.push(void 0),w++,r(f.value).callWhenSettled_(l(q.length-1),c),f=e.next();while(!f.done)})};return m},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(b,r){return b===r?0!==b||1/b===1/r:b!==b&&r!==r}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(b,r){var k=this;k instanceof String&&(k=String(k));var m=k.length;r=r||0;for(0>r&&(r=Math.max(r+m,0));r<m;r++){var n=k[r];if(n===b||Object.is(n,b))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,r){if(null==a)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(b,r){return-1!==$jscomp.checkStringArgs(this,b,"includes").indexOf(b,r||0)}},"es6","es3");
SSHyClient={MSG_DISCONNECT:1,MSG_IGNORE:2,MSG_UNIMPLEMENTED:3,MSG_DEBUG:4,MSG_SERVICE_REQUEST:5,MSG_SERVICE_ACCEPT:6,MSG_KEX_INIT:20,MSG_NEW_KEYS:21,MSG_KEXDH_INIT:30,MSG_KEXDH_GEX_GROUP:31,MSG_KEXDH_GEX_INIT:32,MSG_KEXDH_GEX_REPLY:33,MSG_KEXDH_GEX_REQUEST:34,MSG_USERAUTH_REQUEST:50,MSG_USERAUTH_FAILURE:51,MSG_USERAUTH_SUCCESS:52,MSG_USERAUTH_BANNER:53,MSG_GLOBAL_REQUEST:80,MSG_REQUEST_SUCCESS:81,MSG_REQUEST_FAILURE:82,MSG_CHANNEL_OPEN:90,MSG_CHANNEL_OPEN_SUCCESS:91,MSG_CHANNEL_OPEN_FAILURE:92,MSG_CHANNEL_WINDOW_ADJUST:93,
MSG_CHANNEL_DATA:94,MSG_CHANNEL_EXTENDED_DATA:95,MSG_CHANNEL_EOF:96,MSG_CHANNEL_CLOSE:97,MSG_CHANNEL_REQUEST:98,MSG_CHANNEL_SUCCESS:99,MSG_CHANNEL_FAILURE:100,WINDOW_SIZE:40674,MAX_PACKET_SIZE:16384,AES_CBC:2,AES_CTR:6,fishFsHintLeave:"\u001b[32",bashFsHintLeave:"\u001b]0;"};sjcl={cipher:{}};
sjcl.cipher.aes=function(a,b){this._tables[0][0][0]||this._precompute();this.mode=b;var r,k,m=this._tables[0][4],n=this._tables[1];b=a.length;var d=1;if(4!==b&&6!==b&&8!==b)throw"invalid aes key size";this._key=[r=a.slice(0),k=[]];for(a=b;a<4*b+28;a++){var e=r[a-1];if(0===a%b||8===b&&4===a%b)e=m[e>>>24]<<24^m[e>>16&255]<<16^m[e>>8&255]<<8^m[e&255],0===a%b&&(e=e<<8^e>>>24^d<<24,d=d<<1^283*(d>>7));r[a]=r[a-b]^e}for(b=0;a;b++,a--)e=r[b&3?a:a-4],k[b]=4>=a||4>b?e:n[0][m[e>>>24]]^n[1][m[e>>16&255]]^n[2][m[e>>
8&255]]^n[3][m[e&255]]};sjcl.cipher.aes.MODE_CBC=2;sjcl.cipher.aes.MODE_CTR=6;
sjcl.cipher.aes.prototype={encrypt:function(a,b,r){b=this.mode==sjcl.cipher.aes.MODE_CBC?b:[];for(var k=[],m=0;m<a.length/16;m++){var n=a.slice(16*m,16*(m+1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var d=0;16>d;d++)n[d]^=b[d];b=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(n),0))}else for(b=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(toByteArray(r.increment())),0)),d=0;16>d;d++)b[d]^=n[d];k=k.concat(b)}return k},decrypt:function(a,b){for(var r=[],k=0;k<a.length/
16;k++){var m=a.slice(16*k,16*(k+1));ct=sjcl.codec.bytes.fromBits(this._crypt(sjcl.codec.bytes.toBits(m),1));if(this.mode==sjcl.cipher.aes.MODE_CBC){for(var n=0;16>n;n++)ct[n]^=b[n];b=m}r=r.concat(ct)}return r},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var a=this._tables[0],b=this._tables[1],r=a[4],k=b[4],m,n,d,e=[],f=[],g;for(m=0;256>m;m++)f[(e[m]=m<<1^283*(m>>7))^m]=m;for(n=d=0;!r[n];n^=g||1,d=f[d]||1){var c=d^d<<1^d<<2^d<<3^d<<4;c=c>>8^c&255^99;r[n]=c;k[c]=n;var l=e[m=
e[g=e[n]]];var q=16843009*l^65537*m^257*g^16843008*n;l=257*e[c]^16843008*c;for(m=0;4>m;m++)a[m][n]=l=l<<24^l>>>8,b[m][c]=q=q<<24^q>>>8}for(m=0;5>m;m++)a[m]=a[m].slice(0),b[m]=b[m].slice(0)},_crypt:function(a,b){if(4!==a.length)throw"invalid aes block size";var r=this._key[b],k=a[0]^r[0],m=a[b?3:1]^r[1],n=a[2]^r[2];a=a[b?1:3]^r[3];var d=r.length/4-2,e,f=4,g=[0,0,0,0];var c=this._tables[b];var l=c[0],q=c[1],w=c[2],u=c[3],y=c[4];for(e=0;e<d;e++){c=l[k>>>24]^q[m>>16&255]^w[n>>8&255]^u[a&255]^r[f];var A=
l[m>>>24]^q[n>>16&255]^w[a>>8&255]^u[k&255]^r[f+1];var F=l[n>>>24]^q[a>>16&255]^w[k>>8&255]^u[m&255]^r[f+2];a=l[a>>>24]^q[k>>16&255]^w[m>>8&255]^u[n&255]^r[f+3];f+=4;k=c;m=A;n=F}for(e=0;4>e;e++)g[b?3&-e:e]=y[k>>>24]<<24^y[m>>16&255]<<16^y[n>>8&255]<<8^y[a&255]^r[f++],c=k,k=m,m=n,n=a,a=c;return g}};sjcl.codec={};
sjcl.codec.bytes={fromBits:function(a){var b=[],r=sjcl.bitArray.bitLength(a),k,m;for(k=0;k<r/8;k++)0===(k&3)&&(m=a[k/4]),b.push(m>>>24),m<<=8;return b},toBits:function(a){var b=[],r,k=0;for(r=0;r<a.length;r++)k=k<<8|a[r],3===(r&3)&&(b.push(k),k=0);r&3&&b.push(sjcl.bitArray.partial(8*(r&3),k));return b}};
sjcl.bitArray={bitLength:function(a){var b=a.length;return 0===b?0:32*(b-1)+sjcl.bitArray.getPartial(a[b-1])},partial:function(a,b,r){return 32===a?b:(r?b|0:b<<32-a)+1099511627776*a},getPartial:function(a){return Math.round(a/1099511627776)||32}};var BigInteger=function(){function a(h,p,t){null!=h&&("number"==typeof h?this.fromNumber(h,p,t):null==p&&"string"!=typeof h?this.fromString(h,256):this.fromString(h,p))}function b(){return new a(null)}function r(h,p,t,z,D,E){for(;0<=--E;){var B=p*this[h++]+t[z]+D;D=Math.floor(B/67108864);t[z++]=B&67108863}return D}function k(h,p,t,z,D,E){var B=p&32767;for(p>>=15;0<=--E;){var v=this[h]&32767,x=this[h++]>>15,C=p*v+x*B;v=B*v+((C&32767)<<15)+t[z]+(D&1073741823);D=(v>>>30)+(C>>>15)+p*x+(D>>>30);t[z++]=
v&1073741823}return D}function m(h,p,t,z,D,E){var B=p&16383;for(p>>=14;0<=--E;){var v=this[h]&16383,x=this[h++]>>14,C=p*v+x*B;v=B*v+((C&16383)<<14)+t[z]+D;D=(v>>28)+(C>>14)+p*x;t[z++]=v&268435455}return D}function n(h,p){h=I[h.charCodeAt(p)];return null==h?-1:h}function d(h){var p=b();p.fromInt(h);return p}function e(h){var p=1,t;0!=(t=h>>>16)&&(h=t,p+=16);0!=(t=h>>8)&&(h=t,p+=8);0!=(t=h>>4)&&(h=t,p+=4);0!=(t=h>>2)&&(h=t,p+=2);0!=h>>1&&(p+=1);return p}function f(h){this.m=h}function g(h){this.m=h;
this.mp=h.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<h.DB-15)-1;this.mt2=2*h.t}function c(h,p){return h&p}function l(h,p){return h|p}function q(h,p){return h^p}function w(h,p){return h&~p}function u(){}function y(h){return h}function A(h){this.r2=b();this.q3=b();a.ONE.dlShiftTo(2*h.t,this.r2);this.mu=this.r2.divide(h);this.m=h}var F;"Microsoft Internet Explorer"==navigator.appName?(a.prototype.am=k,F=30):"Netscape"!=navigator.appName?(a.prototype.am=r,F=26):(a.prototype.am=
m,F=28);a.prototype.DB=F;a.prototype.DM=(1<<F)-1;a.prototype.DV=1<<F;a.prototype.FV=Math.pow(2,52);a.prototype.F1=52-F;a.prototype.F2=2*F-52;var I=[],J;F=48;for(J=0;9>=J;++J)I[F++]=J;F=97;for(J=10;36>J;++J)I[F++]=J;F=65;for(J=10;36>J;++J)I[F++]=J;f.prototype.convert=function(h){return 0>h.s||0<=h.compareTo(this.m)?h.mod(this.m):h};f.prototype.revert=function(h){return h};f.prototype.reduce=function(h){h.divRemTo(this.m,null,h)};f.prototype.mulTo=function(h,p,t){h.multiplyTo(p,t);this.reduce(t)};f.prototype.sqrTo=
function(h,p){h.squareTo(p);this.reduce(p)};g.prototype.convert=function(h){var p=b();h.abs().dlShiftTo(this.m.t,p);p.divRemTo(this.m,null,p);0>h.s&&0<p.compareTo(a.ZERO)&&this.m.subTo(p,p);return p};g.prototype.revert=function(h){var p=b();h.copyTo(p);this.reduce(p);return p};g.prototype.reduce=function(h){for(;h.t<=this.mt2;)h[h.t++]=0;for(var p=0;p<this.m.t;++p){var t=h[p]&32767,z=t*this.mpl+((t*this.mph+(h[p]>>15)*this.mpl&this.um)<<15)&h.DM;t=p+this.m.t;for(h[t]+=this.m.am(0,z,h,p,0,this.m.t);h[t]>=
h.DV;)h[t]-=h.DV,h[++t]++}h.clamp();h.drShiftTo(this.m.t,h);0<=h.compareTo(this.m)&&h.subTo(this.m,h)};g.prototype.mulTo=function(h,p,t){h.multiplyTo(p,t);this.reduce(t)};g.prototype.sqrTo=function(h,p){h.squareTo(p);this.reduce(p)};a.prototype.copyTo=function(h){for(var p=this.t-1;0<=p;--p)h[p]=this[p];h.t=this.t;h.s=this.s};a.prototype.fromInt=function(h){this.t=1;this.s=0>h?-1:0;0<h?this[0]=h:-1>h?this[0]=h+DV:this.t=0};a.prototype.fromString=function(h,p){if(16==p)p=4;else if(8==p)p=3;else if(256==
p)p=8;else if(2==p)p=1;else if(32==p)p=5;else if(4==p)p=2;else{this.fromRadix(h,p);return}this.s=this.t=0;for(var t=h.length,z=!1,D=0;0<=--t;){var E=8==p?h[t]&255:n(h,t);0>E?"-"==h.charAt(t)&&(z=!0):(z=!1,0==D?this[this.t++]=E:D+p>this.DB?(this[this.t-1]|=(E&(1<<this.DB-D)-1)<<D,this[this.t++]=E>>this.DB-D):this[this.t-1]|=E<<D,D+=p,D>=this.DB&&(D-=this.DB))}8==p&&0!=(h[0]&128)&&(this.s=-1,0<D&&(this[this.t-1]|=(1<<this.DB-D)-1<<D));this.clamp();z&&a.ZERO.subTo(this,this)};a.prototype.clamp=function(){for(var h=
this.s&this.DM;0<this.t&&this[this.t-1]==h;)--this.t};a.prototype.dlShiftTo=function(h,p){var t;for(t=this.t-1;0<=t;--t)p[t+h]=this[t];for(t=h-1;0<=t;--t)p[t]=0;p.t=this.t+h;p.s=this.s};a.prototype.drShiftTo=function(h,p){for(var t=h;t<this.t;++t)p[t-h]=this[t];p.t=Math.max(this.t-h,0);p.s=this.s};a.prototype.lShiftTo=function(h,p){var t=h%this.DB,z=this.DB-t,D=(1<<z)-1;h=Math.floor(h/this.DB);var E=this.s<<t&this.DM,B;for(B=this.t-1;0<=B;--B)p[B+h+1]=this[B]>>z|E,E=(this[B]&D)<<t;for(B=h-1;0<=B;--B)p[B]=
0;p[h]=E;p.t=this.t+h+1;p.s=this.s;p.clamp()};a.prototype.rShiftTo=function(h,p){p.s=this.s;var t=Math.floor(h/this.DB);if(t>=this.t)p.t=0;else{h%=this.DB;var z=this.DB-h,D=(1<<h)-1;p[0]=this[t]>>h;for(var E=t+1;E<this.t;++E)p[E-t-1]|=(this[E]&D)<<z,p[E-t]=this[E]>>h;0<h&&(p[this.t-t-1]|=(this.s&D)<<z);p.t=this.t-t;p.clamp()}};a.prototype.subTo=function(h,p){for(var t=0,z=0,D=Math.min(h.t,this.t);t<D;)z+=this[t]-h[t],p[t++]=z&this.DM,z>>=this.DB;if(h.t<this.t){for(z-=h.s;t<this.t;)z+=this[t],p[t++]=
z&this.DM,z>>=this.DB;z+=this.s}else{for(z+=this.s;t<h.t;)z-=h[t],p[t++]=z&this.DM,z>>=this.DB;z-=h.s}p.s=0>z?-1:0;-1>z?p[t++]=this.DV+z:0<z&&(p[t++]=z);p.t=t;p.clamp()};a.prototype.multiplyTo=function(h,p){var t=this.abs(),z=h.abs(),D=t.t;for(p.t=D+z.t;0<=--D;)p[D]=0;for(D=0;D<z.t;++D)p[D+t.t]=t.am(0,z[D],p,D,0,t.t);p.s=0;p.clamp();this.s!=h.s&&a.ZERO.subTo(p,p)};a.prototype.squareTo=function(h){for(var p=this.abs(),t=h.t=2*p.t;0<=--t;)h[t]=0;for(t=0;t<p.t-1;++t){var z=p.am(t,p[t],h,2*t,0,1);(h[t+
p.t]+=p.am(t+1,2*p[t],h,2*t+1,z,p.t-t-1))>=p.DV&&(h[t+p.t]-=p.DV,h[t+p.t+1]=1)}0<h.t&&(h[h.t-1]+=p.am(t,p[t],h,2*t,0,1));h.s=0;h.clamp()};a.prototype.divRemTo=function(h,p,t){var z=h.abs();if(!(0>=z.t)){var D=this.abs();if(D.t<z.t)null!=p&&p.fromInt(0),null!=t&&this.copyTo(t);else{null==t&&(t=b());var E=b(),B=this.s;h=h.s;var v=this.DB-e(z[z.t-1]);0<v?(z.lShiftTo(v,E),D.lShiftTo(v,t)):(z.copyTo(E),D.copyTo(t));z=E.t;D=E[z-1];if(0!=D){var x=D*(1<<this.F1)+(1<z?E[z-2]>>this.F2:0),C=this.FV/x;x=(1<<
this.F1)/x;var N=1<<this.F2,K=t.t,P=K-z,L=null==p?b():p;E.dlShiftTo(P,L);0<=t.compareTo(L)&&(t[t.t++]=1,t.subTo(L,t));a.ONE.dlShiftTo(z,L);for(L.subTo(E,E);E.t<z;)E[E.t++]=0;for(;0<=--P;){var R=t[--K]==D?this.DM:Math.floor(t[K]*C+(t[K-1]+N)*x);if((t[K]+=E.am(0,R,t,P,0,z))<R)for(E.dlShiftTo(P,L),t.subTo(L,t);t[K]<--R;)t.subTo(L,t)}null!=p&&(t.drShiftTo(z,p),B!=h&&a.ZERO.subTo(p,p));t.t=z;t.clamp();0<v&&t.rShiftTo(v,t);0>B&&a.ZERO.subTo(t,t)}}}};a.prototype.invDigit=function(){if(1>this.t)return 0;
var h=this[0];if(0==(h&1))return 0;var p=h&3;p=p*(2-(h&15)*p)&15;p=p*(2-(h&255)*p)&255;p=p*(2-((h&65535)*p&65535))&65535;p=p*(2-h*p%this.DV)%this.DV;return 0<p?this.DV-p:-p};a.prototype.isEven=function(){return 0==(0<this.t?this[0]&1:this.s)};a.prototype.exp=function(h,p){if(4294967295<h||1>h)return a.ONE;var t=b(),z=b(),D=p.convert(this),E=e(h)-1;for(D.copyTo(t);0<=--E;)if(p.sqrTo(t,z),0<(h&1<<E))p.mulTo(z,D,t);else{var B=t;t=z;z=B}return p.revert(t)};a.prototype.toString=function(h){if(0>this.s)return"-"+
this.negate().toString(h);if(16==h)h=4;else if(8==h)h=3;else if(2==h)h=1;else if(32==h)h=5;else if(4==h)h=2;else return this.toRadix(h);var p=(1<<h)-1,t,z=!1,D="",E=this.t,B=this.DB-E*this.DB%h;if(0<E--)for(B<this.DB&&0<(t=this[E]>>B)&&(z=!0,D="0123456789abcdefghijklmnopqrstuvwxyz".charAt(t));0<=E;)B<h?(t=(this[E]&(1<<B)-1)<<h-B,t|=this[--E]>>(B+=this.DB-h)):(t=this[E]>>(B-=h)&p,0>=B&&(B+=this.DB,--E)),0<t&&(z=!0),z&&(D+="0123456789abcdefghijklmnopqrstuvwxyz".charAt(t));return z?D:"0"};a.prototype.negate=
function(){var h=b();a.ZERO.subTo(this,h);return h};a.prototype.abs=function(){return 0>this.s?this.negate():this};a.prototype.compareTo=function(h){var p=this.s-h.s;if(0!=p)return p;var t=this.t;p=t-h.t;if(0!=p)return p;for(;0<=--t;)if(0!=(p=this[t]-h[t]))return p;return 0};a.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+e(this[this.t-1]^this.s&this.DM)};a.prototype.mod=function(h){var p=b();this.abs().divRemTo(h,null,p);0>this.s&&0<p.compareTo(a.ZERO)&&h.subTo(p,p);return p};
a.prototype.modPowInt=function(h,p){p=256>h||p.isEven()?new f(p):new g(p);return this.exp(h,p)};a.ZERO=d(0);a.ONE=d(1);u.prototype.convert=y;u.prototype.revert=y;u.prototype.mulTo=function(h,p,t){h.multiplyTo(p,t)};u.prototype.sqrTo=function(h,p){h.squareTo(p)};A.prototype.convert=function(h){if(0>h.s||h.t>2*this.m.t)return h.mod(this.m);if(0>h.compareTo(this.m))return h;var p=b();h.copyTo(p);this.reduce(p);return p};A.prototype.revert=function(h){return h};A.prototype.reduce=function(h){h.drShiftTo(this.m.t-
1,this.r2);h.t>this.m.t+1&&(h.t=this.m.t+1,h.clamp());this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>h.compareTo(this.r2);)h.dAddOffset(1,this.m.t+1);for(h.subTo(this.r2,h);0<=h.compareTo(this.m);)h.subTo(this.m,h)};A.prototype.mulTo=function(h,p,t){h.multiplyTo(p,t);this.reduce(t)};A.prototype.sqrTo=function(h,p){h.squareTo(p);this.reduce(p)};var M=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,
113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],O=67108864/M[M.length-1];a.prototype.chunkSize=function(h){return Math.floor(Math.LN2*this.DB/Math.log(h))};a.prototype.toRadix=function(h){null==h&&(h=10);if(0==this.signum()||2>h||36<h)return"0";var p=this.chunkSize(h);p=Math.pow(h,
p);var t=d(p),z=b(),D=b(),E="";for(this.divRemTo(t,z,D);0<z.signum();)E=(p+D.intValue()).toString(h).substr(1)+E,z.divRemTo(t,z,D);return D.intValue().toString(h)+E};a.prototype.fromRadix=function(h,p){this.fromInt(0);null==p&&(p=10);for(var t=this.chunkSize(p),z=Math.pow(p,t),D=!1,E=0,B=0,v=0;v<h.length;++v){var x=n(h,v);0>x?"-"==h.charAt(v)&&0==this.signum()&&(D=!0):(B=p*B+x,++E>=t&&(this.dMultiply(z),this.dAddOffset(B,0),B=E=0))}0<E&&(this.dMultiply(Math.pow(p,E)),this.dAddOffset(B,0));D&&a.ZERO.subTo(this,
this)};a.prototype.fromNumber=function(h,p,t){if("number"==typeof p)if(2>h)this.fromInt(1);else for(this.fromNumber(h,t),this.testBit(h-1)||this.bitwiseTo(a.ONE.shiftLeft(h-1),l,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(p);)this.dAddOffset(2,0),this.bitLength()>h&&this.subTo(a.ONE.shiftLeft(h-1),this);else{t=[];var z=h&7;t.length=(h>>3)+1;p.nextBytes(t);t[0]=0<z?t[0]&(1<<z)-1:0;this.fromString(t,256)}};a.prototype.bitwiseTo=function(h,p,t){var z,D=Math.min(h.t,this.t);for(z=
0;z<D;++z)t[z]=p(this[z],h[z]);if(h.t<this.t){var E=h.s&this.DM;for(z=D;z<this.t;++z)t[z]=p(this[z],E);t.t=this.t}else{E=this.s&this.DM;for(z=D;z<h.t;++z)t[z]=p(E,h[z]);t.t=h.t}t.s=p(this.s,h.s);t.clamp()};a.prototype.changeBit=function(h,p){h=a.ONE.shiftLeft(h);this.bitwiseTo(h,p,h);return h};a.prototype.addTo=function(h,p){for(var t=0,z=0,D=Math.min(h.t,this.t);t<D;)z+=this[t]+h[t],p[t++]=z&this.DM,z>>=this.DB;if(h.t<this.t){for(z+=h.s;t<this.t;)z+=this[t],p[t++]=z&this.DM,z>>=this.DB;z+=this.s}else{for(z+=
this.s;t<h.t;)z+=h[t],p[t++]=z&this.DM,z>>=this.DB;z+=h.s}p.s=0>z?-1:0;0<z?p[t++]=z:-1>z&&(p[t++]=this.DV+z);p.t=t;p.clamp()};a.prototype.dMultiply=function(h){this[this.t]=this.am(0,h-1,this,0,0,this.t);++this.t;this.clamp()};a.prototype.dAddOffset=function(h,p){if(0!=h){for(;this.t<=p;)this[this.t++]=0;for(this[p]+=h;this[p]>=this.DV;)this[p]-=this.DV,++p>=this.t&&(this[this.t++]=0),++this[p]}};a.prototype.multiplyLowerTo=function(h,p,t){var z=Math.min(this.t+h.t,p);t.s=0;for(t.t=z;0<z;)t[--z]=
0;var D;for(D=t.t-this.t;z<D;++z)t[z+this.t]=this.am(0,h[z],t,z,0,this.t);for(D=Math.min(h.t,p);z<D;++z)this.am(0,h[z],t,z,0,p-z);t.clamp()};a.prototype.multiplyUpperTo=function(h,p,t){--p;var z=t.t=this.t+h.t-p;for(t.s=0;0<=--z;)t[z]=0;for(z=Math.max(p-this.t,0);z<h.t;++z)t[this.t+z-p]=this.am(p-z,h[z],t,0,0,this.t+z-p);t.clamp();t.drShiftTo(1,t)};a.prototype.modInt=function(h){if(0>=h)return 0;var p=this.DV%h,t=0>this.s?h-1:0;if(0<this.t)if(0==p)t=this[0]%h;else for(var z=this.t-1;0<=z;--z)t=(p*
t+this[z])%h;return t};a.prototype.millerRabin=function(h){var p=this.subtract(a.ONE),t=p.getLowestSetBit();if(0>=t)return!1;var z=p.shiftRight(t);h=h+1>>1;h>M.length&&(h=M.length);for(var D=b(),E=0;E<h;++E){D.fromInt(M[E]);var B=D.modPow(z,this);if(0!=B.compareTo(a.ONE)&&0!=B.compareTo(p)){for(var v=1;v++<t&&0!=B.compareTo(p);)if(B=B.modPowInt(2,this),0==B.compareTo(a.ONE))return!1;if(0!=B.compareTo(p))return!1}}return!0};a.prototype.clone=function(){var h=b();this.copyTo(h);return h};a.prototype.intValue=
function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]};a.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24};a.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16};a.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1};a.prototype.toByteArray=function(){var h=this.t,p=[];p[0]=this.s;var t=this.DB-
h*this.DB%8,z,D=0;if(0<h--)for(t<this.DB&&(z=this[h]>>t)!=(this.s&this.DM)>>t&&(p[D++]=z|this.s<<this.DB-t);0<=h;)if(8>t?(z=(this[h]&(1<<t)-1)<<8-t,z|=this[--h]>>(t+=this.DB-8)):(z=this[h]>>(t-=8)&255,0>=t&&(t+=this.DB,--h)),0!=(z&128)&&(z|=-256),0==D&&(this.s&128)!=(z&128)&&++D,0<D||z!=this.s)p[D++]=z;return p};a.prototype.equals=function(h){return 0==this.compareTo(h)};a.prototype.min=function(h){return 0>this.compareTo(h)?this:h};a.prototype.max=function(h){return 0<this.compareTo(h)?this:h};a.prototype.and=
function(h){var p=b();this.bitwiseTo(h,c,p);return p};a.prototype.or=function(h){var p=b();this.bitwiseTo(h,l,p);return p};a.prototype.xor=function(h){var p=b();this.bitwiseTo(h,q,p);return p};a.prototype.andNot=function(h){var p=b();this.bitwiseTo(h,w,p);return p};a.prototype.not=function(){for(var h=b(),p=0;p<this.t;++p)h[p]=this.DM&~this[p];h.t=this.t;h.s=~this.s;return h};a.prototype.shiftLeft=function(h){var p=b();0>h?this.rShiftTo(-h,p):this.lShiftTo(h,p);return p};a.prototype.shiftRight=function(h){var p=
b();0>h?this.lShiftTo(-h,p):this.rShiftTo(h,p);return p};a.prototype.getLowestSetBit=function(){for(var h=0;h<this.t;++h)if(0!=this[h]){var p=h*this.DB;h=this[h];if(0==h)h=-1;else{var t=0;0==(h&65535)&&(h>>=16,t+=16);0==(h&255)&&(h>>=8,t+=8);0==(h&15)&&(h>>=4,t+=4);0==(h&3)&&(h>>=2,t+=2);0==(h&1)&&++t;h=t}return p+h}return 0>this.s?this.t*this.DB:-1};a.prototype.bitCount=function(){for(var h=0,p=this.s&this.DM,t=0;t<this.t;++t){for(var z=this[t]^p,D=0;0!=z;)z&=z-1,++D;h+=D}return h};a.prototype.testBit=
function(h){var p=Math.floor(h/this.DB);return p>=this.t?0!=this.s:0!=(this[p]&1<<h%this.DB)};a.prototype.setBit=function(h){return this.changeBit(h,l)};a.prototype.clearBit=function(h){return this.changeBit(h,w)};a.prototype.flipBit=function(h){return this.changeBit(h,q)};a.prototype.add=function(h){var p=b();this.addTo(h,p);return p};a.prototype.subtract=function(h){var p=b();this.subTo(h,p);return p};a.prototype.multiply=function(h){var p=b();this.multiplyTo(h,p);return p};a.prototype.divide=function(h){var p=
b();this.divRemTo(h,p,null);return p};a.prototype.remainder=function(h){var p=b();this.divRemTo(h,null,p);return p};a.prototype.divideAndRemainder=function(h){var p=b(),t=b();this.divRemTo(h,p,t);return[p,t]};a.prototype.modPow=function(h,p){var t=h.bitLength(),z=d(1);if(0>=t)return z;var D=18>t?1:48>t?3:144>t?4:768>t?5:6;p=8>t?new f(p):p.isEven()?new A(p):new g(p);var E=[],B=3,v=D-1,x=(1<<D)-1;E[1]=p.convert(this);if(1<D)for(t=b(),p.sqrTo(E[1],t);B<=x;)E[B]=b(),p.mulTo(t,E[B-2],E[B]),B+=2;var C=
h.t-1,N,K=!0,P=b();for(t=e(h[C])-1;0<=C;){t>=v?N=h[C]>>t-v&x:(N=(h[C]&(1<<t+1)-1)<<v-t,0<C&&(N|=h[C-1]>>this.DB+t-v));for(B=D;0==(N&1);)N>>=1,--B;0>(t-=B)&&(t+=this.DB,--C);if(K)E[N].copyTo(z),K=!1;else{for(;1<B;)p.sqrTo(z,P),p.sqrTo(P,z),B-=2;0<B?p.sqrTo(z,P):(B=z,z=P,P=B);p.mulTo(P,E[N],z)}for(;0<=C&&0==(h[C]&1<<t);)p.sqrTo(z,P),B=z,z=P,P=B,0>--t&&(t=this.DB-1,--C)}return p.revert(z)};a.prototype.modInverse=function(h){var p=h.isEven();if(this.isEven()&&p||0==h.signum())return a.ZERO;for(var t=
h.clone(),z=this.clone(),D=d(1),E=d(0),B=d(0),v=d(1);0!=t.signum();){for(;t.isEven();)t.rShiftTo(1,t),p?(D.isEven()&&E.isEven()||(D.addTo(this,D),E.subTo(h,E)),D.rShiftTo(1,D)):E.isEven()||E.subTo(h,E),E.rShiftTo(1,E);for(;z.isEven();)z.rShiftTo(1,z),p?(B.isEven()&&v.isEven()||(B.addTo(this,B),v.subTo(h,v)),B.rShiftTo(1,B)):v.isEven()||v.subTo(h,v),v.rShiftTo(1,v);0<=t.compareTo(z)?(t.subTo(z,t),p&&D.subTo(B,D),E.subTo(v,E)):(z.subTo(t,z),p&&B.subTo(D,B),v.subTo(E,v))}if(0!=z.compareTo(a.ONE))return a.ZERO;
if(0<=v.compareTo(h))return v.subtract(h);if(0>v.signum())v.addTo(h,v);else return v;return 0>v.signum()?v.add(h):v};a.prototype.pow=function(h){return this.exp(h,new u)};a.prototype.gcd=function(h){var p=0>this.s?this.negate():this.clone();h=0>h.s?h.negate():h.clone();if(0>p.compareTo(h)){var t=p;p=h;h=t}t=p.getLowestSetBit();var z=h.getLowestSetBit();if(0>z)return p;t<z&&(z=t);for(0<z&&(p.rShiftTo(z,p),h.rShiftTo(z,h));0<p.signum();)0<(t=p.getLowestSetBit())&&p.rShiftTo(t,p),0<(t=h.getLowestSetBit())&&
h.rShiftTo(t,h),0<=p.compareTo(h)?(p.subTo(h,p),p.rShiftTo(1,p)):(h.subTo(p,h),h.rShiftTo(1,h));0<z&&h.lShiftTo(z,h);return h};a.prototype.isProbablePrime=function(h){var p,t=this.abs();if(1==t.t&&t[0]<=M[M.length-1]){for(p=0;p<M.length;++p)if(t[0]==M[p])return!0;return!1}if(t.isEven())return!1;for(p=1;p<M.length;){for(var z=M[p],D=p+1;D<M.length&&z<O;)z*=M[D++];for(z=t.modInt(z);p<D;)if(0==z%M[p++])return!1}return t.millerRabin(h)};return{BigInteger:a}}();BigInteger=BigInteger.BigInteger;SSHyClient.hash={};SSHyClient.hash.SHA1=function(a){this.data=a||"";this.digest_size=20};
SSHyClient.hash.SHA1.prototype={digest:function(){var a=toByteArray(this.data),b=bytesToWords(a),r=8*a.length;a=[];var k=1732584193,m=-271733879,n=-1732584194,d=271733878,e=-1009589776;b[r>>5]|=128<<24-r%32;b[(r+64>>>9<<4)+15]=r;for(r=0;r<b.length;r+=16){for(var f=k,g=m,c=n,l=d,q=e,w=0;80>w;w++){if(16>w)a[w]=b[r+w];else{var u=a[w-3]^a[w-8]^a[w-14]^a[w-16];a[w]=u<<1|u>>>31}u=(k<<5|k>>>27)+e+(a[w]>>>0)+(20>w?(m&n|~m&d)+1518500249:40>w?(m^n^d)+1859775393:60>w?(m&n|m&d|n&d)-1894007588:(m^n^d)-899497514);
e=d;d=n;n=m<<30|m>>>2;m=k;k=u}k+=f;m+=g;n+=c;d+=l;e+=q}return fromByteArray(wordsToBytes([k,m,n,d,e]))}};SSHyClient.hash.SHA256=function(a){this.data=a||"";this.digest_size=32};
SSHyClient.hash.SHA256.prototype={digest:function(){var a=toByteArray(this.data),b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,
2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=bytesToWords(a),k=8*a.length;a=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];var m=[],n,d;r[k>>5]|=128<<24-k%32;r[(k+64>>9<<4)+15]=k;for(n=0;n<r.length;n+=16){k=a[0];var e=a[1];var f=a[2];
var g=a[3];var c=a[4];var l=a[5];var q=a[6];var w=a[7];for(d=0;64>d;d++){if(16>d)m[d]=r[d+n];else{var u=m[d-15];var y=m[d-2];m[d]=((u<<25|u>>>7)^(u<<14|u>>>18)^u>>>3)+(m[d-7]>>>0)+((y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10)+(m[d-16]>>>0)}y=k&e^k&f^e&f;var A=(k<<30|k>>>2)^(k<<19|k>>>13)^(k<<10|k>>>22);u=(w>>>0)+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&l^~c&q)+b[d]+(m[d]>>>0);y=A+y;w=q;q=l;l=c;c=g+u>>>0;g=f;f=e;e=k;k=u+y>>>0}a[0]+=k;a[1]+=e;a[2]+=f;a[3]+=g;a[4]+=c;a[5]+=l;a[6]+=q;a[7]+=w}return fromByteArray(wordsToBytes(a))}};
SSHyClient.hash.HMAC=function(a,b,r){r=digestmod="SHA-1"==r?SSHyClient.hash.SHA1:SSHyClient.hash.SHA256;var k=new r,m=new r;64<a.length&&(a=(new r(a)).digest());a+=Array(64-a.length+1).join("\x00");r=toByteArray(a).slice(0);a=toByteArray(a).slice(0);for(var n=0;64>n;++n)r[n]^=92,a[n]^=54;k.data+=fromByteArray(r);m.data+=fromByteArray(a);m.data+=b;k.data+=m.digest();return k.digest()};
SSHyClient.hash.MD5=function(a){var b=toByteArray(a);a=bytesToWords(b);var r=8*b.length;b=1732584193;for(var k=-271733879,m=-1732584194,n=271733878,d=0;d<a.length;d++)a[d]=(a[d]<<8|a[d]>>>24)&16711935|(a[d]<<24|a[d]>>>8)&4278255360;a[r>>>5]|=128<<r%32;a[(r+64>>>9<<4)+14]=r;r=function(y,A,F,I,J,M,O){y=y+(A&F|~A&I)+(J>>>0)+O;return(y<<M|y>>>32-M)+A};var e=function(y,A,F,I,J,M,O){y=y+(A&I|F&~I)+(J>>>0)+O;return(y<<M|y>>>32-M)+A},f=function(y,A,F,I,J,M,O){y=y+(A^F^I)+(J>>>0)+O;return(y<<M|y>>>32-M)+A},
g=function(y,A,F,I,J,M,O){y=y+(F^(A|~I))+(J>>>0)+O;return(y<<M|y>>>32-M)+A};for(d=0;d<a.length;d+=16){var c=b,l=k,q=m,w=n;b=r(b,k,m,n,a[d+0],7,-680876936);n=r(n,b,k,m,a[d+1],12,-389564586);m=r(m,n,b,k,a[d+2],17,606105819);k=r(k,m,n,b,a[d+3],22,-1044525330);b=r(b,k,m,n,a[d+4],7,-176418897);n=r(n,b,k,m,a[d+5],12,1200080426);m=r(m,n,b,k,a[d+6],17,-1473231341);k=r(k,m,n,b,a[d+7],22,-45705983);b=r(b,k,m,n,a[d+8],7,1770035416);n=r(n,b,k,m,a[d+9],12,-1958414417);m=r(m,n,b,k,a[d+10],17,-42063);k=r(k,m,n,
b,a[d+11],22,-1990404162);b=r(b,k,m,n,a[d+12],7,1804603682);n=r(n,b,k,m,a[d+13],12,-40341101);m=r(m,n,b,k,a[d+14],17,-1502002290);k=r(k,m,n,b,a[d+15],22,1236535329);b=e(b,k,m,n,a[d+1],5,-165796510);n=e(n,b,k,m,a[d+6],9,-1069501632);m=e(m,n,b,k,a[d+11],14,643717713);k=e(k,m,n,b,a[d+0],20,-373897302);b=e(b,k,m,n,a[d+5],5,-701558691);n=e(n,b,k,m,a[d+10],9,38016083);m=e(m,n,b,k,a[d+15],14,-660478335);k=e(k,m,n,b,a[d+4],20,-405537848);b=e(b,k,m,n,a[d+9],5,568446438);n=e(n,b,k,m,a[d+14],9,-1019803690);
m=e(m,n,b,k,a[d+3],14,-187363961);k=e(k,m,n,b,a[d+8],20,1163531501);b=e(b,k,m,n,a[d+13],5,-1444681467);n=e(n,b,k,m,a[d+2],9,-51403784);m=e(m,n,b,k,a[d+7],14,1735328473);k=e(k,m,n,b,a[d+12],20,-1926607734);b=f(b,k,m,n,a[d+5],4,-378558);n=f(n,b,k,m,a[d+8],11,-2022574463);m=f(m,n,b,k,a[d+11],16,1839030562);k=f(k,m,n,b,a[d+14],23,-35309556);b=f(b,k,m,n,a[d+1],4,-1530992060);n=f(n,b,k,m,a[d+4],11,1272893353);m=f(m,n,b,k,a[d+7],16,-155497632);k=f(k,m,n,b,a[d+10],23,-1094730640);b=f(b,k,m,n,a[d+13],4,681279174);
n=f(n,b,k,m,a[d+0],11,-358537222);m=f(m,n,b,k,a[d+3],16,-722521979);k=f(k,m,n,b,a[d+6],23,76029189);b=f(b,k,m,n,a[d+9],4,-640364487);n=f(n,b,k,m,a[d+12],11,-421815835);m=f(m,n,b,k,a[d+15],16,530742520);k=f(k,m,n,b,a[d+2],23,-995338651);b=g(b,k,m,n,a[d+0],6,-198630844);n=g(n,b,k,m,a[d+7],10,1126891415);m=g(m,n,b,k,a[d+14],15,-1416354905);k=g(k,m,n,b,a[d+5],21,-57434055);b=g(b,k,m,n,a[d+12],6,1700485571);n=g(n,b,k,m,a[d+3],10,-1894986606);m=g(m,n,b,k,a[d+10],15,-1051523);k=g(k,m,n,b,a[d+1],21,-2054922799);
b=g(b,k,m,n,a[d+8],6,1873313359);n=g(n,b,k,m,a[d+15],10,-30611744);m=g(m,n,b,k,a[d+6],15,-1560198380);k=g(k,m,n,b,a[d+13],21,1309151649);b=g(b,k,m,n,a[d+4],6,-145523070);n=g(n,b,k,m,a[d+11],10,-1120210379);m=g(m,n,b,k,a[d+2],15,718787259);k=g(k,m,n,b,a[d+9],21,-343485551);b=b+c>>>0;k=k+l>>>0;m=m+q>>>0;n=n+w>>>0}var u=function(y){if(y.constructor==Number)return(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360;for(var A=0;A<y.length;A++)y[A]=u(y[A]);return y};return fromByteArray(wordsToBytes(u([b,k,
m,n])))};var symbols={"-2":"E","-1":"S",0:" ",1:".",2:"o",3:"+",4:"=",5:"*",6:"B",7:"O",8:"X",9:"@",10:"%",11:"&",12:"#",13:"/",14:"^"},bounds={width:17,height:9};function createBoard(a){for(var b=[],r=0;r<a.width;r++){b[r]=[];for(var k=0;k<a.height;k++)b[r][k]=0}return b}
function generateBoard(a){var b=createBoard(bounds),r=Math.floor(bounds.width/2),k=Math.floor(bounds.height/2);b[r][k]=-1;a.forEach(function(m){for(var n=0;8>n;n+=2){var d=m>>n&3;switch(d){case 0:case 1:0<k&&k--;break;case 2:case 3:k<bounds.height-1&&k++}switch(d){case 0:case 2:0<r&&r--;break;case 1:case 3:r<bounds.width-1&&r++}0<=b[r][k]&&b[r][k]++}});b[r][k]=-2;return b}
function boardToString(a){result=[];for(var b=0;b<bounds.height;b++){result[b]=[];for(var r=0;r<bounds.width;r++)result[b][r]=symbols[a[r][b]]||symbols[0];result[b]="|"+result[b].join("")+"|"}result.splice(0,0,"\n+---[ RSA2048 ]---+");result.push("+-----------------+");return result.join("\n")}function randomart(a){for(var b=[],r=0,k=a.length;r<k;r++)b.push("0x"+a[r]);document.getElementById("hostKeyImg").innerHTML=boardToString(generateBoard(b))};var struct={pack:function(a,b){var r="";switch(a){case "Q":a=new BigInteger("ff",16);r+=String.fromCharCode(b.shiftRight(56).and(a));r+=String.fromCharCode(b.shiftRight(48).and(a));r+=String.fromCharCode(b.shiftRight(40).and(a));r+=String.fromCharCode(b.shiftRight(32).and(a));r+=String.fromCharCode(b.shiftRight(24).and(a));r+=String.fromCharCode(b.shiftRight(16).and(a));r+=String.fromCharCode(b.shiftRight(8).and(a));r+=String.fromCharCode(b.and(a));break;case "I":r+=String.fromCharCode(b>>>24&255),
r+=String.fromCharCode(b>>>16&255),r+=String.fromCharCode(b>>>8&255);case "B":r+=String.fromCharCode(b&255)}return r},unpack:function(a,b){var r=[],k=0,m=0;switch(a){case "Q":m=new BigInteger("0",10);m=m.add((new BigInteger(b.charCodeAt(0).toString(),10)).shiftLeft(56));m=m.add((new BigInteger(b.charCodeAt(1).toString(),10)).shiftLeft(48));m=m.add((new BigInteger(b.charCodeAt(2).toString(),10)).shiftLeft(40));m=m.add((new BigInteger(b.charCodeAt(3).toString(),10)).shiftLeft(32));m=m.add((new BigInteger(b.charCodeAt(4).toString(),
10)).shiftLeft(24));m=m.add((new BigInteger(b.charCodeAt(5).toString(),10)).shiftLeft(16));m=m.add((new BigInteger(b.charCodeAt(6).toString(),10)).shiftLeft(8));m=m.add((new BigInteger(b.charCodeAt(7).toString(),10)).shiftLeft(0));r.push(m);break;case "I":m+=b.charCodeAt(0)<<24>>>0,m+=b.charCodeAt(1)<<16>>>0,m+=b.charCodeAt(2)<<8>>>0,k+=3;case "B":m+=b.charCodeAt(0+k)<<0>>>0,r.push(m)}return r}};function inflate_long(a){var b=new BigInteger("0",10);a.length%4&&(a=Array(4-a.length%4+1).join("\x00")+a);for(var r=0;r<a.length;r+=4)b=b.shiftLeft(32),b=b.add(new BigInteger(struct.unpack("I",a.substring(r,r+4))[0].toString(),10));return b}
function deflate_long(a,b){a="number"==typeof a?new BigInteger(a.toString(),10):a.clone();b=void 0==b?!0:b;for(var r="",k=new BigInteger("-1",10),m=new BigInteger("ffffffff",16);!a.equals(BigInteger.ZERO)&&!a.equals(k);)r=struct.pack("I",a.and(m))+r,a=a.shiftRight(32);m=!1;for(var n=0;n<r.length;++n){if(a.equals(BigInteger.ZERO)&&"\x00"!=r.charAt(n)){m=!0;break}if(a.equals(k)&&"\u00ff"!=r.charAt(n)){m=!0;break}}m||(n=0,r=a.equals(BigInteger.ZERO)?"\x00":"\u00ff");r=r.substring(n);b&&(a.equals(BigInteger.ZERO)&&
128<=r.charCodeAt(0)&&(r="\x00"+r),a.equals(k)&&128>r.charCodeAt(0)&&(r="\u00ff"+r));return r}function toByteArray(a){for(var b=new Uint8Array(a.length),r=0;r<a.length;r++)b[r]=a.charCodeAt(r);return b}function fromByteArray(a){return String.fromCharCode.apply(null,new Uint8Array(a))}function bytesToWords(a){for(var b=[],r=0,k=0;r<a.length;r++,k+=8)b[k>>>5]|=(a[r]&255)<<24-k%32;return b}function wordsToBytes(a){for(var b=[],r=0;r<32*a.length;r+=8)b.push(a[r>>>5]>>>24-r%32&255);return b}
function setCharAt(a,b,r){return a.substring(0,b)+r+a.substring(b+1)}function fromUtf8(a){for(var b="",r=toByteArray(a),k=0;k<a.length;k++){var m=a.charCodeAt(k);if(192<=m&&223>=m){var n=r[++k];m=(m&31)<<6|n&63}else if(224<=m&&239>=m){n=r[++k];var d=r[++k];m=(m&15)<<12|(n&63)<<6|d&63}else 128<=m&&(m=".");b+=String.fromCharCode(m)}return b}function read_rng(a){return String.fromCharCode.apply(null,window.crypto.getRandomValues(new Uint8Array(a)))}
function filter(a,b){a=a.split(",");for(var r=0;r<a.length;++r)if(-1!=b.indexOf(a[r]))return a[r]}function splitSlice(a,b){b=void 0===b?5E3:b;for(var r=[],k=0,m=a.length;k<m;k+=b)r.push(a.slice(k,b+k));return r}function modColorPercent(a,b){var r=parseInt(a.slice(1),16);a=0>b?0:255;b=0>b?-1*b:b;var k=r>>16,m=r>>8&255;r&=255;return"#"+(16777216+65536*(Math.round((a-k)*b)+k)+256*(Math.round((a-m)*b)+m)+(Math.round((a-r)*b)+r)).toString(16).slice(1)}
function ascii2hex(a){for(var b="",r=0;r<a.length;r++)b=1==a.charCodeAt(r).toString(16).length?b+("0"+a.charCodeAt(r).toString(16)):b+(""+a.charCodeAt(r).toString(16));return b}function termBackspace(a){a.write("\b");a.eraseRight(a.buffers._terminal.buffer.x-1,a.buffers._terminal.buffer.y)};(function(a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define([],a):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).Terminal=a()})(function(){return function m(b,r,k){function n(f,g){if(!r[f]){if(!b[f]){var c="function"==typeof require&&require;if(!g&&c)return c(f,!0);if(d)return d(f,!0);g=Error("Cannot find module '"+f+"'");throw g.code="MODULE_NOT_FOUND",g;}g=r[f]={exports:{}};
b[f][0].call(g.exports,function(l){var q=b[f][1][l];return n(q?q:l)},g,g.exports,m,b,r,k)}return r[f].exports}for(var d="function"==typeof require&&require,e=0;e<k.length;e++)n(k[e]);return n}({1:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});var m=b("./utils/CircularList");k.CHAR_DATA_ATTR_INDEX=0;k.CHAR_DATA_CHAR_INDEX=1;k.CHAR_DATA_WIDTH_INDEX=2;k.CHAR_DATA_CODE_INDEX=3;k.MAX_BUFFER_SIZE=4294967295;b=function(){function n(d,e){this._terminal=d;this._hasScrollback=e;this.clear()}
Object.defineProperty(n.prototype,"lines",{get:function(){return this._lines},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._terminal.rows},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"isCursorInViewport",{get:function(){var d=this.ybase+this.y-this.ydisp;return 0<=d&&d<this._terminal.rows},enumerable:!0,configurable:!0});n.prototype._getCorrectBufferLength=function(d){if(!this._hasScrollback)return d;
d+=this._terminal.options.scrollback;return d>k.MAX_BUFFER_SIZE?k.MAX_BUFFER_SIZE:d};n.prototype.fillViewportRows=function(){if(0===this._lines.length)for(var d=this._terminal.rows;d--;)this.lines.push(this._terminal.blankLine())};n.prototype.clear=function(){this.x=this.y=this.ybase=this.ydisp=0;this._lines=new m.CircularList(this._getCorrectBufferLength(this._terminal.rows));this.scrollTop=0;this.scrollBottom=this._terminal.rows-1;this.setupTabStops()};n.prototype.resize=function(d,e){var f=this._getCorrectBufferLength(e);
f>this._lines.maxLength&&(this._lines.maxLength=f);if(0<this._lines.length){if(this._terminal.cols<d)for(var g=[this._terminal.defAttr," ",1,32],c=0;c<this._lines.length;c++)for(;this._lines.get(c).length<d;)this._lines.get(c).push(g);g=0;if(this._terminal.rows<e)for(c=this._terminal.rows;c<e;c++)this._lines.length<e+this.ybase&&(0<this.ybase&&this._lines.length<=this.ybase+this.y+g+1?(this.ybase--,g++,0<this.ydisp&&this.ydisp--):this._lines.push(this._terminal.blankLine(void 0,void 0,d)));else for(c=
this._terminal.rows;c>e;c--)this._lines.length>e+this.ybase&&(this._lines.length>this.ybase+this.y+1?this._lines.pop():(this.ybase++,this.ydisp++));f<this._lines.maxLength&&(c=this._lines.length-f,0<c&&(this._lines.trimStart(c),this.ybase=Math.max(this.ybase-c,0),this.ydisp=Math.max(this.ydisp-c,0)),this._lines.maxLength=f);this.x=Math.min(this.x,d-1);this.y=Math.min(this.y,e-1);g&&(this.y+=g);this.savedY=Math.min(this.savedY,e-1);this.savedX=Math.min(this.savedX,d-1);this.scrollTop=0}this.scrollBottom=
e-1};n.prototype.translateBufferLineToString=function(d,e,f,g){void 0===f&&(f=0);void 0===g&&(g=null);var c="",l=this.lines.get(d);if(!l)return"";d=f;null===g&&(g=l.length);for(var q=g,w=0;w<l.length;w++){var u=l[w];c+=u[k.CHAR_DATA_CHAR_INDEX];0===u[k.CHAR_DATA_WIDTH_INDEX]?(f>=w&&d--,g>=w&&q--):1<u[k.CHAR_DATA_CHAR_INDEX].length&&(f>w&&(d+=u[k.CHAR_DATA_CHAR_INDEX].length-1),g>w&&(q+=u[k.CHAR_DATA_CHAR_INDEX].length-1))}return e&&(e=c.search(/\s+$/),-1!==e&&(q=Math.min(q,e)),q<=d)?"":c.substring(d,
q)};n.prototype.setupTabStops=function(d){null!=d?this.tabs[d]||(d=this.prevStop(d)):(this.tabs={},d=0);for(;d<this._terminal.cols;d+=this._terminal.options.tabStopWidth)this.tabs[d]=!0};n.prototype.prevStop=function(d){null==d&&(d=this.x);for(;!this.tabs[--d]&&0<d;);return d>=this._terminal.cols?this._terminal.cols-1:0>d?0:d};n.prototype.nextStop=function(d){null==d&&(d=this.x);for(;!this.tabs[++d]&&d<this._terminal.cols;);return d>=this._terminal.cols?this._terminal.cols-1:0>d?0:d};return n}();
k.Buffer=b},{"./utils/CircularList":32}],2:[function(b,r,k){var m=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,f){e.__proto__=f}||function(e,f){for(var g in f)f.hasOwnProperty(g)&&(e[g]=f[g])};return function(e,f){function g(){this.constructor=e}d(e,f);e.prototype=null===f?Object.create(f):(g.prototype=f.prototype,new g)}}();Object.defineProperty(k,"__esModule",{value:!0});var n=b("./Buffer");b=function(d){function e(f){var g=d.call(this)||
this;g._terminal=f;g._normal=new n.Buffer(g._terminal,!0);g._normal.fillViewportRows();g._alt=new n.Buffer(g._terminal,!1);g._activeBuffer=g._normal;g.setupTabStops();return g}m(e,d);Object.defineProperty(e.prototype,"alt",{get:function(){return this._alt},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"normal",{get:function(){return this._normal},enumerable:!0,
configurable:!0});e.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._alt.clear(),this._activeBuffer=this._normal,this.emit("activate",{activeBuffer:this._normal,inactiveBuffer:this._alt}))};e.prototype.activateAltBuffer=function(){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(),this._activeBuffer=this._alt,this.emit("activate",{activeBuffer:this._alt,inactiveBuffer:this._normal}))};e.prototype.resize=function(f,g){this._normal.resize(f,g);this._alt.resize(f,
g)};e.prototype.setupTabStops=function(f){this._normal.setupTabStops(f);this._alt.setupTabStops(f)};return e}(b("./EventEmitter").EventEmitter);k.BufferSet=b},{"./Buffer":1,"./EventEmitter":7}],3:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});k.wcwidth=function(m){function n(c,l){var q=0,w=l.length-1;if(c<l[0][0]||c>l[w][1])return!1;for(;w>=q;){var u=q+w>>1;if(c>l[u][1])q=u+1;else if(c<l[u][0])w=u-1;else return!0}return!1}var d=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,
1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,
2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,
4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],
e=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],f=m.control|0,g=null;return function(c){c|=0;if(32>c)return f|0;if(127>c)return 1;var l;if(!(l=g)){g="undefined"===typeof Uint32Array?Array(4096):new Uint32Array(4096);for(l=0;4096>l;++l){for(var q=0,w=16;w--;){q<<=2;var u=16*l+w;u=0===u?m.nul:32>u||127<=u&&160>u?m.control:n(u,d)?0:4352<=u&&(4447>=
u||9001===u||9002===u||11904<=u&&42191>=u&&12351!==u||44032<=u&&55203>=u||63744<=u&&64255>=u||65040<=u&&65049>=u||65072<=u&&65135>=u||65280<=u&&65376>=u||65504<=u&&65510>=u)?2:1;q|=u}g[l]=q}l=g}if(65536>c)return l[c>>4]>>((c&15)<<1)&3;c=n(c,e)?0:131072<=c&&196605>=c||196608<=c&&262141>=c?2:1;return c}}({nul:0,control:0})},{}],4:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});k.CHARSETS={};k.DEFAULT_CHARSET=k.CHARSETS.B;k.CHARSETS["0"]={"`":"\u25c6",a:"\u2592",b:"\t",c:"\f",d:"\r",
e:"\n",f:"\u00b0",g:"\u00b1",h:"\u2424",i:"\x0B",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",v:"\u2534",w:"\u252c",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\u00a3","~":"\u00b7"};k.CHARSETS.A={"#":"\u00a3"};k.CHARSETS.B=null;k.CHARSETS["4"]={"#":"\u00a3","@":"\u00be","[":"ij","\\":"\u00bd","]":"|","{":"\u00a8","|":"f","}":"\u00bc","~":"\u00b4"};k.CHARSETS.C=k.CHARSETS["5"]={"[":"\u00c4","\\":"\u00d6",
"]":"\u00c5","^":"\u00dc","`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};k.CHARSETS.R={"#":"\u00a3","@":"\u00e0","[":"\u00b0","\\":"\u00e7","]":"\u00a7","{":"\u00e9","|":"\u00f9","}":"\u00e8","~":"\u00a8"};k.CHARSETS.Q={"@":"\u00e0","[":"\u00e2","\\":"\u00e7","]":"\u00ea","^":"\u00ee","`":"\u00f4","{":"\u00e9","|":"\u00f9","}":"\u00e8","~":"\u00fb"};k.CHARSETS.K={"@":"\u00a7","[":"\u00c4","\\":"\u00d6","]":"\u00dc","{":"\u00e4","|":"\u00f6","}":"\u00fc","~":"\u00df"};k.CHARSETS.Y=
{"#":"\u00a3","@":"\u00a7","[":"\u00b0","\\":"\u00e7","]":"\u00e9","`":"\u00f9","{":"\u00e0","|":"\u00f2","}":"\u00e8","~":"\u00ec"};k.CHARSETS.E=k.CHARSETS["6"]={"@":"\u00c4","[":"\u00c6","\\":"\u00d8","]":"\u00c5","^":"\u00dc","`":"\u00e4","{":"\u00e6","|":"\u00f8","}":"\u00e5","~":"\u00fc"};k.CHARSETS.Z={"#":"\u00a3","@":"\u00a7","[":"\u00a1","\\":"\u00d1","]":"\u00bf","{":"\u00b0","|":"\u00f1","}":"\u00e7"};k.CHARSETS.H=k.CHARSETS["7"]={"@":"\u00c9","[":"\u00c4","\\":"\u00d6","]":"\u00c5","^":"\u00dc",
"`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};k.CHARSETS["="]={"#":"\u00f9","@":"\u00e0","[":"\u00e9","\\":"\u00e7","]":"\u00ea","^":"\u00ee",_:"\u00e8","`":"\u00f4","{":"\u00e4","|":"\u00f6","}":"\u00fc","~":"\u00fb"}},{}],5:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});b=function(){function m(n,d,e){this.textarea=n;this.compositionView=d;this.terminal=e;this.isSendingComposition=this.isComposing=!1;this.compositionPosition={start:null,end:null}}m.prototype.compositionstart=
function(){this.isComposing=!0;this.compositionPosition.start=this.textarea.value.length;this.compositionView.textContent="";this.compositionView.classList.add("active")};m.prototype.compositionupdate=function(n){var d=this;this.compositionView.textContent=n.data;this.updateCompositionElements();setTimeout(function(){d.compositionPosition.end=d.textarea.value.length},0)};m.prototype.compositionend=function(){this.finalizeComposition(!0)};m.prototype.keydown=function(n){if(this.isComposing||this.isSendingComposition){if(229===
n.keyCode||16===n.keyCode||17===n.keyCode||18===n.keyCode)return!1;this.finalizeComposition(!1)}return 229===n.keyCode?(this.handleAnyTextareaChanges(),!1):!0};m.prototype.finalizeComposition=function(n){var d=this;this.compositionView.classList.remove("active");this.isComposing=!1;this.clearTextareaPosition();if(n){var e=this.compositionPosition.start,f=this.compositionPosition.end;this.isSendingComposition=!0;setTimeout(function(){if(d.isSendingComposition){d.isSendingComposition=!1;var g=d.isComposing?
d.textarea.value.substring(e,f):d.textarea.value.substring(e);d.terminal.handler(g)}},0)}else this.isSendingComposition=!1,n=this.textarea.value.substring(this.compositionPosition.start,this.compositionPosition.end),this.terminal.handler(n)};m.prototype.handleAnyTextareaChanges=function(){var n=this,d=this.textarea.value;setTimeout(function(){if(!n.isComposing){var e=n.textarea.value.replace(d,"");0<e.length&&n.terminal.handler(e)}},0)};m.prototype.updateCompositionElements=function(n){var d=this;
if(this.isComposing){if(this.terminal.buffer.isCursorInViewport){var e=Math.ceil(this.terminal.charMeasure.height*this.terminal.options.lineHeight),f=this.terminal.buffer.y*e,g=this.terminal.buffer.x*this.terminal.charMeasure.width;this.compositionView.style.left=g+"px";this.compositionView.style.top=f+"px";this.compositionView.style.height=e+"px";this.compositionView.style.lineHeight=e+"px";e=this.compositionView.getBoundingClientRect();this.textarea.style.left=g+"px";this.textarea.style.top=f+"px";
this.textarea.style.width=e.width+"px";this.textarea.style.height=e.height+"px";this.textarea.style.lineHeight=e.height+"px"}n||setTimeout(function(){return d.updateCompositionElements(!0)},0)}};m.prototype.clearTextareaPosition=function(){this.textarea.style.left="";this.textarea.style.top=""};return m}();k.CompositionHelper=b},{}],6:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});b=k.C0||(k.C0={});b.NUL="\x00";b.SOH="\u0001";b.STX="\u0002";b.ETX="\u0003";b.EOT="\u0004";b.ENQ="\u0005";
b.ACK="\u0006";b.BEL="\u0007";b.BS="\b";b.HT="\t";b.LF="\n";b.VT="\x0B";b.FF="\f";b.CR="\r";b.SO="\u000e";b.SI="\u000f";b.DLE="\u0010";b.DC1="\u0011";b.DC2="\u0012";b.DC3="\u0013";b.DC4="\u0014";b.NAK="\u0015";b.SYN="\u0016";b.ETB="\u0017";b.CAN="\u0018";b.EM="\u0019";b.SUB="\u001a";b.ESC="\u001b";b.FS="\u001c";b.GS="\u001d";b.RS="\u001e";b.US="\u001f";b.SP=" ";b.DEL="\u007f"},{}],7:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});b=function(){function m(){this._events=this._events||
{}}m.prototype.on=function(n,d){this._events[n]=this._events[n]||[];this._events[n].push(d)};m.prototype.off=function(n,d){if(this._events[n]){n=this._events[n];for(var e=n.length;e--;)if(n[e]===d){n.splice(e,1);break}}};m.prototype.removeAllListeners=function(n){this._events[n]&&delete this._events[n]};m.prototype.emit=function(n){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];if(this._events[n]){e=this._events[n];for(var f=0;f<e.length;f++)e[f].apply(this,d)}};m.prototype.listeners=
function(n){return this._events[n]||[]};m.prototype.destroy=function(){this._events={}};return m}();k.EventEmitter=b},{}],8:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});var m=b("./EscapeSequences"),n=b("./Charsets"),d=b("./Buffer"),e=b("./renderer/Types"),f=b("./CharWidth");b=function(){function g(c){this._terminal=c}g.prototype.addChar=function(c,l){if(" "<=c){l=f.wcwidth(l);this._terminal.charset&&this._terminal.charset[c]&&(c=this._terminal.charset[c]);var q=this._terminal.buffer.y+
this._terminal.buffer.ybase;if(!l&&this._terminal.buffer.x)this._terminal.buffer.lines.get(q)[this._terminal.buffer.x-1]&&(this._terminal.buffer.lines.get(q)[this._terminal.buffer.x-1][d.CHAR_DATA_WIDTH_INDEX]?(this._terminal.buffer.lines.get(q)[this._terminal.buffer.x-1][d.CHAR_DATA_CHAR_INDEX]+=c,this._terminal.buffer.lines.get(q)[this._terminal.buffer.x-1][3]=c.charCodeAt(0)):this._terminal.buffer.lines.get(q)[this._terminal.buffer.x-2]&&(this._terminal.buffer.lines.get(q)[this._terminal.buffer.x-
2][d.CHAR_DATA_CHAR_INDEX]+=c,this._terminal.buffer.lines.get(q)[this._terminal.buffer.x-2][3]=c.charCodeAt(0)),this._terminal.updateRange(this._terminal.buffer.y));else{if(this._terminal.buffer.x+l-1>=this._terminal.cols)if(this._terminal.wraparoundMode)this._terminal.buffer.x=0,this._terminal.buffer.y++,this._terminal.buffer.y>this._terminal.buffer.scrollBottom?(this._terminal.buffer.y--,this._terminal.scroll(!0)):this._terminal.buffer.lines.get(this._terminal.buffer.y).isWrapped=!0;else if(2===
l)return;q=this._terminal.buffer.y+this._terminal.buffer.ybase;if(this._terminal.insertMode)for(var w=0;w<l;++w)0===this._terminal.buffer.lines.get(this._terminal.buffer.y+this._terminal.buffer.ybase).pop()[d.CHAR_DATA_WIDTH_INDEX]&&this._terminal.buffer.lines.get(q)[this._terminal.cols-2]&&2===this._terminal.buffer.lines.get(q)[this._terminal.cols-2][d.CHAR_DATA_WIDTH_INDEX]&&(this._terminal.buffer.lines.get(q)[this._terminal.cols-2]=[this._terminal.curAttr," ",1,32]),this._terminal.buffer.lines.get(q).splice(this._terminal.buffer.x,
0,[this._terminal.curAttr," ",1,32]);this._terminal.buffer.lines.get(q)[this._terminal.buffer.x]=[this._terminal.curAttr,c,l,c.charCodeAt(0)];this._terminal.buffer.x++;this._terminal.updateRange(this._terminal.buffer.y);2===l&&(this._terminal.buffer.lines.get(q)[this._terminal.buffer.x]=[this._terminal.curAttr,"",0,void 0],this._terminal.buffer.x++)}}};g.prototype.bell=function(){this._terminal.bell()};g.prototype.lineFeed=function(){this._terminal.convertEol&&(this._terminal.buffer.x=0);this._terminal.buffer.y++;
this._terminal.buffer.y>this._terminal.buffer.scrollBottom&&(this._terminal.buffer.y--,this._terminal.scroll());this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--;this._terminal.emit("linefeed")};g.prototype.carriageReturn=function(){this._terminal.buffer.x=0};g.prototype.backspace=function(){0<this._terminal.buffer.x&&this._terminal.buffer.x--};g.prototype.tab=function(){this._terminal.buffer.x=this._terminal.buffer.nextStop()};g.prototype.shiftOut=function(){this._terminal.setgLevel(1)};
g.prototype.shiftIn=function(){this._terminal.setgLevel(0)};g.prototype.insertChars=function(c){c=c[0];1>c&&(c=1);for(var l=this._terminal.buffer.y+this._terminal.buffer.ybase,q=this._terminal.buffer.x,w=[this._terminal.eraseAttr()," ",1,32];c--&&q<this._terminal.cols;)this._terminal.buffer.lines.get(l).splice(q++,0,w),this._terminal.buffer.lines.get(l).pop()};g.prototype.cursorUp=function(c){c=c[0];1>c&&(c=1);this._terminal.buffer.y-=c;0>this._terminal.buffer.y&&(this._terminal.buffer.y=0)};g.prototype.cursorDown=
function(c){c=c[0];1>c&&(c=1);this._terminal.buffer.y+=c;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1);this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--};g.prototype.cursorForward=function(c){c=c[0];1>c&&(c=1);this._terminal.buffer.x+=c;this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)};g.prototype.cursorBackward=function(c){c=c[0];1>c&&(c=1);this._terminal.buffer.x>=this._terminal.cols&&
this._terminal.buffer.x--;this._terminal.buffer.x-=c;0>this._terminal.buffer.x&&(this._terminal.buffer.x=0)};g.prototype.cursorNextLine=function(c){c=c[0];1>c&&(c=1);this._terminal.buffer.y+=c;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1);this._terminal.buffer.x=0};g.prototype.cursorPrecedingLine=function(c){c=c[0];1>c&&(c=1);this._terminal.buffer.y-=c;0>this._terminal.buffer.y&&(this._terminal.buffer.y=0);this._terminal.buffer.x=0};g.prototype.cursorCharAbsolute=
function(c){c=c[0];1>c&&(c=1);this._terminal.buffer.x=c-1};g.prototype.cursorPosition=function(c){var l=c[0]-1;c=2<=c.length?c[1]-1:0;0>l?l=0:l>=this._terminal.rows&&(l=this._terminal.rows-1);0>c?c=0:c>=this._terminal.cols&&(c=this._terminal.cols-1);this._terminal.buffer.x=c;this._terminal.buffer.y=l};g.prototype.cursorForwardTab=function(c){for(c=c[0]||1;c--;)this._terminal.buffer.x=this._terminal.buffer.nextStop()};g.prototype.eraseInDisplay=function(c){switch(c[0]){case 0:this._terminal.eraseRight(this._terminal.buffer.x,
this._terminal.buffer.y);for(c=this._terminal.buffer.y+1;c<this._terminal.rows;c++)this._terminal.eraseLine(c);break;case 1:this._terminal.eraseLeft(this._terminal.buffer.x,this._terminal.buffer.y);for(c=this._terminal.buffer.y;c--;)this._terminal.eraseLine(c);break;case 2:for(c=this._terminal.rows;c--;)this._terminal.eraseLine(c);break;case 3:c=this._terminal.buffer.lines.length-this._terminal.rows,0<c&&(this._terminal.buffer.lines.trimStart(c),this._terminal.buffer.ybase=Math.max(this._terminal.buffer.ybase-
c,0),this._terminal.buffer.ydisp=Math.max(this._terminal.buffer.ydisp-c,0),this._terminal.emit("scroll",0))}};g.prototype.eraseInLine=function(c){switch(c[0]){case 0:this._terminal.eraseRight(this._terminal.buffer.x,this._terminal.buffer.y);break;case 1:this._terminal.eraseLeft(this._terminal.buffer.x,this._terminal.buffer.y);break;case 2:this._terminal.eraseLine(this._terminal.buffer.y)}};g.prototype.insertLines=function(c){c=c[0];1>c&&(c=1);for(var l=this._terminal.buffer.y+this._terminal.buffer.ybase,
q=this._terminal.rows-1+this._terminal.buffer.ybase-(this._terminal.rows-1-this._terminal.buffer.scrollBottom)+1;c--;)this._terminal.buffer.lines.splice(q-1,1),this._terminal.buffer.lines.splice(l,0,this._terminal.blankLine(!0));this._terminal.updateRange(this._terminal.buffer.y);this._terminal.updateRange(this._terminal.buffer.scrollBottom)};g.prototype.deleteLines=function(c){c=c[0];1>c&&(c=1);var l=this._terminal.buffer.y+this._terminal.buffer.ybase;var q=this._terminal.rows-1-this._terminal.buffer.scrollBottom;
for(q=this._terminal.rows-1+this._terminal.buffer.ybase-q;c--;)this._terminal.buffer.lines.splice(l,1),this._terminal.buffer.lines.splice(q,0,this._terminal.blankLine(!0));this._terminal.updateRange(this._terminal.buffer.y);this._terminal.updateRange(this._terminal.buffer.scrollBottom)};g.prototype.deleteChars=function(c){c=c[0];1>c&&(c=1);for(var l=this._terminal.buffer.y+this._terminal.buffer.ybase,q=[this._terminal.eraseAttr()," ",1,32];c--;)this._terminal.buffer.lines.get(l).splice(this._terminal.buffer.x,
1),this._terminal.buffer.lines.get(l).push(q);this._terminal.updateRange(this._terminal.buffer.y)};g.prototype.scrollUp=function(c){for(c=c[0]||1;c--;)this._terminal.buffer.lines.splice(this._terminal.buffer.ybase+this._terminal.buffer.scrollTop,1),this._terminal.buffer.lines.splice(this._terminal.buffer.ybase+this._terminal.buffer.scrollBottom,0,this._terminal.blankLine());this._terminal.updateRange(this._terminal.buffer.scrollTop);this._terminal.updateRange(this._terminal.buffer.scrollBottom)};
g.prototype.scrollDown=function(c){for(c=c[0]||1;c--;)this._terminal.buffer.lines.splice(this._terminal.buffer.ybase+this._terminal.buffer.scrollBottom,1),this._terminal.buffer.lines.splice(this._terminal.buffer.ybase+this._terminal.buffer.scrollTop,0,this._terminal.blankLine());this._terminal.updateRange(this._terminal.buffer.scrollTop);this._terminal.updateRange(this._terminal.buffer.scrollBottom)};g.prototype.eraseChars=function(c){c=c[0];1>c&&(c=1);for(var l=this._terminal.buffer.y+this._terminal.buffer.ybase,
q=this._terminal.buffer.x,w=[this._terminal.eraseAttr()," ",1,32];c--&&q<this._terminal.cols;)this._terminal.buffer.lines.get(l)[q++]=w};g.prototype.cursorBackwardTab=function(c){for(c=c[0]||1;c--;)this._terminal.buffer.x=this._terminal.buffer.prevStop()};g.prototype.charPosAbsolute=function(c){c=c[0];1>c&&(c=1);this._terminal.buffer.x=c-1;this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)};g.prototype.HPositionRelative=function(c){c=c[0];1>c&&(c=1);this._terminal.buffer.x+=
c;this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)};g.prototype.repeatPrecedingCharacter=function(c){c=c[0]||1;for(var l=this._terminal.buffer.lines.get(this._terminal.buffer.ybase+this._terminal.buffer.y),q=l[this._terminal.buffer.x-1]||[this._terminal.defAttr," ",1,32];c--;)l[this._terminal.buffer.x++]=q};g.prototype.sendDeviceAttributes=function(c){0<c[0]||(this._terminal.prefix?">"===this._terminal.prefix&&(this._terminal.is("xterm")?this._terminal.send(m.C0.ESC+
"[>0;276;0c"):this._terminal.is("rxvt-unicode")?this._terminal.send(m.C0.ESC+"[>85;95;0c"):this._terminal.is("linux")?this._terminal.send(c[0]+"c"):this._terminal.is("screen")&&this._terminal.send(m.C0.ESC+"[>83;40003;0c")):this._terminal.is("xterm")||this._terminal.is("rxvt-unicode")||this._terminal.is("screen")?this._terminal.send(m.C0.ESC+"[?1;2c"):this._terminal.is("linux")&&this._terminal.send(m.C0.ESC+"[?6c"))};g.prototype.linePosAbsolute=function(c){c=c[0];1>c&&(c=1);this._terminal.buffer.y=
c-1;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1)};g.prototype.VPositionRelative=function(c){c=c[0];1>c&&(c=1);this._terminal.buffer.y+=c;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1);this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--};g.prototype.HVPosition=function(c){1>c[0]&&(c[0]=1);1>c[1]&&(c[1]=1);this._terminal.buffer.y=c[0]-1;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=
this._terminal.rows-1);this._terminal.buffer.x=c[1]-1;this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)};g.prototype.tabClear=function(c){c=c[0];0>=c?delete this._terminal.buffer.tabs[this._terminal.buffer.x]:3===c&&(this._terminal.buffer.tabs={})};g.prototype.setMode=function(c){if(1<c.length)for(var l=0;l<c.length;l++)this.setMode([c[l]]);else if(!this._terminal.prefix)switch(c[0]){case 4:this._terminal.insertMode=!0}else if("?"===this._terminal.prefix)switch(c[0]){case 1:this._terminal.applicationCursor=
!0;break;case 2:this._terminal.setgCharset(0,n.DEFAULT_CHARSET);this._terminal.setgCharset(1,n.DEFAULT_CHARSET);this._terminal.setgCharset(2,n.DEFAULT_CHARSET);this._terminal.setgCharset(3,n.DEFAULT_CHARSET);break;case 3:this._terminal.savedCols=this._terminal.cols;this._terminal.resize(132,this._terminal.rows);break;case 6:this._terminal.originMode=!0;break;case 7:this._terminal.wraparoundMode=!0;break;case 66:this._terminal.log("Serial port requested application keypad.");this._terminal.applicationKeypad=
!0;this._terminal.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this._terminal.x10Mouse=9===c[0];this._terminal.vt200Mouse=1E3===c[0];this._terminal.normalMouse=1E3<c[0];this._terminal.mouseEvents=!0;this._terminal.element.classList.add("enable-mouse-events");this._terminal.selectionManager.disable();this._terminal.log("Binding to mouse events.");break;case 1004:this._terminal.sendFocus=!0;break;case 1005:this._terminal.utfMouse=!0;break;case 1006:this._terminal.sgrMouse=!0;
break;case 1015:this._terminal.urxvtMouse=!0;break;case 25:this._terminal.cursorHidden=!1;break;case 1049:case 47:case 1047:this._terminal.buffers.activateAltBuffer();this._terminal.viewport.syncScrollArea();this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!0}};g.prototype.resetMode=function(c){if(1<c.length)for(var l=0;l<c.length;l++)this.resetMode([c[l]]);else if(!this._terminal.prefix)switch(c[0]){case 4:this._terminal.insertMode=!1}else if("?"===this._terminal.prefix)switch(c[0]){case 1:this._terminal.applicationCursor=
!1;break;case 3:132===this._terminal.cols&&this._terminal.savedCols&&this._terminal.resize(this._terminal.savedCols,this._terminal.rows);delete this._terminal.savedCols;break;case 6:this._terminal.originMode=!1;break;case 7:this._terminal.wraparoundMode=!1;break;case 66:this._terminal.log("Switching back to normal keypad.");this._terminal.applicationKeypad=!1;this._terminal.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this._terminal.x10Mouse=!1;this._terminal.vt200Mouse=!1;
this._terminal.normalMouse=!1;this._terminal.mouseEvents=!1;this._terminal.element.classList.remove("enable-mouse-events");this._terminal.selectionManager.enable();break;case 1004:this._terminal.sendFocus=!1;break;case 1005:this._terminal.utfMouse=!1;break;case 1006:this._terminal.sgrMouse=!1;break;case 1015:this._terminal.urxvtMouse=!1;break;case 25:this._terminal.cursorHidden=!0;break;case 1049:case 47:case 1047:this._terminal.buffers.activateNormalBuffer();this._terminal.refresh(0,this._terminal.rows-
1);this._terminal.viewport.syncScrollArea();this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!1}};g.prototype.charAttributes=function(c){if(1===c.length&&0===c[0])this._terminal.curAttr=this._terminal.defAttr;else{for(var l=c.length,q=this._terminal.curAttr>>18,w=this._terminal.curAttr>>9&511,u=this._terminal.curAttr&511,y,A=0;A<l;A++)y=c[A],30<=y&&37>=y?w=y-30:40<=y&&47>=y?u=y-40:90<=y&&97>=y?(y+=8,w=y-90):100<=y&&107>=y?(y+=8,u=y-100):0===y?(q=this._terminal.defAttr>>
18,w=this._terminal.defAttr>>9&511,u=this._terminal.defAttr&511):1===y?q|=e.FLAGS.BOLD:4===y?q|=e.FLAGS.UNDERLINE:5===y?q|=e.FLAGS.BLINK:7===y?q|=e.FLAGS.INVERSE:8===y?q|=e.FLAGS.INVISIBLE:2===y?q|=e.FLAGS.DIM:22===y?(q&=~e.FLAGS.BOLD,q&=~e.FLAGS.DIM):24===y?q&=~e.FLAGS.UNDERLINE:25===y?q&=~e.FLAGS.BLINK:27===y?q&=~e.FLAGS.INVERSE:28===y?q&=~e.FLAGS.INVISIBLE:39===y?w=this._terminal.defAttr>>9&511:49===y?u=this._terminal.defAttr&511:38===y?2===c[A+1]?(A+=2,w=this._terminal.matchColor(c[A]&255,c[A+
1]&255,c[A+2]&255),-1===w&&(w=511),A+=2):5===c[A+1]&&(A+=2,w=y=c[A]&255):48===y?2===c[A+1]?(A+=2,u=this._terminal.matchColor(c[A]&255,c[A+1]&255,c[A+2]&255),-1===u&&(u=511),A+=2):5===c[A+1]&&(A+=2,u=y=c[A]&255):100===y?(w=this._terminal.defAttr>>9&511,u=this._terminal.defAttr&511):this._terminal.error("Unknown SGR attribute: %d.",y);this._terminal.curAttr=q<<18|w<<9|u}};g.prototype.deviceStatus=function(c){if(!this._terminal.prefix)switch(c[0]){case 5:this._terminal.send(m.C0.ESC+"[0n");break;case 6:this._terminal.send(m.C0.ESC+
"["+(this._terminal.buffer.y+1)+";"+(this._terminal.buffer.x+1)+"R")}else if("?"===this._terminal.prefix)switch(c[0]){case 6:this._terminal.send(m.C0.ESC+"[?"+(this._terminal.buffer.y+1)+";"+(this._terminal.buffer.x+1)+"R")}};g.prototype.softReset=function(c){this._terminal.cursorHidden=!1;this._terminal.insertMode=!1;this._terminal.originMode=!1;this._terminal.wraparoundMode=!0;this._terminal.applicationKeypad=!1;this._terminal.viewport.syncScrollArea();this._terminal.applicationCursor=!1;this._terminal.buffer.scrollTop=
0;this._terminal.buffer.scrollBottom=this._terminal.rows-1;this._terminal.curAttr=this._terminal.defAttr;this._terminal.buffer.x=this._terminal.buffer.y=0;this._terminal.charset=null;this._terminal.glevel=0;this._terminal.charsets=[null]};g.prototype.setCursorStyle=function(c){c=1>c[0]?1:c[0];switch(c){case 1:case 2:this._terminal.setOption("cursorStyle","block");break;case 3:case 4:this._terminal.setOption("cursorStyle","underline");break;case 5:case 6:this._terminal.setOption("cursorStyle","bar")}this._terminal.setOption("cursorBlink",
1===c%2)};g.prototype.setScrollRegion=function(c){this._terminal.prefix||(this._terminal.buffer.scrollTop=(c[0]||1)-1,this._terminal.buffer.scrollBottom=(c[1]&&c[1]<=this._terminal.rows?c[1]:this._terminal.rows)-1,this._terminal.buffer.x=0,this._terminal.buffer.y=0)};g.prototype.saveCursor=function(c){this._terminal.buffer.savedX=this._terminal.buffer.x;this._terminal.buffer.savedY=this._terminal.buffer.y};g.prototype.restoreCursor=function(c){this._terminal.buffer.x=this._terminal.buffer.savedX||
0;this._terminal.buffer.y=this._terminal.buffer.savedY||0};return g}();k.InputHandler=b},{"./Buffer":1,"./CharWidth":3,"./Charsets":4,"./EscapeSequences":6,"./renderer/Types":28}],9:[function(b,r,k){var m=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,c){g.__proto__=c}||function(g,c){for(var l in c)c.hasOwnProperty(l)&&(g[l]=c[l])};return function(g,c){function l(){this.constructor=g}f(g,c);g.prototype=null===c?Object.create(c):(l.prototype=
c.prototype,new l)}}();Object.defineProperty(k,"__esModule",{value:!0});var n=b("./Types"),d=b("./input/MouseZoneManager"),e=/(?:^|[^\da-z\.-]+)((https?:\/\/)((([\da-z\.-]+)\.([a-z\.]{2,6}))|((\d{1,3}\.){3}\d{1,3})|(localhost))(:\d{1,5})?(\/[\/\w\.\-%~]*)*(\?[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?(#[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?)($|[^\/\w\.\-%]+)/;b=function(f){function g(c){var l=f.call(this)||this;l._terminal=c;l._linkMatchers=[];l._nextLinkMatcherId=0;l._rowsToLinkify={start:null,
end:null};l.registerLinkMatcher(e,null,{matchIndex:1});return l}m(g,f);g.prototype.attachToDom=function(c){this._mouseZoneManager=c};g.prototype.linkifyRows=function(c,l){var q=this;this._mouseZoneManager&&(null===this._rowsToLinkify.start?(this._rowsToLinkify.start=c,this._rowsToLinkify.end=l):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,c),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,l)),this._mouseZoneManager.clearAll(c,l),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),
this._rowsTimeoutId=setTimeout(function(){return q._linkifyRows()},g.TIME_BEFORE_LINKIFY))};g.prototype._linkifyRows=function(){this._rowsTimeoutId=null;for(var c=this._rowsToLinkify.start;c<=this._rowsToLinkify.end;c++)this._linkifyRow(c);this._rowsToLinkify.start=null;this._rowsToLinkify.end=null};g.prototype.setHypertextLinkHandler=function(c){this._linkMatchers[0].handler=c};g.prototype.setHypertextValidationCallback=function(c){this._linkMatchers[0].validationCallback=c};g.prototype.registerLinkMatcher=
function(c,l,q){void 0===q&&(q={});if(0!==this._nextLinkMatcherId&&!l)throw Error("handler must be defined");c={id:this._nextLinkMatcherId++,regex:c,handler:l,matchIndex:q.matchIndex,validationCallback:q.validationCallback,hoverTooltipCallback:q.tooltipCallback,hoverLeaveCallback:q.leaveCallback,willLinkActivate:q.willLinkActivate,priority:q.priority||0};this._addLinkMatcherToList(c);return c.id};g.prototype._addLinkMatcherToList=function(c){if(0===this._linkMatchers.length)this._linkMatchers.push(c);
else{for(var l=this._linkMatchers.length-1;0<=l;l--)if(c.priority<=this._linkMatchers[l].priority){this._linkMatchers.splice(l+1,0,c);return}this._linkMatchers.splice(0,0,c)}};g.prototype.deregisterLinkMatcher=function(c){for(var l=1;l<this._linkMatchers.length;l++)if(this._linkMatchers[l].id===c)return this._linkMatchers.splice(l,1),!0;return!1};g.prototype._linkifyRow=function(c){var l=this._terminal.buffer.ydisp+c;if(!(l>=this._terminal.buffer.lines.length)){l=this._terminal.buffer.translateBufferLineToString(l,
!1);for(var q=0;q<this._linkMatchers.length;q++)this._doLinkifyRow(c,l,this._linkMatchers[q])}};g.prototype._doLinkifyRow=function(c,l,q,w){var u=this;void 0===w&&(w=0);var y=l.match(q.regex);if(y&&0!==y.length){var A=y["number"!==typeof q.matchIndex?0:q.matchIndex],F=l.indexOf(A);q.validationCallback?q.validationCallback(A,function(I){u._rowsTimeoutId||I&&u._addLink(w+F,c,A,q)}):this._addLink(w+F,c,A,q);y=F+A.length;l=l.substr(y);0<l.length&&this._doLinkifyRow(c,l,q,w+y)}};g.prototype._addLink=function(c,
l,q,w){var u=this;this._mouseZoneManager.add(new d.MouseZone(c+1,c+1+q.length,l+1,function(y){if(w.handler)return w.handler(y,q);window.open(q,"_blank")},function(y){u.emit(n.LinkHoverEventTypes.HOVER,{x:c,y:l,length:q.length});u._terminal.element.style.cursor="pointer"},function(y){u.emit(n.LinkHoverEventTypes.TOOLTIP,{x:c,y:l,length:q.length});w.hoverTooltipCallback&&w.hoverTooltipCallback(y,q)},function(){u.emit(n.LinkHoverEventTypes.LEAVE,{x:c,y:l,length:q.length});u._terminal.element.style.cursor=
"";w.hoverLeaveCallback&&w.hoverLeaveCallback()},function(y){return w.willLinkActivate?w.willLinkActivate(y,q):!0}))};g.TIME_BEFORE_LINKIFY=200;return g}(b("./EventEmitter").EventEmitter);k.Linkifier=b},{"./EventEmitter":7,"./Types":14,"./input/MouseZoneManager":18}],10:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});var m=b("./EscapeSequences"),n=b("./Charsets"),d={};d[m.C0.BEL]=function(l,q){return q.bell()};d[m.C0.LF]=function(l,q){return q.lineFeed()};d[m.C0.VT]=d[m.C0.LF];d[m.C0.FF]=
d[m.C0.LF];d[m.C0.CR]=function(l,q){return q.carriageReturn()};d[m.C0.BS]=function(l,q){return q.backspace()};d[m.C0.HT]=function(l,q){return q.tab()};d[m.C0.SO]=function(l,q){return q.shiftOut()};d[m.C0.SI]=function(l,q){return q.shiftIn()};d[m.C0.ESC]=function(l,q){return l.setState(c.ESCAPED)};var e={"[":function(l,q){q.params=[];q.currentParam=0;l.setState(c.CSI_PARAM)},"]":function(l,q){q.params=[];q.currentParam=0;l.setState(c.OSC)},P:function(l,q){q.params=[];q.currentParam=0;l.setState(c.DCS)},
_:function(l,q){l.setState(c.IGNORE)},"^":function(l,q){l.setState(c.IGNORE)},c:function(l,q){q.reset()},E:function(l,q){q.buffer.x=0;q.index();l.setState(c.NORMAL)},D:function(l,q){q.index();l.setState(c.NORMAL)},M:function(l,q){q.reverseIndex();l.setState(c.NORMAL)},"%":function(l,q){q.setgLevel(0);q.setgCharset(0,n.DEFAULT_CHARSET);l.setState(c.NORMAL);l.skipNextChar()}};e[m.C0.CAN]=function(l){return l.setState(c.NORMAL)};var f={"?":function(l){return l.setPrefix("?")},">":function(l){return l.setPrefix(">")},
"!":function(l){return l.setPrefix("!")},0:function(l){return l.setParam(10*l.getParam())},1:function(l){return l.setParam(10*l.getParam()+1)},2:function(l){return l.setParam(10*l.getParam()+2)},3:function(l){return l.setParam(10*l.getParam()+3)},4:function(l){return l.setParam(10*l.getParam()+4)},5:function(l){return l.setParam(10*l.getParam()+5)},6:function(l){return l.setParam(10*l.getParam()+6)},7:function(l){return l.setParam(10*l.getParam()+7)},8:function(l){return l.setParam(10*l.getParam()+
8)},9:function(l){return l.setParam(10*l.getParam()+9)},$:function(l){return l.setPostfix("$")},'"':function(l){return l.setPostfix('"')}," ":function(l){return l.setPostfix(" ")},"'":function(l){return l.setPostfix("'")},";":function(l){return l.finalizeParam()}};f[m.C0.CAN]=function(l){return l.setState(c.NORMAL)};var g={"@":function(l,q,w){return l.insertChars(q)},A:function(l,q,w){return l.cursorUp(q)},B:function(l,q,w){return l.cursorDown(q)},C:function(l,q,w){return l.cursorForward(q)},D:function(l,
q,w){return l.cursorBackward(q)},E:function(l,q,w){return l.cursorNextLine(q)},F:function(l,q,w){return l.cursorPrecedingLine(q)},G:function(l,q,w){return l.cursorCharAbsolute(q)},H:function(l,q,w){return l.cursorPosition(q)},I:function(l,q,w){return l.cursorForwardTab(q)},J:function(l,q,w){return l.eraseInDisplay(q)},K:function(l,q,w){return l.eraseInLine(q)},L:function(l,q,w){return l.insertLines(q)},M:function(l,q,w){return l.deleteLines(q)},P:function(l,q,w){return l.deleteChars(q)},S:function(l,
q,w){return l.scrollUp(q)},T:function(l,q,w){2>q.length&&!w&&l.scrollDown(q)},X:function(l,q,w){return l.eraseChars(q)},Z:function(l,q,w){return l.cursorBackwardTab(q)},"`":function(l,q,w){return l.charPosAbsolute(q)},a:function(l,q,w){return l.HPositionRelative(q)},b:function(l,q,w){return l.repeatPrecedingCharacter(q)},c:function(l,q,w){return l.sendDeviceAttributes(q)},d:function(l,q,w){return l.linePosAbsolute(q)},e:function(l,q,w){return l.VPositionRelative(q)},f:function(l,q,w){return l.HVPosition(q)},
g:function(l,q,w){return l.tabClear(q)},h:function(l,q,w){return l.setMode(q)},l:function(l,q,w){return l.resetMode(q)},m:function(l,q,w){return l.charAttributes(q)},n:function(l,q,w){return l.deviceStatus(q)},p:function(l,q,w){switch(w){case "!":l.softReset(q)}},q:function(l,q,w,u){" "===u&&l.setCursorStyle(q)},r:function(l,q){return l.setScrollRegion(q)},s:function(l,q){return l.saveCursor(q)},u:function(l,q){return l.restoreCursor(q)}};g[m.C0.CAN]=function(l,q,w,u,y){return y.setState(c.NORMAL)};
var c;(function(l){l[l.NORMAL=0]="NORMAL";l[l.ESCAPED=1]="ESCAPED";l[l.CSI_PARAM=2]="CSI_PARAM";l[l.CSI=3]="CSI";l[l.OSC=4]="OSC";l[l.CHARSET=5]="CHARSET";l[l.DCS=6]="DCS";l[l.IGNORE=7]="IGNORE"})(c=k.ParserState||(k.ParserState={}));b=function(){function l(q,w){this._inputHandler=q;this._terminal=w;this._state=c.NORMAL}l.prototype.parse=function(q){var w=q.length,u=this._terminal.buffer.x,y=this._terminal.buffer.y;this._terminal.debug&&this._terminal.log("data: "+q);this._position=0;this._terminal.surrogate_high&&
(q=this._terminal.surrogate_high+q,this._terminal.surrogate_high="");for(;this._position<w;this._position++){var A=q[this._position];var F=q.charCodeAt(this._position);if(55296<=F&&56319>=F){var I=q.charCodeAt(this._position+1);if(isNaN(I)){this._terminal.surrogate_high=A;continue}F=1024*(F-55296)+(I-56320)+65536;A+=q.charAt(this._position+1)}if(!(56320<=F&&57343>=F))switch(this._state){case c.NORMAL:if(A in d)d[A](this,this._inputHandler);else this._inputHandler.addChar(A,F);break;case c.ESCAPED:if(A in
e){e[A](this,this._terminal);break}switch(A){case "(":case ")":case "*":case "+":case "-":case ".":switch(A){case "(":this._terminal.gcharset=0;break;case ")":this._terminal.gcharset=1;break;case "*":this._terminal.gcharset=2;break;case "+":this._terminal.gcharset=3;break;case "-":this._terminal.gcharset=1;break;case ".":this._terminal.gcharset=2}this._state=c.CHARSET;break;case "/":this._terminal.gcharset=3;this._state=c.CHARSET;this._position--;break;case "N":this._state=c.NORMAL;break;case "O":this._state=
c.NORMAL;break;case "n":this._terminal.setgLevel(2);this._state=c.NORMAL;break;case "o":this._terminal.setgLevel(3);this._state=c.NORMAL;break;case "|":this._terminal.setgLevel(3);this._state=c.NORMAL;break;case "}":this._terminal.setgLevel(2);this._state=c.NORMAL;break;case "~":this._terminal.setgLevel(1);this._state=c.NORMAL;break;case "7":this._inputHandler.saveCursor();this._state=c.NORMAL;break;case "8":this._inputHandler.restoreCursor();this._state=c.NORMAL;break;case "#":this._state=c.NORMAL;
this._position++;break;case "H":this._terminal.tabSet();this._state=c.NORMAL;break;case "=":this._terminal.log("Serial port requested application keypad.");this._terminal.applicationKeypad=!0;this._terminal.viewport&&this._terminal.viewport.syncScrollArea();this._state=c.NORMAL;break;case ">":this._terminal.log("Switching back to normal keypad.");this._terminal.applicationKeypad=!1;this._terminal.viewport&&this._terminal.viewport.syncScrollArea();this._state=c.NORMAL;break;default:this._state=c.NORMAL,
this._terminal.error("Unknown ESC control: %s.",A)}break;case c.CHARSET:A in n.CHARSETS?(F=n.CHARSETS[A],"/"===A&&this.skipNextChar()):F=n.DEFAULT_CHARSET;this._terminal.setgCharset(this._terminal.gcharset,F);this._terminal.gcharset=null;this._state=c.NORMAL;break;case c.OSC:if(A===m.C0.ESC||A===m.C0.BEL){A===m.C0.ESC&&this._position++;this._terminal.params.push(this._terminal.currentParam);switch(this._terminal.params[0]){case 0:case 1:case 2:this._terminal.params[1]&&(this._terminal.title=this._terminal.params[1],
this._terminal.handleTitle(this._terminal.title))}this._terminal.params=[];this._terminal.currentParam=0;this._state=c.NORMAL}else this._terminal.params.length?this._terminal.currentParam+=A:"0"<=A&&"9">=A?this._terminal.currentParam=10*this._terminal.currentParam+A.charCodeAt(0)-48:";"===A&&(this._terminal.params.push(this._terminal.currentParam),this._terminal.currentParam="");break;case c.CSI_PARAM:if(A in f){f[A](this);break}this.finalizeParam();this._state=c.CSI;case c.CSI:A in g?(this._terminal.debug&&
this._terminal.log("CSI "+(this._terminal.prefix?this._terminal.prefix:"")+" "+(this._terminal.params?this._terminal.params.join(";"):"")+" "+(this._terminal.postfix?this._terminal.postfix:"")+" "+A),g[A](this._inputHandler,this._terminal.params,this._terminal.prefix,this._terminal.postfix,this)):this._terminal.error("Unknown CSI code: %s.",A);this._state=c.NORMAL;this._terminal.prefix="";this._terminal.postfix="";break;case c.DCS:if(A===m.C0.ESC||A===m.C0.BEL){A===m.C0.ESC&&this._position++;switch(this._terminal.prefix){case "":break;
case "$q":A=this._terminal.currentParam;F=!1;switch(A){case '"q':A='0"q';break;case '"p':A='61"p';break;case "r":A=""+(this._terminal.buffer.scrollTop+1)+";"+(this._terminal.buffer.scrollBottom+1)+"r";break;case "m":A="0m";break;default:this._terminal.error("Unknown DCS Pt: %s.",A),A=""}this._terminal.send(m.C0.ESC+"P"+ +F+"$r"+A+m.C0.ESC+"\\");break;case "+p":break;case "+q":A=this._terminal.currentParam;F=!1;this._terminal.send(m.C0.ESC+"P"+ +F+"+r"+A+m.C0.ESC+"\\");break;default:this._terminal.error("Unknown DCS prefix: %s.",
this._terminal.prefix)}this._terminal.currentParam=0;this._terminal.prefix="";this._state=c.NORMAL}else this._terminal.currentParam?this._terminal.currentParam+=A:this._terminal.prefix||"$"===A||"+"===A?2===this._terminal.prefix.length?this._terminal.currentParam=A:this._terminal.prefix+=A:this._terminal.currentParam=A;break;case c.IGNORE:if(A===m.C0.ESC||A===m.C0.BEL)A===m.C0.ESC&&this._position++,this._state=c.NORMAL}}this._terminal.buffer.x===u&&this._terminal.buffer.y===y||this._terminal.emit("cursormove");
return this._state};l.prototype.setState=function(q){this._state=q};l.prototype.setPrefix=function(q){this._terminal.prefix=q};l.prototype.setPostfix=function(q){this._terminal.postfix=q};l.prototype.setParam=function(q){this._terminal.currentParam=q};l.prototype.getParam=function(){return this._terminal.currentParam};l.prototype.finalizeParam=function(){this._terminal.params.push(this._terminal.currentParam);this._terminal.currentParam=0};l.prototype.skipNextChar=function(){this._position++};return l}();
k.Parser=b},{"./Charsets":4,"./EscapeSequences":6}],11:[function(b,r,k){var m=this&&this.__extends||function(){var q=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,u){w.__proto__=u}||function(w,u){for(var y in u)u.hasOwnProperty(y)&&(w[y]=u[y])};return function(w,u){function y(){this.constructor=w}q(w,u);w.prototype=null===u?Object.create(u):(y.prototype=u.prototype,new y)}}();Object.defineProperty(k,"__esModule",{value:!0});var n=b("./utils/MouseHelper"),d=b("./shared/utils/Browser");
r=b("./EventEmitter");var e=b("./SelectionModel"),f=b("./Buffer"),g=b("./handlers/AltClickHandler");b=String.fromCharCode(160);var c=new RegExp(b,"g"),l;(function(q){q[q.NORMAL=0]="NORMAL";q[q.WORD=1]="WORD";q[q.LINE=2]="LINE"})(l||(l={}));b=function(q){function w(u,y){var A=q.call(this)||this;A._terminal=u;A._charMeasure=y;A._enabled=!0;A._initListeners();A.enable();A._model=new e.SelectionModel(u);A._activeSelectionMode=l.NORMAL;return A}m(w,q);Object.defineProperty(w.prototype,"_buffer",{get:function(){return this._terminal.buffers.active},
enumerable:!0,configurable:!0});w.prototype._initListeners=function(){var u=this;this._mouseMoveListener=function(y){return u._onMouseMove(y)};this._mouseUpListener=function(y){return u._onMouseUp(y)};this._trimListener=function(y){return u._onTrim(y)};this.initBuffersListeners()};w.prototype.initBuffersListeners=function(){var u=this;this._terminal.buffer.lines.on("trim",this._trimListener);this._terminal.buffers.on("activate",function(y){return u._onBufferActivate(y)})};w.prototype.disable=function(){this.clearSelection();
this._enabled=!1};w.prototype.enable=function(){this._enabled=!0};Object.defineProperty(w.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!0,configurable:!0});Object.defineProperty(w.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!0,configurable:!0});Object.defineProperty(w.prototype,"hasSelection",{get:function(){var u=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;return u&&y?u[0]!==y[0]||u[1]!==
y[1]:!1},enumerable:!0,configurable:!0});Object.defineProperty(w.prototype,"selectionText",{get:function(){var u=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;if(!u||!y)return"";var A=[];A.push(this._buffer.translateBufferLineToString(u[1],!0,u[0],u[1]===y[1]?y[0]:null));for(var F=u[1]+1;F<=y[1]-1;F++){var I=this._buffer.lines.get(F),J=this._buffer.translateBufferLineToString(F,!0);I.isWrapped?A[A.length-1]+=J:A.push(J)}u[1]!==y[1]&&(I=this._buffer.lines.get(y[1]),J=this._buffer.translateBufferLineToString(y[1],
!0,0,y[0]),I.isWrapped?A[A.length-1]+=J:A.push(J));return A.map(function(M){return M.replace(c," ")}).join(d.isMSWindows?"\r\n":"\n")},enumerable:!0,configurable:!0});w.prototype.clearSelection=function(){this._model.clearSelection();this._removeMouseDownListeners();this.refresh()};w.prototype.refresh=function(u){var y=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return y._refresh()}));d.isLinux&&u&&this.selectionText.length&&this.emit("newselection",
this.selectionText)};w.prototype._refresh=function(){this._refreshAnimationFrame=null;this.emit("refresh",{start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd})};w.prototype.isClickInSelection=function(u){u=this._getMouseBufferCoords(u);var y=this._model.finalSelectionStart,A=this._model.finalSelectionEnd;return y&&A?u[1]>y[1]&&u[1]<A[1]||y[1]===A[1]&&u[1]===y[1]&&u[0]>y[0]&&u[0]<A[0]||y[1]<A[1]&&u[1]===A[1]&&u[0]<A[0]:!1};w.prototype.selectWordAtCursor=function(u){if(u=this._getMouseBufferCoords(u))this._selectWordAt(u,
!1),this._model.selectionEnd=null,this.refresh(!0)};w.prototype.selectAll=function(){this._model.isSelectAllActive=!0;this.refresh();this._terminal.emit("selection")};w.prototype._onTrim=function(u){this._model.onTrim(u)&&this.refresh()};w.prototype._getMouseBufferCoords=function(u){u=this._terminal.mouseHelper.getCoords(u,this._terminal.screenElement,this._charMeasure,this._terminal.options.lineHeight,this._terminal.cols,this._terminal.rows,!0);if(!u)return null;u[0]--;u[1]--;u[1]+=this._terminal.buffer.ydisp;
return u};w.prototype._getMouseEventScrollAmount=function(u){u=n.MouseHelper.getCoordsRelativeToElement(u,this._terminal.screenElement)[1];var y=this._terminal.rows*Math.ceil(this._charMeasure.height*this._terminal.options.lineHeight);if(0<=u&&u<=y)return 0;u>y&&(u-=y);u=Math.min(Math.max(u,-50),50);u/=50;return u/Math.abs(u)+Math.round(14*u)};w.prototype.shouldForceSelection=function(u){return d.isMac?u.altKey:u.shiftKey};w.prototype.onMouseDown=function(u){this._mouseDownTimeStamp=u.timeStamp;if((2!==
u.button||!this.hasSelection)&&0===u.button){if(!this._enabled){if(!this.shouldForceSelection(u))return;u.stopPropagation()}u.preventDefault();this._dragScrollAmount=0;this._enabled&&u.shiftKey?this._onIncrementalClick(u):1===u.detail?this._onSingleClick(u):2===u.detail?this._onDoubleClick(u):3===u.detail&&this._onTripleClick(u);this._addMouseDownListeners();this.refresh(!0)}};w.prototype._addMouseDownListeners=function(){var u=this;this._terminal.element.ownerDocument.addEventListener("mousemove",
this._mouseMoveListener);this._terminal.element.ownerDocument.addEventListener("mouseup",this._mouseUpListener);this._dragScrollIntervalTimer=setInterval(function(){return u._dragScroll()},50)};w.prototype._removeMouseDownListeners=function(){this._terminal.element.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener);this._terminal.element.ownerDocument.removeEventListener("mouseup",this._mouseUpListener);clearInterval(this._dragScrollIntervalTimer);this._dragScrollIntervalTimer=
null};w.prototype._onIncrementalClick=function(u){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(u))};w.prototype._onSingleClick=function(u){this._model.selectionStartLength=0;this._model.isSelectAllActive=!1;this._activeSelectionMode=l.NORMAL;this._model.selectionStart=this._getMouseBufferCoords(u);this._model.selectionStart&&(this._model.selectionEnd=null,(u=this._buffer.lines.get(this._model.selectionStart[1]))&&(u.length>=this._model.selectionStart[0]||0===u[this._model.selectionStart[0]][f.CHAR_DATA_WIDTH_INDEX]&&
this._model.selectionStart[0]++))};w.prototype._onDoubleClick=function(u){if(u=this._getMouseBufferCoords(u))this._activeSelectionMode=l.WORD,this._selectWordAt(u,!0)};w.prototype._onTripleClick=function(u){if(u=this._getMouseBufferCoords(u))this._activeSelectionMode=l.LINE,this._selectLineAt(u[1])};w.prototype._onMouseMove=function(u){u.stopImmediatePropagation();var y=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;this._model.selectionEnd=this._getMouseBufferCoords(u);
this._model.selectionEnd?(this._activeSelectionMode===l.LINE?this._model.selectionEnd[0]=this._model.selectionEnd[1]<this._model.selectionStart[1]?0:this._terminal.cols:this._activeSelectionMode===l.WORD&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(u),0<this._dragScrollAmount?this._model.selectionEnd[0]=this._terminal.cols:0>this._dragScrollAmount&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]<this._buffer.lines.length&&(u=this._buffer.lines.get(this._model.selectionEnd[1])[this._model.selectionEnd[0]])&&
0===u[f.CHAR_DATA_WIDTH_INDEX]&&this._model.selectionEnd[0]++,y&&y[0]===this._model.selectionEnd[0]&&y[1]===this._model.selectionEnd[1]||this.refresh(!0)):this.refresh(!0)};w.prototype._dragScroll=function(){this._dragScrollAmount&&(this._terminal.scrollLines(this._dragScrollAmount,!1),this._model.selectionEnd=0<this._dragScrollAmount?[this._terminal.cols-1,Math.min(this._terminal.buffer.ydisp+this._terminal.rows,this._terminal.buffer.lines.length-1)]:[0,this._terminal.buffer.ydisp],this.refresh())};
w.prototype._onMouseUp=function(u){var y=u.timeStamp-this._mouseDownTimeStamp;this._removeMouseDownListeners();1>=this.selectionText.length&&500>y?(new g.AltClickHandler(u,this._terminal)).move():this.hasSelection&&this._terminal.emit("selection")};w.prototype._onBufferActivate=function(u){this.clearSelection();u.inactiveBuffer.lines.off("trim",this._trimListener);u.activeBuffer.lines.on("trim",this._trimListener)};w.prototype._convertViewportColToCharacterIndex=function(u,y){for(var A=y[0],F=0;y[0]>=
F;F++){var I=u[F];0===I[f.CHAR_DATA_WIDTH_INDEX]?A--:1<I[f.CHAR_DATA_CHAR_INDEX].length&&y[0]!==F&&(A+=I[f.CHAR_DATA_CHAR_INDEX].length-1)}return A};w.prototype.setSelection=function(u,y,A){this._model.clearSelection();this._removeMouseDownListeners();this._model.selectionStart=[u,y];this._model.selectionStartLength=A;this.refresh()};w.prototype._getWordAt=function(u,y){var A=this._buffer.lines.get(u[1]);if(!A)return null;var F=this._buffer.translateBufferLineToString(u[1],!1),I=this._convertViewportColToCharacterIndex(A,
u),J=I,M=u[0]-I,O=0,h=0,p=0,t=0;if(" "===F.charAt(I)){for(;0<I&&" "===F.charAt(I-1);)I--;for(;J<F.length&&" "===F.charAt(J+1);)J++}else{var z=u[0];u=u[0];0===A[z][f.CHAR_DATA_WIDTH_INDEX]&&(O++,z--);2===A[u][f.CHAR_DATA_WIDTH_INDEX]&&(h++,u++);1<A[u][f.CHAR_DATA_CHAR_INDEX].length&&(t+=A[u][f.CHAR_DATA_CHAR_INDEX].length-1,J+=A[u][f.CHAR_DATA_CHAR_INDEX].length-1);for(;0<z&&0<I&&!this._isCharWordSeparator(A[z-1]);){var D=A[z-1];0===D[f.CHAR_DATA_WIDTH_INDEX]?(O++,z--):1<D[f.CHAR_DATA_CHAR_INDEX].length&&
(p+=D[f.CHAR_DATA_CHAR_INDEX].length-1,I-=D[f.CHAR_DATA_CHAR_INDEX].length-1);I--;z--}for(;u<A.length&&J+1<F.length&&!this._isCharWordSeparator(A[u+1]);)D=A[u+1],2===D[f.CHAR_DATA_WIDTH_INDEX]?(h++,u++):1<D[f.CHAR_DATA_CHAR_INDEX].length&&(t+=D[f.CHAR_DATA_CHAR_INDEX].length-1,J+=D[f.CHAR_DATA_CHAR_INDEX].length-1),J++,u++}J++;A=I+M-O+p;O=Math.min(this._terminal.cols,J-I+O+h-p-t);return y||""!==F.slice(I,J).trim()?{start:A,length:O}:null};w.prototype._selectWordAt=function(u,y){if(y=this._getWordAt(u,
y))this._model.selectionStart=[y.start,u[1]],this._model.selectionStartLength=y.length};w.prototype._selectToWordAt=function(u){var y=this._getWordAt(u,!0);y&&(this._model.selectionEnd=[this._model.areSelectionValuesReversed()?y.start:y.start+y.length,u[1]])};w.prototype._isCharWordSeparator=function(u){return 0===u[f.CHAR_DATA_WIDTH_INDEX]?!1:0<=" ()[]{}'\"".indexOf(u[f.CHAR_DATA_CHAR_INDEX])};w.prototype._selectLineAt=function(u){this._model.selectionStart=[0,u];this._model.selectionStartLength=
this._terminal.cols};return w}(r.EventEmitter);k.SelectionManager=b},{"./Buffer":1,"./EventEmitter":7,"./SelectionModel":12,"./handlers/AltClickHandler":16,"./shared/utils/Browser":30,"./utils/MouseHelper":33}],12:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});b=function(){function m(n){this._terminal=n;this.clearSelection()}m.prototype.clearSelection=function(){this.selectionEnd=this.selectionStart=null;this.isSelectAllActive=!1;this.selectionStartLength=0};Object.defineProperty(m.prototype,
"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart?this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart:this.selectionStart},enumerable:!0,configurable:!0});Object.defineProperty(m.prototype,"finalSelectionEnd",{get:function(){return this.isSelectAllActive?[this._terminal.cols,this._terminal.buffer.ybase+this._terminal.rows-1]:this.selectionStart?!this.selectionEnd||this.areSelectionValuesReversed()?[this.selectionStart[0]+
this.selectionStartLength,this.selectionStart[1]]:this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd:null},enumerable:!0,configurable:!0});m.prototype.areSelectionValuesReversed=function(){var n=this.selectionStart,d=this.selectionEnd;return n&&d?n[1]>d[1]||n[1]===d[1]&&n[0]>d[0]:!1};m.prototype.onTrim=function(n){this.selectionStart&&(this.selectionStart[1]-=
n);this.selectionEnd&&(this.selectionEnd[1]-=n);if(this.selectionEnd&&0>this.selectionEnd[1])return this.clearSelection(),!0;this.selectionStart&&0>this.selectionStart[1]&&(this.selectionStart[1]=0);return!1};return m}();k.SelectionModel=b},{}],13:[function(b,r,k){var m=this&&this.__extends||function(){var E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,v){B.__proto__=v}||function(B,v){for(var x in v)v.hasOwnProperty(x)&&(B[x]=v[x])};return function(B,v){function x(){this.constructor=
B}E(B,v);B.prototype=null===v?Object.create(v):(x.prototype=v.prototype,new x)}}();Object.defineProperty(k,"__esModule",{value:!0});var n=b("./BufferSet"),d=b("./Buffer"),e=b("./CompositionHelper");r=b("./EventEmitter");var f=b("./Viewport"),g=b("./handlers/Clipboard"),c=b("./EscapeSequences"),l=b("./InputHandler"),q=b("./Parser"),w=b("./renderer/Renderer"),u=b("./Linkifier"),y=b("./SelectionManager"),A=b("./utils/CharMeasure"),F=b("./shared/utils/Browser"),I=b("./utils/MouseHelper"),J=b("./utils/Sounds"),
M=b("./renderer/ColorManager"),O=b("./input/MouseZoneManager"),h="undefined"!==typeof window?window.document:null,p={cols:80,rows:24,convertEol:!1,termName:"xterm",cursorBlink:!1,cursorStyle:"block",bellSound:J.BELL_SOUND,bellStyle:"none",enableBold:!0,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,scrollback:1E3,screenKeys:!1,debug:!1,macOptionIsMeta:!1,cancelEvents:!1,disableStdin:!1,useFlowControl:!1,allowTransparency:!1,
tabStopWidth:8,theme:null,rightClickSelectsWord:F.isMac};b=function(E){function B(v){void 0===v&&(v={});var x=E.call(this)||this;x.browser=F;x.options=v;x.setup();return x}m(B,E);B.prototype.setup=function(){var v=this;Object.keys(p).forEach(function(x){null==v.options[x]&&(v.options[x]=p[x]);v[x]=v.options[x]});this.parent=h?h.body:null;this.cols=this.options.cols;this.rows=this.options.rows;if(this.options.handler)this.on("data",this.options.handler);this.cursorState=0;this.cursorHidden=!1;this.sendDataQueue=
"";this.customKeyEventHandler=null;this.insertMode=this.originMode=this.applicationCursor=this.applicationKeypad=!1;this.wraparoundMode=!0;this.bracketedPasteMode=!1;this.gcharset=this.charset=null;this.glevel=0;this.charsets=[null];this.writable=this.readable=!0;this.curAttr=this.defAttr=131840;this.params=[];this.currentParam=0;this.postfix=this.prefix="";this.writeBuffer=[];this.writeStopped=this.xoffSentToCatchUp=this.writeInProgress=!1;this.surrogateHigh="";this.userScrolling=!1;this.inputHandler=
new l.InputHandler(this);this.parser=new q.Parser(this.inputHandler,this);this.renderer=this.renderer||null;this.selectionManager=this.selectionManager||null;this.linkifier=this.linkifier||new u.Linkifier(this);this._mouseZoneManager=this._mouseZoneManager||null;this.buffers=new n.BufferSet(this);this.selectionManager&&(this.selectionManager.clearSelection(),this.selectionManager.initBuffersListeners())};Object.defineProperty(B.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,
configurable:!0});B.prototype.eraseAttr=function(){return this.defAttr&-512|this.curAttr&511};B.prototype.focus=function(){this.textarea&&this.textarea.focus()};Object.defineProperty(B.prototype,"isFocused",{get:function(){return h.activeElement===this.textarea},enumerable:!0,configurable:!0});B.prototype.getOption=function(v){if(!(v in p))throw Error('No option with key "'+v+'"');return"undefined"!==typeof this.options[v]?this.options[v]:this[v]};B.prototype.setOption=function(v,x){if(!(v in p))throw Error('No option with key "'+
v+'"');switch(v){case "bellStyle":x||(x="none");break;case "cursorStyle":x||(x="block");break;case "fontWeight":x||(x="normal");break;case "fontWeightBold":x||(x="bold");break;case "lineHeight":if(1>x){console.warn(v+" cannot be less than 1, value: "+x);return}case "tabStopWidth":if(1>x){console.warn(v+" cannot be less than 1, value: "+x);return}break;case "theme":if(this.renderer){this._setTheme(x);return}break;case "scrollback":x=Math.min(x,d.MAX_BUFFER_SIZE);if(0>x){console.warn(v+" cannot be less than 0, value: "+
x);return}if(this.options[v]!==x){var C=this.rows+x;if(this.buffer.lines.length>C){C=this.buffer.lines.length-C;var N=0>this.buffer.ydisp-C;this.buffer.lines.trimStart(C);this.buffer.ybase=Math.max(this.buffer.ybase-C,0);this.buffer.ydisp=Math.max(this.buffer.ydisp-C,0);N&&this.refresh(0,this.rows-1)}}}this[v]=x;this.options[v]=x;switch(v){case "fontFamily":case "fontSize":this.renderer.clear();this.charMeasure.measure(this.options);break;case "enableBold":case "letterSpacing":case "lineHeight":case "fontWeight":case "fontWeightBold":v=
"fontWeight"===v||"fontWeightBold"===v||"enableBold"===v,this.renderer.clear(),this.renderer.onResize(this.cols,this.rows,v),this.refresh(0,this.rows-1);case "scrollback":this.buffers.resize(this.cols,this.rows);this.viewport.syncScrollArea();break;case "tabStopWidth":this.buffers.setupTabStops();break;case "bellSound":case "bellStyle":this.syncBellSound()}if(this.renderer)this.renderer.onOptionsChanged()};B.prototype._onTextAreaFocus=function(){this.sendFocus&&this.send(c.C0.ESC+"[I");this.element.classList.add("focus");
this.showCursor();this.emit("focus")};B.prototype.blur=function(){return this.textarea.blur()};B.prototype._onTextAreaBlur=function(){this.refresh(this.buffer.y,this.buffer.y);this.sendFocus&&this.send(c.C0.ESC+"[O");this.element.classList.remove("focus");this.emit("blur")};B.prototype.initGlobal=function(){var v=this;this.bindKeys();t(this.element,"copy",function(C){v.hasSelection()&&g.copyHandler(C,v,v.selectionManager)});var x=function(C){return g.pasteHandler(C,v)};t(this.textarea,"paste",x);
t(this.element,"paste",x);F.isFirefox?t(this.element,"mousedown",function(C){2===C.button&&g.rightClickHandler(C,v.textarea,v.selectionManager,v.options.rightClickSelectsWord)}):t(this.element,"contextmenu",function(C){g.rightClickHandler(C,v.textarea,v.selectionManager,v.options.rightClickSelectsWord)});F.isLinux&&t(this.element,"auxclick",function(C){1===C.button&&g.moveTextAreaUnderMouseCursor(C,v.textarea)})};B.prototype.bindKeys=function(){var v=this,x=this;t(this.element,"keydown",function(C){h.activeElement===
this&&x._keyDown(C)},!0);t(this.element,"keypress",function(C){h.activeElement===this&&x._keyPress(C)},!0);t(this.element,"keyup",function(C){16!==C.keyCode&&17!==C.keyCode&&18!==C.keyCode&&v.focus()},!0);t(this.textarea,"keydown",function(C){v._keyDown(C)},!0);t(this.textarea,"keypress",function(C){v._keyPress(C);v.textarea.value=""},!0);t(this.textarea,"compositionstart",function(){return v.compositionHelper.compositionstart()});t(this.textarea,"compositionupdate",function(C){return v.compositionHelper.compositionupdate(C)});
t(this.textarea,"compositionend",function(){return v.compositionHelper.compositionend()});this.on("refresh",function(){return v.compositionHelper.updateCompositionElements()});this.on("refresh",function(C){return v.queueLinkification(C.start,C.end)})};B.prototype.open=function(v){var x=this;this.parent=v||this.parent;if(!this.parent)throw Error("Terminal requires a parent element.");this.context=this.parent.ownerDocument.defaultView;this.document=this.parent.ownerDocument;this.body=this.document.body;
this.element=this.document.createElement("div");this.element.classList.add("terminal");this.element.classList.add("xterm");this.element.setAttribute("tabindex","0");this.parent.appendChild(this.element);v=h.createDocumentFragment();this.viewportElement=h.createElement("div");this.viewportElement.classList.add("xterm-viewport");v.appendChild(this.viewportElement);this.viewportScrollArea=h.createElement("div");this.viewportScrollArea.classList.add("xterm-scroll-area");this.viewportElement.appendChild(this.viewportScrollArea);
this.screenElement=h.createElement("div");this.screenElement.classList.add("xterm-screen");this.helperContainer=h.createElement("div");this.helperContainer.classList.add("xterm-helpers");this.screenElement.appendChild(this.helperContainer);v.appendChild(this.screenElement);this._mouseZoneManager=new O.MouseZoneManager(this);this.on("scroll",function(){return x._mouseZoneManager.clearAll()});this.linkifier.attachToDom(this._mouseZoneManager);this.textarea=h.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea");
this.textarea.setAttribute("autocorrect","off");this.textarea.setAttribute("autocapitalize","off");this.textarea.setAttribute("spellcheck","false");this.textarea.tabIndex=0;this.textarea.addEventListener("focus",function(){return x._onTextAreaFocus()});this.textarea.addEventListener("blur",function(){return x._onTextAreaBlur()});this.helperContainer.appendChild(this.textarea);this.compositionView=h.createElement("div");this.compositionView.classList.add("composition-view");this.compositionHelper=
new e.CompositionHelper(this.textarea,this.compositionView,this);this.helperContainer.appendChild(this.compositionView);this.charSizeStyleElement=h.createElement("style");this.helperContainer.appendChild(this.charSizeStyleElement);this.charMeasure=new A.CharMeasure(h,this.helperContainer);this.syncBellSound();this.element.appendChild(v);this.renderer=new w.Renderer(this,this.options.theme);this.options.theme=null;this.viewport=new f.Viewport(this,this.viewportElement,this.viewportScrollArea,this.charMeasure);
this.viewport.onThemeChanged(this.renderer.colorManager.colors);this.on("cursormove",function(){return x.renderer.onCursorMove()});this.on("resize",function(){return x.renderer.onResize(x.cols,x.rows,!1)});this.on("blur",function(){return x.renderer.onBlur()});this.on("focus",function(){return x.renderer.onFocus()});this.charMeasure.on("charsizechanged",function(){return x.renderer.onResize(x.cols,x.rows,!0)});this.renderer.on("resize",function(C){return x.viewport.syncScrollArea()});this.selectionManager=
new y.SelectionManager(this,this.charMeasure);this.element.addEventListener("mousedown",function(C){return x.selectionManager.onMouseDown(C)});this.selectionManager.on("refresh",function(C){return x.renderer.onSelectionChanged(C.start,C.end)});this.selectionManager.on("newselection",function(C){x.textarea.value=C;x.textarea.focus();x.textarea.select()});this.on("scroll",function(){x.viewport.syncScrollArea();x.selectionManager.refresh()});this.viewportElement.addEventListener("scroll",function(){return x.selectionManager.refresh()});
this.mouseHelper=new I.MouseHelper(this.renderer);this.charMeasure.measure(this.options);this.refresh(0,this.rows-1);this.initGlobal();this.bindMouse()};B.prototype._setTheme=function(v){v=this.renderer.setTheme(v);if(this.viewport)this.viewport.onThemeChanged(v)};B.applyAddon=function(v){v.apply(B)};B.prototype.bindMouse=function(){function v(G){switch(G.overrideType||G.type){case "mousedown":var H=null!=G.button?+G.button:null!=G.which?G.which-1:null;F.isMSIE&&(H=1===H?0:4===H?1:H);break;case "mouseup":H=
3;break;case "DOMMouseScroll":H=0>G.detail?64:65;break;case "wheel":H=0<G.wheelDeltaY?64:65}var Q=G.shiftKey?4:0;var S=G.metaKey?8:0;var T=G.ctrlKey?16:0;Q=Q|S|T;L.vt200Mouse?Q&=T:L.normalMouse||(Q=0);H=32+(Q<<2)+H;if(T=L.mouseHelper.getRawByteCoords(G,L.screenElement,L.charMeasure,L.options.lineHeight,L.cols,L.rows))switch(N(H,T),G.overrideType||G.type){case "mousedown":R=H;break;case "mouseup":R=32}}function x(G){var H=R;(G=L.mouseHelper.getRawByteCoords(G,L.screenElement,L.charMeasure,L.options.lineHeight,
L.cols,L.rows))&&N(H+32,G)}function C(G,H){L.utfMouse?2047===H?G.push(0):127>H?G.push(H):(2047<H&&(H=2047),G.push(192|H>>6),G.push(128|H&63)):255===H?G.push(0):(127<H&&(H=127),G.push(H))}function N(G,H){if(L.vt300Mouse){G&=3;H.x-=32;H.y-=32;var Q=c.C0.ESC+"[24";if(0===G)Q+="1";else if(1===G)Q+="3";else if(2===G)Q+="5";else{if(3===G)return;Q+="0"}Q+="~["+H.x+","+H.y+"]\r";L.send(Q)}else L.decLocator?(G&=3,H.x-=32,H.y-=32,0===G?G=2:1===G?G=4:2===G?G=6:3===G&&(G=3),L.send(c.C0.ESC+"["+G+";"+(3===G?4:
0)+";"+H.y+";"+H.x+";"+H.page||"0&w")):L.urxvtMouse?(H.x-=32,H.y-=32,H.x++,H.y++,L.send(c.C0.ESC+"["+G+";"+H.x+";"+H.y+"M")):L.sgrMouse?(H.x-=32,H.y-=32,L.send(c.C0.ESC+"[<"+((3===(G&3)?G&-4:G)-32)+";"+H.x+";"+H.y+(3===(G&3)?"m":"M"))):(Q=[],C(Q,G),C(Q,H.x),C(Q,H.y),L.send(c.C0.ESC+"[M"+String.fromCharCode.apply(String,Q)))}var K=this,P=this.element,L=this,R=32;t(P,"mousedown",function(G){G.preventDefault();K.focus();if(K.mouseEvents&&!K.selectionManager.shouldForceSelection(G)){v(G);if(K.vt200Mouse)return G.overrideType=
"mouseup",v(G),K.cancel(G);K.normalMouse&&t(K.document,"mousemove",x);if(!K.x10Mouse){var H=function(Q){v(Q);if(K.normalMouse){var S=void 0;void 0===S&&(S=!1);K.document.removeEventListener("mousemove",x,S)}S=void 0;void 0===S&&(S=!1);K.document.removeEventListener("mouseup",H,S);return K.cancel(Q)};t(K.document,"mouseup",H)}return K.cancel(G)}});t(P,"wheel",function(G){!K.mouseEvents||K.x10Mouse||K.vt300Mouse||K.decLocator||(v(G),G.preventDefault())});t(P,"wheel",function(G){if(!K.mouseEvents)return K.viewport.onWheel(G),
K.cancel(G)});t(P,"touchstart",function(G){if(!K.mouseEvents)return K.viewport.onTouchStart(G),K.cancel(G)});t(P,"touchmove",function(G){if(!K.mouseEvents)return K.viewport.onTouchMove(G),K.cancel(G)})};B.prototype.destroy=function(){E.prototype.destroy.call(this);this.writable=this.readable=!1;this.handler=function(){};this.write=function(){};this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)};B.prototype.refresh=function(v,x){this.renderer&&this.renderer.queueRefresh(v,
x)};B.prototype.queueLinkification=function(v,x){this.linkifier&&this.linkifier.linkifyRows(v,x)};B.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.buffer.y,this.buffer.y))};B.prototype.scroll=function(v){v=this.blankLine(void 0,v);var x=this.buffer.ybase+this.buffer.scrollTop,C=this.buffer.ybase+this.buffer.scrollBottom;0===this.buffer.scrollTop?(x=this.buffer.lines.length===this.buffer.lines.maxLength,C===this.buffer.lines.length-1?this.buffer.lines.push(v):
this.buffer.lines.splice(C+1,0,v),x)?this.userScrolling&&(this.buffer.ydisp=Math.max(this.buffer.ydisp-1,0)):(this.buffer.ybase++,this.userScrolling||this.buffer.ydisp++):(this.buffer.lines.shiftElements(x+1,C-x+1-1,-1),this.buffer.lines.set(C,v));this.userScrolling||(this.buffer.ydisp=this.buffer.ybase);this.updateRange(this.buffer.scrollTop);this.updateRange(this.buffer.scrollBottom);this.emit("scroll",this.buffer.ydisp)};B.prototype.scrollLines=function(v,x){if(0>v){if(0===this.buffer.ydisp)return;
this.userScrolling=!0}else v+this.buffer.ydisp>=this.buffer.ybase&&(this.userScrolling=!1);var C=this.buffer.ydisp;this.buffer.ydisp=Math.max(Math.min(this.buffer.ydisp+v,this.buffer.ybase),0);C!==this.buffer.ydisp&&(x||this.emit("scroll",this.buffer.ydisp),this.refresh(0,this.rows-1))};B.prototype.scrollPages=function(v){this.scrollLines(v*(this.rows-1))};B.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)};B.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-
this.buffer.ydisp)};B.prototype.write=function(v){var x=this;this.writeBuffer.push(v);this.options.useFlowControl&&!this.xoffSentToCatchUp&&5<=this.writeBuffer.length&&(this.send(c.C0.DC3),this.xoffSentToCatchUp=!0);!this.writeInProgress&&0<this.writeBuffer.length&&(this.writeInProgress=!0,setTimeout(function(){x.innerWrite()}))};B.prototype.innerWrite=function(){for(var v=this,x=this.writeBuffer.splice(0,300);0<x.length;){var C=x.shift();this.xoffSentToCatchUp&&0===x.length&&0===this.writeBuffer.length&&
(this.send(c.C0.DC1),this.xoffSentToCatchUp=!1);this.refreshEnd=this.refreshStart=this.buffer.y;C=this.parser.parse(C);this.parser.setState(C);this.updateRange(this.buffer.y);this.refresh(this.refreshStart,this.refreshEnd)}0<this.writeBuffer.length?setTimeout(function(){return v.innerWrite()},0):this.writeInProgress=!1};B.prototype.writeln=function(v){this.write(v+"\r\n")};B.prototype.attachCustomKeyEventHandler=function(v){this.customKeyEventHandler=v};B.prototype.setHypertextLinkHandler=function(v){if(!this.linkifier)throw Error("Cannot attach a hypertext link handler before Terminal.open is called");
this.linkifier.setHypertextLinkHandler(v);this.refresh(0,this.rows-1)};B.prototype.setHypertextValidationCallback=function(v){if(!this.linkifier)throw Error("Cannot attach a hypertext validation callback before Terminal.open is called");this.linkifier.setHypertextValidationCallback(v);this.refresh(0,this.rows-1)};B.prototype.registerLinkMatcher=function(v,x,C){return this.linkifier?(v=this.linkifier.registerLinkMatcher(v,x,C),this.refresh(0,this.rows-1),v):0};B.prototype.deregisterLinkMatcher=function(v){this.linkifier&&
this.linkifier.deregisterLinkMatcher(v)&&this.refresh(0,this.rows-1)};B.prototype.hasSelection=function(){return this.selectionManager?this.selectionManager.hasSelection:!1};B.prototype.getSelection=function(){return this.selectionManager?this.selectionManager.selectionText:""};B.prototype.clearSelection=function(){this.selectionManager&&this.selectionManager.clearSelection()};B.prototype.selectAll=function(){this.selectionManager&&this.selectionManager.selectAll()};B.prototype._keyDown=function(v){if(this.customKeyEventHandler&&
!1===this.customKeyEventHandler(v))return!1;if(!this.compositionHelper.keydown(v))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var x=this._evaluateKeyEscapeSequence(v);x.key===c.C0.DC3?this.writeStopped=!0:x.key===c.C0.DC1&&(this.writeStopped=!1);if(x.scrollLines)return this.scrollLines(x.scrollLines),this.cancel(v,!0);if(this._isThirdLevelShift(this.browser,v))return!0;x.cancel&&this.cancel(v,!0);if(!x.key)return!0;this.emit("keydown",v);this.emit("key",x.key,v);this.showCursor();
this.handler(x.key);return this.cancel(v,!0)};B.prototype._isThirdLevelShift=function(v,x){v=v.isMac&&!this.options.macOptionIsMeta&&x.altKey&&!x.ctrlKey&&!x.metaKey||v.isMSWindows&&x.altKey&&x.ctrlKey&&!x.metaKey;return"keypress"===x.type?v:v&&(!x.keyCode||47<x.keyCode)};B.prototype._evaluateKeyEscapeSequence=function(v){var x={cancel:!1,key:void 0,scrollLines:void 0},C=(v.shiftKey?1:0)|(v.altKey?2:0)|(v.ctrlKey?4:0)|(v.metaKey?8:0);switch(v.keyCode){case 0:"UIKeyInputUpArrow"===v.key?x.key=this.applicationCursor?
c.C0.ESC+"OA":c.C0.ESC+"[A":"UIKeyInputLeftArrow"===v.key?x.key=this.applicationCursor?c.C0.ESC+"OD":c.C0.ESC+"[D":"UIKeyInputRightArrow"===v.key?x.key=this.applicationCursor?c.C0.ESC+"OC":c.C0.ESC+"[C":"UIKeyInputDownArrow"===v.key&&(x.key=this.applicationCursor?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:if(v.shiftKey){x.key=c.C0.BS;break}else if(v.altKey){x.key=c.C0.ESC+c.C0.DEL;break}x.key=c.C0.DEL;break;case 9:if(v.shiftKey){x.key=c.C0.ESC+"[Z";break}x.key=c.C0.HT;x.cancel=!0;break;case 13:x.key=
c.C0.CR;x.cancel=!0;break;case 27:x.key=c.C0.ESC;x.cancel=!0;break;case 37:C?(x.key=c.C0.ESC+"[1;"+(C+1)+"D",x.key===c.C0.ESC+"[1;3D"&&(x.key=this.browser.isMac?c.C0.ESC+"b":c.C0.ESC+"[1;5D")):x.key=this.applicationCursor?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:C?(x.key=c.C0.ESC+"[1;"+(C+1)+"C",x.key===c.C0.ESC+"[1;3C"&&(x.key=this.browser.isMac?c.C0.ESC+"f":c.C0.ESC+"[1;5C")):x.key=this.applicationCursor?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:C?(x.key=c.C0.ESC+"[1;"+(C+1)+"A",x.key===c.C0.ESC+
"[1;3A"&&(x.key=c.C0.ESC+"[1;5A")):x.key=this.applicationCursor?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:C?(x.key=c.C0.ESC+"[1;"+(C+1)+"B",x.key===c.C0.ESC+"[1;3B"&&(x.key=c.C0.ESC+"[1;5B")):x.key=this.applicationCursor?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:v.shiftKey||v.ctrlKey||(x.key=c.C0.ESC+"[2~");break;case 46:x.key=C?c.C0.ESC+"[3;"+(C+1)+"~":c.C0.ESC+"[3~";break;case 36:x.key=C?c.C0.ESC+"[1;"+(C+1)+"H":this.applicationCursor?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:x.key=C?c.C0.ESC+"[1;"+
(C+1)+"F":this.applicationCursor?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:v.shiftKey?x.scrollLines=-(this.rows-1):x.key=c.C0.ESC+"[5~";break;case 34:v.shiftKey?x.scrollLines=this.rows-1:x.key=c.C0.ESC+"[6~";break;case 112:x.key=C?c.C0.ESC+"[1;"+(C+1)+"P":c.C0.ESC+"OP";break;case 113:x.key=C?c.C0.ESC+"[1;"+(C+1)+"Q":c.C0.ESC+"OQ";break;case 114:x.key=C?c.C0.ESC+"[1;"+(C+1)+"R":c.C0.ESC+"OR";break;case 115:x.key=C?c.C0.ESC+"[1;"+(C+1)+"S":c.C0.ESC+"OS";break;case 116:x.key=C?c.C0.ESC+"[15;"+(C+1)+
"~":c.C0.ESC+"[15~";break;case 117:x.key=C?c.C0.ESC+"[17;"+(C+1)+"~":c.C0.ESC+"[17~";break;case 118:x.key=C?c.C0.ESC+"[18;"+(C+1)+"~":c.C0.ESC+"[18~";break;case 119:x.key=C?c.C0.ESC+"[19;"+(C+1)+"~":c.C0.ESC+"[19~";break;case 120:x.key=C?c.C0.ESC+"[20;"+(C+1)+"~":c.C0.ESC+"[20~";break;case 121:x.key=C?c.C0.ESC+"[21;"+(C+1)+"~":c.C0.ESC+"[21~";break;case 122:x.key=C?c.C0.ESC+"[23;"+(C+1)+"~":c.C0.ESC+"[23~";break;case 123:x.key=C?c.C0.ESC+"[24;"+(C+1)+"~":c.C0.ESC+"[24~";break;default:!v.ctrlKey||
v.shiftKey||v.altKey||v.metaKey?this.browser.isMac&&!this.options.macOptionIsMeta||!v.altKey||v.ctrlKey||v.metaKey?this.browser.isMac&&!v.altKey&&!v.ctrlKey&&v.metaKey&&65===v.keyCode&&this.selectAll():65<=v.keyCode&&90>=v.keyCode?x.key=c.C0.ESC+String.fromCharCode(v.keyCode+32):192===v.keyCode?x.key=c.C0.ESC+"`":48<=v.keyCode&&57>=v.keyCode&&(x.key=c.C0.ESC+(v.keyCode-48)):65<=v.keyCode&&90>=v.keyCode?x.key=String.fromCharCode(v.keyCode-64):32===v.keyCode?x.key=String.fromCharCode(0):51<=v.keyCode&&
55>=v.keyCode?x.key=String.fromCharCode(v.keyCode-51+27):56===v.keyCode?x.key=String.fromCharCode(127):219===v.keyCode?x.key=String.fromCharCode(27):220===v.keyCode?x.key=String.fromCharCode(28):221===v.keyCode&&(x.key=String.fromCharCode(29))}return x};B.prototype.setgLevel=function(v){this.glevel=v;this.charset=this.charsets[v]};B.prototype.setgCharset=function(v,x){this.charsets[v]=x;this.glevel===v&&(this.charset=x)};B.prototype._keyPress=function(v){if(this.customKeyEventHandler&&!1===this.customKeyEventHandler(v))return!1;
this.cancel(v);if(v.charCode)var x=v.charCode;else if(null==v.which)x=v.keyCode;else if(0!==v.which&&0!==v.charCode)x=v.which;else return!1;if(!x||(v.altKey||v.ctrlKey||v.metaKey)&&!this._isThirdLevelShift(this.browser,v))return!1;x=String.fromCharCode(x);this.emit("keypress",x,v);this.emit("key",x,v);this.showCursor();this.handler(x);return!0};B.prototype.send=function(v){var x=this;this.sendDataQueue||setTimeout(function(){x.handler(x.sendDataQueue);x.sendDataQueue=""},1);this.sendDataQueue+=v};
B.prototype.bell=function(){var v=this;this.emit("bell");this.soundBell()&&this.bellAudioElement.play();this.visualBell()&&(this.element.classList.add("visual-bell-active"),clearTimeout(this.visualBellTimer),this.visualBellTimer=window.setTimeout(function(){v.element.classList.remove("visual-bell-active")},200))};B.prototype.log=function(v,x){this.options.debug&&this.context.console&&this.context.console.log&&this.context.console.log(v,x)};B.prototype.error=function(v,x){this.options.debug&&this.context.console&&
this.context.console.error&&this.context.console.error(v,x)};B.prototype.resize=function(v,x){isNaN(v)||isNaN(x)||(v===this.cols&&x===this.rows?this.charMeasure.width&&this.charMeasure.height||this.charMeasure.measure(this.options):(1>v&&(v=1),1>x&&(x=1),this.buffers.resize(v,x),this.cols=v,this.rows=x,this.buffers.setupTabStops(this.cols),this.charMeasure.measure(this.options),this.refresh(0,this.rows-1),this.emit("resize",{cols:v,rows:x})))};B.prototype.updateRange=function(v){v<this.refreshStart&&
(this.refreshStart=v);v>this.refreshEnd&&(this.refreshEnd=v)};B.prototype.maxRange=function(){this.refreshStart=0;this.refreshEnd=this.rows-1};B.prototype.eraseRight=function(v,x){var C=this.buffer.lines.get(this.buffer.ybase+x);if(C){for(var N=[this.eraseAttr()," ",1,32];v<this.cols;v++)C[v]=N;this.updateRange(x)}};B.prototype.eraseLeft=function(v,x){var C=this.buffer.lines.get(this.buffer.ybase+x);if(C){var N=[this.eraseAttr()," ",1,32];for(v++;v--;)C[v]=N;this.updateRange(x)}};B.prototype.clear=
function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y));this.buffer.lines.length=1;this.buffer.ydisp=0;this.buffer.ybase=0;this.buffer.y=0;for(var v=1;v<this.rows;v++)this.buffer.lines.push(this.blankLine());this.refresh(0,this.rows-1);this.emit("scroll",this.buffer.ydisp)}};B.prototype.eraseLine=function(v){this.eraseRight(0,v)};B.prototype.blankLine=function(v,x,C){v=[v?this.eraseAttr():this.defAttr," ",1,32];var N=
[];x&&(N.isWrapped=x);C=C||this.cols;for(x=0;x<C;x++)N[x]=v;return N};B.prototype.ch=function(v){return v?[this.eraseAttr()," ",1,32]:[this.defAttr," ",1,32]};B.prototype.is=function(v){return 0===(this.options.termName+"").indexOf(v)};B.prototype.handler=function(v){this.options.disableStdin||(this.selectionManager&&this.selectionManager.hasSelection&&this.selectionManager.clearSelection(),this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),this.emit("data",v))};B.prototype.handleTitle=
function(v){this.emit("title",v)};B.prototype.index=function(){this.buffer.y++;this.buffer.y>this.buffer.scrollBottom&&(this.buffer.y--,this.scroll());this.buffer.x>=this.cols&&this.buffer.x--};B.prototype.reverseIndex=function(){this.buffer.y===this.buffer.scrollTop?(this.buffer.lines.shiftElements(this.buffer.y+this.buffer.ybase,this.buffer.scrollBottom-this.buffer.scrollTop,1),this.buffer.lines.set(this.buffer.y+this.buffer.ybase,this.blankLine(!0)),this.updateRange(this.buffer.scrollTop),this.updateRange(this.buffer.scrollBottom)):
this.buffer.y--};B.prototype.reset=function(){this.options.rows=this.rows;this.options.cols=this.cols;var v=this.customKeyEventHandler,x=this.inputHandler;this.setup();this.customKeyEventHandler=v;this.inputHandler=x;this.refresh(0,this.rows-1);this.viewport.syncScrollArea()};B.prototype.tabSet=function(){this.buffer.tabs[this.buffer.x]=!0};B.prototype.cancel=function(v,x){if(this.options.cancelEvents||x)return v.preventDefault(),v.stopPropagation(),!1};B.prototype.matchColor=function(v,x,C){var N=
v<<16|x<<8|C;if(null!=D[N])v=D[N];else{for(var K=Infinity,P=-1,L=0,R,G,H;L<z.length;L++){R=z[L];G=R[0];H=R[1];R=R[2];G=Math.pow(30*(v-G),2)+Math.pow(59*(x-H),2)+Math.pow(11*(C-R),2);if(0===G){P=L;break}G<K&&(K=G,P=L)}v=D[N]=P}return v};B.prototype.visualBell=function(){return!1};B.prototype.soundBell=function(){return"sound"===this.options.bellStyle};B.prototype.syncBellSound=function(){this.element&&(this.soundBell()&&this.bellAudioElement?this.bellAudioElement.setAttribute("src",this.options.bellSound):
this.soundBell()?(this.bellAudioElement=h.createElement("audio"),this.bellAudioElement.setAttribute("preload","auto"),this.bellAudioElement.setAttribute("src",this.options.bellSound),this.helperContainer.appendChild(this.bellAudioElement)):this.bellAudioElement&&this.helperContainer.removeChild(this.bellAudioElement))};return B}(r.EventEmitter);k.Terminal=b;var t=function(E,B,v,x){Array.isArray(E)||(E=[E]);E.forEach(function(C){C.addEventListener(B,v,x||!1)})},z=function(){for(var E=M.DEFAULT_ANSI_COLORS.map(function(x){x=
x.substring(1);return[parseInt(x.substring(0,2),16),parseInt(x.substring(2,4),16),parseInt(x.substring(4,6),16)]}),B=[0,95,135,175,215,255],v=0;216>v;v++)E.push([B[v/36%6|0],B[v/6%6|0],B[v%6]]);for(v=0;24>v;v++)B=8+10*v,E.push([B,B,B]);return E}(),D={}},{"./Buffer":1,"./BufferSet":2,"./CompositionHelper":5,"./EscapeSequences":6,"./EventEmitter":7,"./InputHandler":8,"./Linkifier":9,"./Parser":10,"./SelectionManager":11,"./Viewport":15,"./handlers/Clipboard":17,"./input/MouseZoneManager":18,"./renderer/ColorManager":21,
"./renderer/Renderer":25,"./shared/utils/Browser":30,"./utils/CharMeasure":31,"./utils/MouseHelper":33,"./utils/Sounds":35}],14:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});b=k.LinkHoverEventTypes||(k.LinkHoverEventTypes={});b.HOVER="linkhover";b.TOOLTIP="linktooltip";b.LEAVE="linkleave"},{}],15:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});b=function(){function m(n,d,e,f){var g=this;this.terminal=n;this.viewportElement=d;this.scrollArea=e;this.charMeasure=
f;this.lastRecordedBufferHeight=this.lastRecordedViewportHeight=this.lastRecordedBufferLength=this.currentRowHeight=this.scrollBarWidth=0;this.scrollBarWidth=this.viewportElement.offsetWidth-this.scrollArea.offsetWidth||15;this.viewportElement.addEventListener("scroll",this.onScroll.bind(this));setTimeout(function(){return g.syncScrollArea()},0)}m.prototype.onThemeChanged=function(n){this.viewportElement.style.backgroundColor=n.background};m.prototype.refresh=function(){if(0<this.charMeasure.height){this.currentRowHeight=
this.terminal.renderer.dimensions.scaledCellHeight/window.devicePixelRatio;this.lastRecordedViewportHeight=this.viewportElement.offsetHeight;var n=Math.round(this.currentRowHeight*this.lastRecordedBufferLength)+(this.lastRecordedViewportHeight-this.terminal.renderer.dimensions.canvasHeight);this.lastRecordedBufferHeight!==n&&(this.lastRecordedBufferHeight=n,this.scrollArea.style.height=this.lastRecordedBufferHeight+"px")}};m.prototype.syncScrollArea=function(){this.lastRecordedBufferLength!==this.terminal.buffer.lines.length?
(this.lastRecordedBufferLength=this.terminal.buffer.lines.length,this.refresh()):this.lastRecordedViewportHeight!==this.terminal.renderer.dimensions.canvasHeight?this.refresh():this.terminal.renderer.dimensions.scaledCellHeight/window.devicePixelRatio!==this.currentRowHeight&&this.refresh();var n=this.terminal.buffer.ydisp*this.currentRowHeight;this.viewportElement.scrollTop!==n&&(this.viewportElement.scrollTop=n)};m.prototype.onScroll=function(n){this.viewportElement.offsetParent&&this.terminal.scrollLines(Math.round(this.viewportElement.scrollTop/
this.currentRowHeight)-this.terminal.buffer.ydisp,!0)};m.prototype.onWheel=function(n){if(0!==n.deltaY){var d=1;n.deltaMode===WheelEvent.DOM_DELTA_LINE?d=this.currentRowHeight:n.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(d=this.currentRowHeight*this.terminal.rows);this.viewportElement.scrollTop+=n.deltaY*d;n.preventDefault()}};m.prototype.onTouchStart=function(n){this.lastTouchY=n.touches[0].pageY};m.prototype.onTouchMove=function(n){var d=this.lastTouchY-n.touches[0].pageY;this.lastTouchY=n.touches[0].pageY;
0!==d&&(this.viewportElement.scrollTop+=d,n.preventDefault())};return m}();k.Viewport=b},{}],16:[function(b,r,k){function m(e,f){e=Math.floor(e);for(var g="",c=0;c<e;c++)g+=f;return g}Object.defineProperty(k,"__esModule",{value:!0});var n=b("../EscapeSequences"),d;(function(e){e.Up="A";e.Down="B";e.Right="C";e.Left="D"})(d||(d={}));b=function(){function e(f,g){this._mouseEvent=f;this._terminal=g;this._lines=this._terminal.buffer.lines;this._startCol=this._terminal.buffer.x;this._startRow=this._terminal.buffer.y;
f=this._terminal.mouseHelper.getCoords(this._mouseEvent,this._terminal.element,this._terminal.charMeasure,this._terminal.options.lineHeight,this._terminal.cols,this._terminal.rows,!1).map(function(c){return c-1});this._endCol=f[0];this._endRow=f[1]}e.prototype.move=function(){this._mouseEvent.altKey&&this._terminal.send(this._arrowSequences())};e.prototype._arrowSequences=function(){return this._resetStartingRow()+this._moveToRequestedRow()+this._moveToRequestedCol()};e.prototype._resetStartingRow=
function(){this._wrappedRowsForRow(this._endRow);return 0===this._moveToRequestedRow().length?"":m(this._bufferLine(this._startCol,this._startRow,this._startCol,this._startRow-this._wrappedRowsForRow(this._startRow),!1).length,this._sequence(d.Left))};e.prototype._moveToRequestedRow=function(){var f=this._startRow-this._wrappedRowsForRow(this._startRow),g=this._endRow-this._wrappedRowsForRow(this._endRow);f=Math.abs(f-g)-this._wrappedRowsCount();return m(f,this._sequence(this._verticalDirection()))};
e.prototype._moveToRequestedCol=function(){var f=0<this._moveToRequestedRow().length?this._endRow-this._wrappedRowsForRow(this._endRow):this._startRow;var g=this._endRow,c=this._horizontalDirection();return m(this._bufferLine(this._startCol,f,this._endCol,g,c===d.Right).length,this._sequence(c))};e.prototype._wrappedRowsCount=function(){for(var f=0,g=this._startRow-this._wrappedRowsForRow(this._startRow),c=this._endRow-this._wrappedRowsForRow(this._endRow),l=0;l<Math.abs(g-c);l++){var q=this._verticalDirection()===
d.Up?-1:1;this._lines.get(g+q*l).isWrapped&&f++}return f};e.prototype._wrappedRowsForRow=function(f){for(var g=0,c=this._lines.get(f).isWrapped;c&&0<=f&&f<this._terminal.rows;)g++,f--,c=this._lines.get(f).isWrapped;return g};e.prototype._horizontalDirection=function(){var f=0<this._moveToRequestedRow().length?this._endRow-this._wrappedRowsForRow(this._endRow):this._startRow;return this._startCol<this._endCol&&f<=this._endRow||this._startCol>=this._endCol&&f<this._endRow?d.Right:d.Left};e.prototype._verticalDirection=
function(){return this._startRow>this._endRow?d.Up:d.Down};e.prototype._bufferLine=function(f,g,c,l,q){for(var w=f,u="";w!==c||g!==l;)w+=q?1:-1,q&&w>this._terminal.cols-1?(u+=this._terminal.buffer.translateBufferLineToString(g,!1,f,w),f=w=0,g++):!q&&0>w&&(u+=this._terminal.buffer.translateBufferLineToString(g,!1,0,f+1),f=w=this._terminal.cols-1,g--);return u+this._terminal.buffer.translateBufferLineToString(g,!1,f,w)};e.prototype._sequence=function(f){return n.C0.ESC+(this._terminal.applicationCursor?
"O":"[")+f};return e}();k.AltClickHandler=b},{"../EscapeSequences":6}],17:[function(b,r,k){function m(e,f){return f?e.replace(/\r?\n/g,"\r"):e}function n(e,f){return f?"\u001b[200~"+e+"\u001b[201~":e}function d(e,f){f.style.position="fixed";f.style.width="20px";f.style.height="20px";f.style.left=e.clientX-10+"px";f.style.top=e.clientY-10+"px";f.style.zIndex="1000";f.focus();setTimeout(function(){f.style.position=null;f.style.width=null;f.style.height=null;f.style.left=null;f.style.top=null;f.style.zIndex=
null},200)}Object.defineProperty(k,"__esModule",{value:!0});k.prepareTextForTerminal=m;k.bracketTextForPaste=n;k.copyHandler=function(e,f,g){f.browser.isMSIE?window.clipboardData.setData("Text",g.selectionText):e.clipboardData.setData("text/plain",g.selectionText);e.preventDefault()};k.pasteHandler=function(e,f){e.stopPropagation();var g=function(l){l=m(l,f.browser.isMSWindows);l=n(l,f.bracketedPasteMode);f.handler(l);f.textarea.value="";f.emit("paste",l);f.cancel(e)};if(f.browser.isMSIE){if(window.clipboardData){var c=
window.clipboardData.getData("Text");g(c)}}else e.clipboardData&&(c=e.clipboardData.getData("text/plain"),g(c))};k.moveTextAreaUnderMouseCursor=d;k.rightClickHandler=function(e,f,g,c){d(e,f);c&&!g.isClickInSelection(e)&&g.selectWordAtCursor(e);f.value=g.selectionText;f.select()}},{}],18:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});b=function(){function m(n){var d=this;this._terminal=n;this._zones=[];this._areZonesActive=!1;this._currentZone=this._tooltipTimeout=null;this._lastHoverCoords=
[null,null];this._terminal.element.addEventListener("mousedown",function(e){return d._onMouseDown(e)});this._mouseMoveListener=function(e){return d._onMouseMove(e)};this._clickListener=function(e){return d._onClick(e)}}m.prototype.add=function(n){this._zones.push(n);1===this._zones.length&&this._activate()};m.prototype.clearAll=function(n,d){if(0!==this._zones.length){d||(n=0,d=this._terminal.rows-1);for(var e=0;e<this._zones.length;e++){var f=this._zones[e];f.y>n&&f.y<=d+1&&(this._currentZone&&this._currentZone===
f&&(this._currentZone.leaveCallback(),this._currentZone=null),this._zones.splice(e--,1))}0===this._zones.length&&this._deactivate()}};m.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._terminal.element.addEventListener("mousemove",this._mouseMoveListener),this._terminal.element.addEventListener("click",this._clickListener))};m.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._terminal.element.removeEventListener("mousemove",this._mouseMoveListener),
this._terminal.element.removeEventListener("click",this._clickListener))};m.prototype._onMouseMove=function(n){if(this._lastHoverCoords[0]!==n.pageX||this._lastHoverCoords[1]!==n.pageY)this._onHover(n),this._lastHoverCoords=[n.pageX,n.pageY]};m.prototype._onHover=function(n){var d=this,e=this._findZoneEventAt(n);e!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=null,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),e&&(this._currentZone=e,e.hoverCallback&&
e.hoverCallback(n),this._tooltipTimeout=setTimeout(function(){return d._onTooltip(n)},500)))};m.prototype._onTooltip=function(n){this._tooltipTimeout=null;var d=this._findZoneEventAt(n);d&&d.tooltipCallback&&d.tooltipCallback(n)};m.prototype._onMouseDown=function(n){if(this._areZonesActive){var d=this._findZoneEventAt(n);d&&d.willLinkActivate(n)&&(n.preventDefault(),n.stopImmediatePropagation())}};m.prototype._onClick=function(n){var d=this._findZoneEventAt(n);d&&(d.clickCallback(n),n.preventDefault(),
n.stopImmediatePropagation())};m.prototype._findZoneEventAt=function(n){n=this._terminal.mouseHelper.getCoords(n,this._terminal.screenElement,this._terminal.charMeasure,this._terminal.options.lineHeight,this._terminal.cols,this._terminal.rows);if(!n)return null;for(var d=0;d<this._zones.length;d++){var e=this._zones[d];if(e.y===n[1]&&e.x1<=n[0]&&e.x2>n[0])return e}return null};return m}();k.MouseZoneManager=b;b=function(){return function(m,n,d,e,f,g,c,l){this.x1=m;this.x2=n;this.y=d;this.clickCallback=
e;this.hoverCallback=f;this.tooltipCallback=g;this.leaveCallback=c;this.willLinkActivate=l}}();k.MouseZone=b},{}],19:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});var m=b("./CharAtlas"),n=b("../Buffer");k.INVERTED_DEFAULT_COLOR=-1;b=function(){function d(e,f,g,c,l){this._container=e;this._alpha=c;this._colors=l;this._scaledCharTop=this._scaledCharLeft=this._scaledCellHeight=this._scaledCellWidth=this._scaledCharHeight=this._scaledCharWidth=0;this._canvas=document.createElement("canvas");
this._canvas.classList.add("xterm-"+f+"-layer");this._canvas.style.zIndex=g.toString();this._initCanvas();this._container.appendChild(this._canvas)}d.prototype._initCanvas=function(){this._ctx=this._canvas.getContext("2d",{alpha:this._alpha});this._alpha||this.clearAll()};d.prototype.onOptionsChanged=function(e){};d.prototype.onBlur=function(e){};d.prototype.onFocus=function(e){};d.prototype.onCursorMove=function(e){};d.prototype.onGridChanged=function(e,f,g){};d.prototype.onSelectionChanged=function(e,
f,g){};d.prototype.onThemeChanged=function(e,f){this._refreshCharAtlas(e,f)};d.prototype.setTransparency=function(e,f){if(f!==this._alpha){var g=this._canvas;this._alpha=f;this._canvas=this._canvas.cloneNode();this._initCanvas();this._container.replaceChild(this._canvas,g);this._refreshCharAtlas(e,this._colors);this.onGridChanged(e,0,e.rows-1)}};d.prototype._refreshCharAtlas=function(e,f){var g=this;0>=this._scaledCharWidth&&0>=this._scaledCharHeight||(this._charAtlas=null,e=m.acquireCharAtlas(e,
f,this._scaledCharWidth,this._scaledCharHeight),e instanceof HTMLCanvasElement?this._charAtlas=e:e.then(function(c){return g._charAtlas=c}))};d.prototype.resize=function(e,f,g){this._scaledCellWidth=f.scaledCellWidth;this._scaledCellHeight=f.scaledCellHeight;this._scaledCharWidth=f.scaledCharWidth;this._scaledCharHeight=f.scaledCharHeight;this._scaledCharLeft=f.scaledCharLeft;this._scaledCharTop=f.scaledCharTop;this._canvas.width=f.scaledCanvasWidth;this._canvas.height=f.scaledCanvasHeight;this._canvas.style.width=
f.canvasWidth+"px";this._canvas.style.height=f.canvasHeight+"px";this._alpha||this.clearAll();g&&this._refreshCharAtlas(e,this._colors)};d.prototype.fillCells=function(e,f,g,c){this._ctx.fillRect(e*this._scaledCellWidth,f*this._scaledCellHeight,g*this._scaledCellWidth,c*this._scaledCellHeight)};d.prototype.fillBottomLineAtCells=function(e,f,g){void 0===g&&(g=1);this._ctx.fillRect(e*this._scaledCellWidth,(f+1)*this._scaledCellHeight-window.devicePixelRatio-1,g*this._scaledCellWidth,window.devicePixelRatio)};
d.prototype.fillLeftLineAtCell=function(e,f){this._ctx.fillRect(e*this._scaledCellWidth,f*this._scaledCellHeight,window.devicePixelRatio,this._scaledCellHeight)};d.prototype.strokeRectAtCell=function(e,f,g,c){this._ctx.lineWidth=window.devicePixelRatio;this._ctx.strokeRect(e*this._scaledCellWidth+window.devicePixelRatio/2,f*this._scaledCellHeight+window.devicePixelRatio/2,g*this._scaledCellWidth-window.devicePixelRatio,c*this._scaledCellHeight-window.devicePixelRatio)};d.prototype.clearAll=function(){this._alpha?
this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))};d.prototype.clearCells=function(e,f,g,c){this._alpha?this._ctx.clearRect(e*this._scaledCellWidth,f*this._scaledCellHeight,g*this._scaledCellWidth,c*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background,this._ctx.fillRect(e*this._scaledCellWidth,f*this._scaledCellHeight,g*this._scaledCellWidth,c*this._scaledCellHeight))};
d.prototype.fillCharTrueColor=function(e,f,g,c){this._ctx.font=this._getFont(e,!1);this._ctx.textBaseline="top";this._clipRow(e,c);this._ctx.fillText(f[n.CHAR_DATA_CHAR_INDEX],g*this._scaledCellWidth+this._scaledCharLeft,c*this._scaledCellHeight+this._scaledCharTop)};d.prototype.drawChar=function(e,f,g,c,l,q,w,u,y,A){var F=0;256>w?F=w+2:y&&e.options.enableBold&&(F=1);this._charAtlas&&256>g&&(1<F&&16>w&&(8>w||y)||256<=w)&&256<=u?(f=this._scaledCharWidth+m.CHAR_ATLAS_CELL_SPACING,c=this._scaledCharHeight+
m.CHAR_ATLAS_CELL_SPACING,A&&(this._ctx.globalAlpha=.5),y&&!e.options.enableBold&&1<F&&(F-=8),this._ctx.drawImage(this._charAtlas,g*f,F*c,f,this._scaledCharHeight,l*this._scaledCellWidth+this._scaledCharLeft,q*this._scaledCellHeight+this._scaledCharTop,f,this._scaledCharHeight)):this._drawUncachedChar(e,f,c,w,l,q,y&&e.options.enableBold,A)};d.prototype._drawUncachedChar=function(e,f,g,c,l,q,w,u){this._ctx.save();this._ctx.font=this._getFont(e,w);this._ctx.textBaseline="top";this._ctx.fillStyle=c===
k.INVERTED_DEFAULT_COLOR?this._colors.background:256>c?this._colors.ansi[c]:this._colors.foreground;this._clipRow(e,q);u&&(this._ctx.globalAlpha=.5);this._ctx.fillText(f,l*this._scaledCellWidth+this._scaledCharLeft,q*this._scaledCellHeight+this._scaledCharTop);this._ctx.restore()};d.prototype._clipRow=function(e,f){this._ctx.beginPath();this._ctx.rect(0,f*this._scaledCellHeight,e.cols*this._scaledCellWidth,this._scaledCellHeight);this._ctx.clip()};d.prototype._getFont=function(e,f){return(f?e.options.fontWeightBold:
e.options.fontWeight)+" "+e.options.fontSize*window.devicePixelRatio+"px "+e.options.fontFamily};return d}();k.BaseRenderLayer=b},{"../Buffer":1,"./CharAtlas":20}],20:[function(b,r,k){function m(f,g,c,l){l={foreground:l.foreground,background:l.background,cursor:null,cursorAccent:null,selection:null,ansi:l.ansi.slice(0,16)};return{scaledCharWidth:f,scaledCharHeight:g,fontFamily:c.options.fontFamily,fontSize:c.options.fontSize,fontWeight:c.options.fontWeight,fontWeightBold:c.options.fontWeightBold,
allowTransparency:c.options.allowTransparency,colors:l}}function n(f,g){for(var c=0;c<f.colors.ansi.length;c++)if(f.colors.ansi[c]!==g.colors.ansi[c])return!1;return f.fontFamily===g.fontFamily&&f.fontSize===g.fontSize&&f.fontWeight===g.fontWeight&&f.fontWeightBold===g.fontWeightBold&&f.allowTransparency===g.allowTransparency&&f.scaledCharWidth===g.scaledCharWidth&&f.scaledCharHeight===g.scaledCharHeight&&f.colors.foreground===g.colors.foreground&&f.colors.background===g.colors.background}Object.defineProperty(k,
"__esModule",{value:!0});var d=b("../shared/CharAtlasGenerator");k.CHAR_ATLAS_CELL_SPACING=1;var e=[];k.acquireCharAtlas=function(f,g,c,l){for(var q=m(c,l,f,g),w=0;w<e.length;w++){var u=e[w],y=u.ownedBy.indexOf(f);if(0<=y){if(n(u.config,q))return u.bitmap;1===u.ownedBy.length?e.splice(w,1):u.ownedBy.splice(y,1);break}}for(w=0;w<e.length;w++)if(u=e[w],n(u.config,q))return u.ownedBy.push(f),u.bitmap;f={bitmap:d.generateCharAtlas(window,function(A,F){var I=document.createElement("canvas");I.width=A;
I.height=F;return I},{scaledCharWidth:c,scaledCharHeight:l,fontSize:f.options.fontSize,fontFamily:f.options.fontFamily,fontWeight:f.options.fontWeight,fontWeightBold:f.options.fontWeightBold,background:g.background,foreground:g.foreground,ansiColors:g.ansi,devicePixelRatio:window.devicePixelRatio,allowTransparency:f.options.allowTransparency}),config:q,ownedBy:[f]};e.push(f);return f.bitmap}},{"../shared/CharAtlasGenerator":29}],21:[function(b,r,k){function m(n){n=n.toString(16);return 2>n.length?
"0"+n:n}Object.defineProperty(k,"__esModule",{value:!0});k.DEFAULT_ANSI_COLORS="#2e3436 #cc0000 #4e9a06 #c4a000 #3465a4 #75507b #06989a #d3d7cf #555753 #ef2929 #8ae234 #fce94f #729fcf #ad7fa8 #34e2e2 #eeeeec".split(" ");b=function(){function n(){for(var d=k.DEFAULT_ANSI_COLORS.slice(),e=[0,95,135,175,215,255],f=0;216>f;f++){var g=m(e[f/36%6|0]),c=m(e[f/6%6|0]),l=m(e[f%6]);d.push("#"+g+c+l)}for(f=0;24>f;f++)e=m(8+10*f),d.push("#"+e+e+e);this.colors={foreground:"#ffffff",background:"#000000",cursor:"#ffffff",
cursorAccent:"#000000",selection:"rgba(255, 255, 255, 0.3)",ansi:d}}n.prototype.setTheme=function(d){this.colors.foreground=d.foreground||"#ffffff";this.colors.background=d.background||"#000000";this.colors.cursor=d.cursor||"#ffffff";this.colors.cursorAccent=d.cursorAccent||"#000000";this.colors.selection=d.selection||"rgba(255, 255, 255, 0.3)";this.colors.ansi[0]=d.black||k.DEFAULT_ANSI_COLORS[0];this.colors.ansi[1]=d.red||k.DEFAULT_ANSI_COLORS[1];this.colors.ansi[2]=d.green||k.DEFAULT_ANSI_COLORS[2];
this.colors.ansi[3]=d.yellow||k.DEFAULT_ANSI_COLORS[3];this.colors.ansi[4]=d.blue||k.DEFAULT_ANSI_COLORS[4];this.colors.ansi[5]=d.magenta||k.DEFAULT_ANSI_COLORS[5];this.colors.ansi[6]=d.cyan||k.DEFAULT_ANSI_COLORS[6];this.colors.ansi[7]=d.white||k.DEFAULT_ANSI_COLORS[7];this.colors.ansi[8]=d.brightBlack||k.DEFAULT_ANSI_COLORS[8];this.colors.ansi[9]=d.brightRed||k.DEFAULT_ANSI_COLORS[9];this.colors.ansi[10]=d.brightGreen||k.DEFAULT_ANSI_COLORS[10];this.colors.ansi[11]=d.brightYellow||k.DEFAULT_ANSI_COLORS[11];
this.colors.ansi[12]=d.brightBlue||k.DEFAULT_ANSI_COLORS[12];this.colors.ansi[13]=d.brightMagenta||k.DEFAULT_ANSI_COLORS[13];this.colors.ansi[14]=d.brightCyan||k.DEFAULT_ANSI_COLORS[14];this.colors.ansi[15]=d.brightWhite||k.DEFAULT_ANSI_COLORS[15]};return n}();k.ColorManager=b},{}],22:[function(b,r,k){var m=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var c in g)g.hasOwnProperty(c)&&(f[c]=g[c])};return function(f,
g){function c(){this.constructor=f}e(f,g);f.prototype=null===g?Object.create(g):(c.prototype=g.prototype,new c)}}();Object.defineProperty(k,"__esModule",{value:!0});var n=b("../Buffer");b=function(e){function f(g,c,l){g=e.call(this,g,"cursor",c,!0,l)||this;g._state={x:null,y:null,isFocused:null,style:null,width:null};g._cursorRenderers={bar:g._renderBarCursor.bind(g),block:g._renderBlockCursor.bind(g),underline:g._renderUnderlineCursor.bind(g)};return g}m(f,e);f.prototype.resize=function(g,c,l){e.prototype.resize.call(this,
g,c,l);this._state={x:null,y:null,isFocused:null,style:null,width:null}};f.prototype.reset=function(g){this._clearCursor();this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=null,this.onOptionsChanged(g))};f.prototype.onBlur=function(g){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause();g.refresh(g.buffer.y,g.buffer.y)};f.prototype.onFocus=function(g){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume(g):g.refresh(g.buffer.y,
g.buffer.y)};f.prototype.onOptionsChanged=function(g){var c=this;g.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new d(g,function(){c._render(g,!0)})):(this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=null),g.refresh(g.buffer.y,g.buffer.y))};f.prototype.onCursorMove=function(g){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation(g)};f.prototype.onGridChanged=function(g,c,l){!this._cursorBlinkStateManager||
this._cursorBlinkStateManager.isPaused?this._render(g,!1):this._cursorBlinkStateManager.restartBlinkAnimation(g)};f.prototype._render=function(g,c){if(!g.cursorState||g.cursorHidden)this._clearCursor();else{var l=g.buffer.ybase+g.buffer.y;c=l-g.buffer.ydisp;if(0>c||c>=g.rows)this._clearCursor();else if(l=g.buffer.lines.get(l)[g.buffer.x])if(g.isFocused)if(this._cursorBlinkStateManager&&!this._cursorBlinkStateManager.isCursorVisible)this._clearCursor();else{if(this._state){if(this._state.x===g.buffer.x&&
this._state.y===c&&this._state.isFocused===g.isFocused&&this._state.style===g.options.cursorStyle&&this._state.width===l[n.CHAR_DATA_WIDTH_INDEX])return;this._clearCursor()}this._ctx.save();this._cursorRenderers[g.options.cursorStyle||"block"](g,g.buffer.x,c,l);this._ctx.restore();this._state.x=g.buffer.x;this._state.y=c;this._state.isFocused=!1;this._state.style=g.options.cursorStyle;this._state.width=l[n.CHAR_DATA_WIDTH_INDEX]}else this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor,
this._renderBlurCursor(g,g.buffer.x,c,l),this._ctx.restore(),this._state.x=g.buffer.x,this._state.y=c,this._state.isFocused=!1,this._state.style=g.options.cursorStyle,this._state.width=l[n.CHAR_DATA_WIDTH_INDEX]}};f.prototype._clearCursor=function(){this._state&&(this.clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:null,y:null,isFocused:null,style:null,width:null})};f.prototype._renderBarCursor=function(g,c,l,q){this._ctx.save();this._ctx.fillStyle=this._colors.cursor;this.fillLeftLineAtCell(c,
l);this._ctx.restore()};f.prototype._renderBlockCursor=function(g,c,l,q){this._ctx.save();this._ctx.fillStyle=this._colors.cursor;this.fillCells(c,l,q[n.CHAR_DATA_WIDTH_INDEX],1);this._ctx.fillStyle=this._colors.cursorAccent;this.fillCharTrueColor(g,q,c,l);this._ctx.restore()};f.prototype._renderUnderlineCursor=function(g,c,l,q){this._ctx.save();this._ctx.fillStyle=this._colors.cursor;this.fillBottomLineAtCells(c,l);this._ctx.restore()};f.prototype._renderBlurCursor=function(g,c,l,q){this._ctx.save();
this._ctx.strokeStyle=this._colors.cursor;this.strokeRectAtCell(c,l,q[n.CHAR_DATA_WIDTH_INDEX],1);this._ctx.restore()};return f}(b("./BaseRenderLayer").BaseRenderLayer);k.CursorRenderLayer=b;var d=function(){function e(f,g){this.renderCallback=g;this.isCursorVisible=!0;f.isFocused&&this._restartInterval()}Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!0,configurable:!0});e.prototype.dispose=function(){this._blinkInterval&&
(window.clearInterval(this._blinkInterval),this._blinkInterval=null);this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=null);this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=null)};e.prototype.restartBlinkAnimation=function(f){var g=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){g.renderCallback();
g._animationFrame=null})))};e.prototype._restartInterval=function(f){var g=this;void 0===f&&(f=600);this._blinkInterval&&window.clearInterval(this._blinkInterval);this._blinkStartTimeout=setTimeout(function(){if(g._animationTimeRestarted){var c=600-(Date.now()-g._animationTimeRestarted);g._animationTimeRestarted=null;if(0<c){g._restartInterval(c);return}}g.isCursorVisible=!1;g._animationFrame=window.requestAnimationFrame(function(){g.renderCallback();g._animationFrame=null});g._blinkInterval=setInterval(function(){if(g._animationTimeRestarted){var l=
600-(Date.now()-g._animationTimeRestarted);g._animationTimeRestarted=null;g._restartInterval(l)}else g.isCursorVisible=!g.isCursorVisible,g._animationFrame=window.requestAnimationFrame(function(){g.renderCallback();g._animationFrame=null})},600)},f)};e.prototype.pause=function(){this.isCursorVisible=!0;this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=null);this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=null);this._animationFrame&&
(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=null)};e.prototype.resume=function(f){this._animationTimeRestarted=null;this._restartInterval();this.restartBlinkAnimation(f)};return e}()},{"../Buffer":1,"./BaseRenderLayer":19}],23:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});b=function(){function m(){this.cache=[]}m.prototype.resize=function(n,d){for(var e=0;e<n;e++){this.cache.length<=e&&this.cache.push([]);for(var f=this.cache[e].length;f<d;f++)this.cache[e].push(null);
this.cache[e].length=d}this.cache.length=n};m.prototype.clear=function(){for(var n=0;n<this.cache.length;n++)for(var d=0;d<this.cache[n].length;d++)this.cache[n][d]=null};return m}();k.GridCache=b},{}],24:[function(b,r,k){var m=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,f){e.__proto__=f}||function(e,f){for(var g in f)f.hasOwnProperty(g)&&(e[g]=f[g])};return function(e,f){function g(){this.constructor=e}d(e,f);e.prototype=null===f?Object.create(f):
(g.prototype=f.prototype,new g)}}();Object.defineProperty(k,"__esModule",{value:!0});var n=b("../Types");b=function(d){function e(f,g,c,l){var q=d.call(this,f,"link",g,!0,c)||this;q._state=null;l.linkifier.on(n.LinkHoverEventTypes.HOVER,function(w){return q._onLinkHover(w)});l.linkifier.on(n.LinkHoverEventTypes.LEAVE,function(w){return q._onLinkLeave(w)});return q}m(e,d);e.prototype.resize=function(f,g,c){d.prototype.resize.call(this,f,g,c);this._state=null};e.prototype.reset=function(f){this._clearCurrentLink()};
e.prototype._clearCurrentLink=function(){this._state&&(this.clearCells(this._state.x,this._state.y,this._state.length,1),this._state=null)};e.prototype._onLinkHover=function(f){this._ctx.fillStyle=this._colors.foreground;this.fillBottomLineAtCells(f.x,f.y,f.length);this._state=f};e.prototype._onLinkLeave=function(f){this._clearCurrentLink()};return e}(b("./BaseRenderLayer").BaseRenderLayer);k.LinkRenderLayer=b},{"../Types":14,"./BaseRenderLayer":19}],25:[function(b,r,k){var m=this&&this.__extends||
function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,w){q.__proto__=w}||function(q,w){for(var u in w)w.hasOwnProperty(u)&&(q[u]=w[u])};return function(q,w){function u(){this.constructor=q}l(q,w);q.prototype=null===w?Object.create(w):(u.prototype=w.prototype,new u)}}();Object.defineProperty(k,"__esModule",{value:!0});var n=b("./TextRenderLayer"),d=b("./SelectionRenderLayer"),e=b("./CursorRenderLayer"),f=b("./ColorManager"),g=b("./LinkRenderLayer");r=b("../EventEmitter");
var c=b("../utils/ScreenDprMonitor");b=function(l){function q(w,u){var y=l.call(this)||this;y._terminal=w;y._refreshRowsQueue=[];y._refreshAnimationFrame=null;y._isPaused=!1;y._needsFullRefresh=!1;y.colorManager=new f.ColorManager;u&&y.colorManager.setTheme(u);y._renderLayers=[new n.TextRenderLayer(y._terminal.screenElement,0,y.colorManager.colors,y._terminal.options.allowTransparency),new d.SelectionRenderLayer(y._terminal.screenElement,1,y.colorManager.colors),new g.LinkRenderLayer(y._terminal.screenElement,
2,y.colorManager.colors,y._terminal),new e.CursorRenderLayer(y._terminal.screenElement,3,y.colorManager.colors)];y.dimensions={scaledCharWidth:null,scaledCharHeight:null,scaledCellWidth:null,scaledCellHeight:null,scaledCharLeft:null,scaledCharTop:null,scaledCanvasWidth:null,scaledCanvasHeight:null,canvasWidth:null,canvasHeight:null,actualCellWidth:null,actualCellHeight:null};y._devicePixelRatio=window.devicePixelRatio;y._updateDimensions();y.onOptionsChanged();y._screenDprMonitor=new c.ScreenDprMonitor;
y._screenDprMonitor.setListener(function(){return y.onWindowResize(window.devicePixelRatio)});"IntersectionObserver"in window&&(new IntersectionObserver(function(A){return y.onIntersectionChange(A[0])},{threshold:0})).observe(y._terminal.element);return y}m(q,l);q.prototype.onIntersectionChange=function(w){this._isPaused=0===w.intersectionRatio;!this._isPaused&&this._needsFullRefresh&&this._terminal.refresh(0,this._terminal.rows-1)};q.prototype.onWindowResize=function(w){this._devicePixelRatio!==
w&&(this._devicePixelRatio=w,this.onResize(this._terminal.cols,this._terminal.rows,!0))};q.prototype.setTheme=function(w){var u=this;this.colorManager.setTheme(w);this._renderLayers.forEach(function(y){y.onThemeChanged(u._terminal,u.colorManager.colors);y.reset(u._terminal)});this._isPaused?this._needsFullRefresh=!0:this._terminal.refresh(0,this._terminal.rows-1);return this.colorManager.colors};q.prototype.onResize=function(w,u,y){var A=this;this._updateDimensions();this._renderLayers.forEach(function(F){return F.resize(A._terminal,
A.dimensions,y)});this._isPaused?this._needsFullRefresh=!0:this._terminal.refresh(0,this._terminal.rows-1);this._terminal.screenElement.style.width=this.dimensions.canvasWidth+this._terminal.viewport.scrollBarWidth+"px";this._terminal.screenElement.style.height=window.innerHeight+"px";this.emit("resize",{width:this.dimensions.canvasWidth,height:this.dimensions.canvasHeight})};q.prototype.onCharSizeChanged=function(){this.onResize(this._terminal.cols,this._terminal.rows,!0)};q.prototype.onBlur=function(){var w=
this;this._runOperation(function(u){return u.onBlur(w._terminal)})};q.prototype.onFocus=function(){var w=this;this._runOperation(function(u){return u.onFocus(w._terminal)})};q.prototype.onSelectionChanged=function(w,u){var y=this;this._runOperation(function(A){return A.onSelectionChanged(y._terminal,w,u)})};q.prototype.onCursorMove=function(){var w=this;this._runOperation(function(u){return u.onCursorMove(w._terminal)})};q.prototype.onOptionsChanged=function(){var w=this;this._runOperation(function(u){return u.onOptionsChanged(w._terminal)})};
q.prototype.clear=function(){var w=this;this._runOperation(function(u){return u.reset(w._terminal)})};q.prototype._runOperation=function(w){this._isPaused?this._needsFullRefresh=!0:this._renderLayers.forEach(function(u){return w(u)})};q.prototype.queueRefresh=function(w,u){this._isPaused?this._needsFullRefresh=!0:(this._refreshRowsQueue.push({start:w,end:u}),this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(this._refreshLoop.bind(this))))};q.prototype._refreshLoop=
function(){var w=this;if(4<this._refreshRowsQueue.length){var u=0;var y=this._terminal.rows-1}else{u=this._refreshRowsQueue[0].start;y=this._refreshRowsQueue[0].end;for(var A=1;A<this._refreshRowsQueue.length;A++)this._refreshRowsQueue[A].start<u&&(u=this._refreshRowsQueue[A].start),this._refreshRowsQueue[A].end>y&&(y=this._refreshRowsQueue[A].end)}this._refreshRowsQueue=[];this._refreshAnimationFrame=null;u=Math.max(u,0);y=Math.min(y,this._terminal.rows-1);this._renderLayers.forEach(function(F){return F.onGridChanged(w._terminal,
u,y)});this._terminal.emit("refresh",{start:u,end:y})};q.prototype._updateDimensions=function(){this._terminal.charMeasure.width&&this._terminal.charMeasure.height&&(this.dimensions.scaledCharWidth=Math.floor(this._terminal.charMeasure.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._terminal.charMeasure.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._terminal.options.lineHeight),this.dimensions.scaledCharTop=
1===this._terminal.options.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._terminal.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._terminal.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._terminal.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._terminal.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=
Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._terminal.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._terminal.cols)};return q}(r.EventEmitter);k.Renderer=b},{"../EventEmitter":7,"../utils/ScreenDprMonitor":34,"./ColorManager":21,"./CursorRenderLayer":22,"./LinkRenderLayer":24,"./SelectionRenderLayer":26,
"./TextRenderLayer":27}],26:[function(b,r,k){var m=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,e){d.__proto__=e}||function(d,e){for(var f in e)e.hasOwnProperty(f)&&(d[f]=e[f])};return function(d,e){function f(){this.constructor=d}n(d,e);d.prototype=null===e?Object.create(e):(f.prototype=e.prototype,new f)}}();Object.defineProperty(k,"__esModule",{value:!0});b=function(n){function d(e,f,g){e=n.call(this,e,"selection",f,!0,g)||this;e._state=
{start:null,end:null};return e}m(d,n);d.prototype.resize=function(e,f,g){n.prototype.resize.call(this,e,f,g);this._state={start:null,end:null}};d.prototype.reset=function(e){this._state.start&&this._state.end&&(this._state={start:null,end:null},this.clearAll())};d.prototype.onSelectionChanged=function(e,f,g){if(this._state.start!==f&&this._state.end!==g&&(this.clearAll(),f&&g)){var c=f[1]-e.buffer.ydisp,l=g[1]-e.buffer.ydisp,q=Math.max(c,0),w=Math.min(l,e.rows-1);if(!(q>=e.rows||0>w)){c=c===q?f[0]:
0;var u=q===w?g[0]:e.cols;this._ctx.fillStyle=this._colors.selection;this.fillCells(c,q,u-c,1);this.fillCells(0,q+1,e.cols,Math.max(w-q-1,0));q!==w&&this.fillCells(0,w,l===w?g[0]:e.cols,1);this._state.start=[f[0],f[1]];this._state.end=[g[0],g[1]]}}};return d}(b("./BaseRenderLayer").BaseRenderLayer);k.SelectionRenderLayer=b},{"./BaseRenderLayer":19}],27:[function(b,r,k){var m=this&&this.__extends||function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,l){c.__proto__=l}||
function(c,l){for(var q in l)l.hasOwnProperty(q)&&(c[q]=l[q])};return function(c,l){function q(){this.constructor=c}g(c,l);c.prototype=null===l?Object.create(l):(q.prototype=l.prototype,new q)}}();Object.defineProperty(k,"__esModule",{value:!0});var n=b("../Buffer"),d=b("./Types"),e=b("./GridCache"),f=b("./BaseRenderLayer");b=function(g){function c(l,q,w,u){l=g.call(this,l,"text",q,u,w)||this;l._characterOverlapCache={};l._state=new e.GridCache;return l}m(c,g);c.prototype.resize=function(l,q,w){g.prototype.resize.call(this,
l,q,w);w=this._getFont(l,!1);if(this._characterWidth!==q.scaledCharWidth||this._characterFont!==w)this._characterWidth=q.scaledCharWidth,this._characterFont=w,this._characterOverlapCache={};this._state.clear();this._state.resize(l.cols,l.rows)};c.prototype.reset=function(l){this._state.clear();this.clearAll()};c.prototype.onGridChanged=function(l,q,w){if(0!==this._state.cache.length)for(;q<=w;q++){var u=l.buffer.lines.get(q+l.buffer.ydisp);this.clearCells(0,q,l.cols,1);for(var y=0;y<l.cols;y++){var A=
u[y],F=A[n.CHAR_DATA_CODE_INDEX],I=A[n.CHAR_DATA_CHAR_INDEX],J=A[n.CHAR_DATA_ATTR_INDEX],M=A[n.CHAR_DATA_WIDTH_INDEX];if(0!==M&&!(32===F&&0<y&&this._isOverlapping(u[y-1]))){var O=J>>18,h=J&511,p=256<=h,t=O&d.FLAGS.INVISIBLE,z=O&d.FLAGS.INVERSE;!F||32===F&&p&&!z||t||(0!==M&&this._isOverlapping(A)&&y<u.length-1&&32===u[y+1][n.CHAR_DATA_CODE_INDEX]&&(M=2),A=J>>9&511,z&&(z=h,h=A,A=z,256===A&&(A=f.INVERTED_DEFAULT_COLOR),257===h&&(h=f.INVERTED_DEFAULT_COLOR)),256>h&&(this._ctx.save(),this._ctx.fillStyle=
h===f.INVERTED_DEFAULT_COLOR?this._colors.foreground:this._colors.ansi[h],this.fillCells(y,q,M,1),this._ctx.restore()),this._ctx.save(),O&d.FLAGS.BOLD&&(this._ctx.font=this._getFont(l,!0),8>A&&(A+=8)),O&d.FLAGS.UNDERLINE&&(this._ctx.fillStyle=A===f.INVERTED_DEFAULT_COLOR?this._colors.background:256>A?this._colors.ansi[A]:this._colors.foreground,this.fillBottomLineAtCells(y,q)),this.drawChar(l,I,F,M,y,q,A,h,!!(O&d.FLAGS.BOLD),!!(O&d.FLAGS.DIM)),this._ctx.restore())}}}};c.prototype.onOptionsChanged=
function(l){this.setTransparency(l,l.options.allowTransparency)};c.prototype._isOverlapping=function(l){if(1!==l[n.CHAR_DATA_WIDTH_INDEX]||256>l[n.CHAR_DATA_CODE_INDEX])return!1;l=l[n.CHAR_DATA_CHAR_INDEX];if(this._characterOverlapCache.hasOwnProperty(l))return this._characterOverlapCache[l];this._ctx.save();this._ctx.font=this._characterFont;var q=Math.floor(this._ctx.measureText(l).width)>this._characterWidth;this._ctx.restore();return this._characterOverlapCache[l]=q};c.prototype._clearChar=function(l,
q){var w=1,u=this._state.cache[l][q];u&&2===u[n.CHAR_DATA_WIDTH_INDEX]&&(w=2);this.clearCells(l,q,w,1)};return c}(f.BaseRenderLayer);k.TextRenderLayer=b},{"../Buffer":1,"./BaseRenderLayer":19,"./GridCache":23,"./Types":28}],28:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});b=k.FLAGS||(k.FLAGS={});b[b.BOLD=1]="BOLD";b[b.UNDERLINE=2]="UNDERLINE";b[b.BLINK=4]="BLINK";b[b.INVERSE=8]="INVERSE";b[b.INVISIBLE=16]="INVISIBLE";b[b.DIM=32]="DIM"},{}],29:[function(b,r,k){function m(e,f,g,
c){for(var l=0;l<e.data.length;l+=4)e.data[l]===f&&e.data[l+1]===g&&e.data[l+2]===c&&(e.data[l+3]=0)}function n(e,f){return e+" "+f.fontSize*f.devicePixelRatio+"px "+f.fontFamily}Object.defineProperty(k,"__esModule",{value:!0});var d=b("./utils/Browser");k.CHAR_ATLAS_CELL_SPACING=1;k.generateCharAtlas=function(e,f,g){var c=g.scaledCharWidth+k.CHAR_ATLAS_CELL_SPACING,l=g.scaledCharHeight+k.CHAR_ATLAS_CELL_SPACING,q=f(255*c,18*l);f=q.getContext("2d",{alpha:g.allowTransparency});f.fillStyle=g.background;
f.fillRect(0,0,q.width,q.height);f.save();f.fillStyle=g.foreground;f.font=n(g.fontWeight,g);f.textBaseline="top";for(var w=0;256>w;w++)f.save(),f.beginPath(),f.rect(w*c,0,c,l),f.clip(),f.fillText(String.fromCharCode(w),w*c,0),f.restore();f.save();f.font=n(g.fontWeightBold,g);for(w=0;256>w;w++)f.save(),f.beginPath(),f.rect(w*c,l,c,l),f.clip(),f.fillText(String.fromCharCode(w),w*c,l),f.restore();f.restore();f.font=n(g.fontWeight,g);for(var u=0;16>u;u++){8===u&&(f.font=n(g.fontWeightBold,g));var y=(u+
2)*l;for(w=0;256>w;w++)f.save(),f.beginPath(),f.rect(w*c,y,c,l),f.clip(),f.fillStyle=g.ansiColors[u],f.fillText(String.fromCharCode(w),w*c,y),f.restore()}f.restore();if(!("createImageBitmap"in e)||d.isFirefox)return q instanceof HTMLCanvasElement?q:new Promise(function(A){return A(q.transferToImageBitmap())});c=f.getImageData(0,0,q.width,q.height);l=parseInt(g.background.substr(1,2),16);f=parseInt(g.background.substr(3,2),16);g=parseInt(g.background.substr(5,2),16);m(c,l,f,g);return e.createImageBitmap(c)}},
{"./utils/Browser":30}],30:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});r=(b="undefined"===typeof navigator?!0:!1)?"node":navigator.userAgent;b=b?"node":navigator.platform;k.isFirefox=!!~r.indexOf("Firefox");k.isMSIE=!!~r.indexOf("MSIE")||!!~r.indexOf("Trident");r=0<=["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(b);k.isMac=r;k.isIpad="iPad"===b;k.isIphone="iPhone"===b;r=0<=["Windows","Win16","Win32","WinCE"].indexOf(b);k.isMSWindows=r;k.isLinux=0<=b.indexOf("Linux")},{}],
31:[function(b,r,k){var m=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,e){d.__proto__=e}||function(d,e){for(var f in e)e.hasOwnProperty(f)&&(d[f]=e[f])};return function(d,e){function f(){this.constructor=d}n(d,e);d.prototype=null===e?Object.create(e):(f.prototype=e.prototype,new f)}}();Object.defineProperty(k,"__esModule",{value:!0});b=function(n){function d(e,f){var g=n.call(this)||this;g._document=e;g._parentElement=f;g._measureElement=
g._document.createElement("span");g._measureElement.style.position="absolute";g._measureElement.style.top="0";g._measureElement.style.left="-9999em";g._measureElement.style.lineHeight="normal";g._measureElement.textContent="W";g._measureElement.setAttribute("aria-hidden","true");g._parentElement.appendChild(g._measureElement);return g}m(d,n);Object.defineProperty(d.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"height",{get:function(){return this._height},
enumerable:!0,configurable:!0});d.prototype.measure=function(e){this._measureElement.style.fontFamily=e.fontFamily;this._measureElement.style.fontSize=e.fontSize+"px";e=this._measureElement.getBoundingClientRect();0===e.width||0===e.height||this._width===e.width&&this._height===e.height||(this._width=e.width,this._height=Math.ceil(e.height),this.emit("charsizechanged"))};return d}(b("../EventEmitter").EventEmitter);k.CharMeasure=b},{"../EventEmitter":7}],32:[function(b,r,k){var m=this&&this.__extends||
function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,e){d.__proto__=e}||function(d,e){for(var f in e)e.hasOwnProperty(f)&&(d[f]=e[f])};return function(d,e){function f(){this.constructor=d}n(d,e);d.prototype=null===e?Object.create(e):(f.prototype=e.prototype,new f)}}();Object.defineProperty(k,"__esModule",{value:!0});b=function(n){function d(e){var f=n.call(this)||this;f._maxLength=e;f._array=Array(f._maxLength);f._startIndex=0;f._length=0;return f}m(d,n);Object.defineProperty(d.prototype,
"maxLength",{get:function(){return this._maxLength},set:function(e){if(this._maxLength!==e){for(var f=Array(e),g=0;g<Math.min(e,this.length);g++)f[g]=this._array[this._getCyclicIndex(g)];this._array=f;this._maxLength=e;this._startIndex=0}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"length",{get:function(){return this._length},set:function(e){if(e>this._length)for(var f=this._length;f<e;f++)this._array[f]=void 0;this._length=e},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"forEach",{get:function(){var e=this;return function(f){for(var g=e.length,c=0;c<g;c++)f(e.get(c),c)}},enumerable:!0,configurable:!0});d.prototype.get=function(e){return this._array[this._getCyclicIndex(e)]};d.prototype.set=function(e,f){this._array[this._getCyclicIndex(e)]=f};d.prototype.push=function(e){this._array[this._getCyclicIndex(this._length)]=e;this._length===this._maxLength?(this._startIndex++,this._startIndex===this._maxLength&&(this._startIndex=0),this.emit("trim",1)):this._length++};
d.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length-- -1)]};d.prototype.splice=function(e,f){for(var g=[],c=2;c<arguments.length;c++)g[c-2]=arguments[c];if(f){for(c=e;c<this._length-f;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+f)];this._length-=f}if(g&&g.length){for(c=this._length-1;c>=e;c--)this._array[this._getCyclicIndex(c+g.length)]=this._array[this._getCyclicIndex(c)];for(c=0;c<g.length;c++)this._array[this._getCyclicIndex(e+c)]=g[c];
this._length+g.length>this.maxLength?(g=this._length+g.length-this.maxLength,this._startIndex+=g,this._length=this.maxLength,this.emit("trim",g)):this._length+=g.length}};d.prototype.trimStart=function(e){e>this._length&&(e=this._length);this._startIndex+=e;this._length-=e;this.emit("trim",e)};d.prototype.shiftElements=function(e,f,g){if(!(0>=f)){if(0>e||e>=this._length)throw Error("start argument out of range");if(0>e+g)throw Error("Cannot shift elements in list beyond index 0");if(0<g){for(var c=
f-1;0<=c;c--)this.set(e+c+g,this.get(e+c));e=e+f+g-this._length;if(0<e)for(this._length+=e;this._length>this.maxLength;)this._length--,this._startIndex++,this.emit("trim",1)}else for(c=0;c<f;c++)this.set(e+c+g,this.get(e+c))}};d.prototype._getCyclicIndex=function(e){return(this._startIndex+e)%this.maxLength};return d}(b("../EventEmitter").EventEmitter);k.CircularList=b},{"../EventEmitter":7}],33:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});b=function(){function m(n){this._renderer=
n}m.getCoordsRelativeToElement=function(n,d){if(null==n.pageX)return null;var e=d,f=n.pageX;for(n=n.pageY;d;)f-=d.offsetLeft,n-=d.offsetTop,d=d.offsetParent;for(d=e;d&&d!==d.ownerDocument.body;)f+=d.scrollLeft,n+=d.scrollTop,d=d.parentElement;return[f,n]};m.prototype.getCoords=function(n,d,e,f,g,c,l){if(!e.width||!e.height)return null;n=m.getCoordsRelativeToElement(n,d);if(!n)return null;n[0]=Math.ceil((n[0]+(l?this._renderer.dimensions.actualCellWidth/2:0))/this._renderer.dimensions.actualCellWidth);
n[1]=Math.ceil(n[1]/this._renderer.dimensions.actualCellHeight);n[0]=Math.min(Math.max(n[0],1),g+(l?1:0));n[1]=Math.min(Math.max(n[1],1),c);return n};m.prototype.getRawByteCoords=function(n,d,e,f,g,c){n=this.getCoords(n,d,e,f,g,c);return{x:n[0]+32,y:n[1]+32}};return m}();k.MouseHelper=b},{}],34:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});b=function(){function m(){}m.prototype.setListener=function(n){var d=this;this._listener&&this.clearListener();this._listener=n;this._outerListener=
function(){d._listener(window.devicePixelRatio,d._currentDevicePixelRatio);d._updateDpr()};this._updateDpr()};m.prototype._updateDpr=function(){this._resolutionMediaMatchList&&this._resolutionMediaMatchList.removeListener(this._outerListener);this._currentDevicePixelRatio=window.devicePixelRatio;this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)");this._resolutionMediaMatchList.addListener(this._outerListener)};m.prototype.clearListener=function(){this._listener&&
(this._resolutionMediaMatchList.removeListener(this._outerListener),this._outerListener=this._listener=null)};return m}();k.ScreenDprMonitor=b},{}],35:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});k.BELL_SOUND="data:audio/wav;base64,UklGRigBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQBAADpAFgCwAMlBZoG/wdmCcoKRAypDQ8PbRDBEQQTOxRtFYcWlBePGIUZXhoiG88bcBz7HHIdzh0WHlMeZx51HmkeUx4WHs8dah0AHXwc3hs9G4saxRnyGBIYGBcQFv8U4RPAEoYRQBACD70NWwwHC6gJOwjWBloF7gOBAhABkf8b/qv8R/ve+Xf4Ife79W/0JfPZ8Z/wde9N7ijtE+wU6xvqM+lb6H7nw+YX5mrlxuQz5Mzje+Ma49fioeKD4nXiYeJy4pHitOL04j/jn+MN5IPkFOWs5U3mDefM55/ogOl36m7rdOyE7abuyu8D8Unyj/Pg9D/2qfcb+Yn6/vuK/Qj/lAAlAg=="},
{}],36:[function(b,r,k){Object.defineProperty(k,"__esModule",{value:!0});b=b("./Terminal");r.exports=b.Terminal},{"./Terminal":13}]},{},[36])(36)});
(function(a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define([],a):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).fit=a()})(function(){return function m(b,r,k){function n(f,g){if(!r[f]){if(!b[f]){var c="function"==typeof require&&require;if(!g&&c)return c(f,!0);if(d)return d(f,!0);g=Error("Cannot find module '"+f+"'");throw g.code="MODULE_NOT_FOUND",g;}g=r[f]={exports:{}};
b[f][0].call(g.exports,function(l){var q=b[f][1][l];return n(q?q:l)},g,g.exports,m,b,r,k)}return r[f].exports}for(var d="function"==typeof require&&require,e=0;e<k.length;e++)n(k[e]);return n}({1:[function(b,r,k){function m(d){if(!d.element.parentElement)return null;var e=window.getComputedStyle(d.element.parentElement),f=parseInt(e.getPropertyValue("height"));e=Math.max(0,parseInt(e.getPropertyValue("width")));var g=window.getComputedStyle(d.element),c=parseInt(g.getPropertyValue("padding-top")),
l=parseInt(g.getPropertyValue("padding-bottom")),q=parseInt(g.getPropertyValue("padding-right"));g=parseInt(g.getPropertyValue("padding-left"));return{cols:Math.floor((e-(q+g)-d.viewport.scrollBarWidth)/d.renderer.dimensions.actualCellWidth),rows:Math.floor((f-(c+l))/d.renderer.dimensions.actualCellHeight)}}function n(d){d.screenElement.style.height=window.innerHeight;var e=m(d);e&&(d.resize(e.cols,e.rows),document.getElementById("termCols").value=e.cols,document.getElementById("termRows").value=
e.rows,transport.auth.mod_pty("window-change",d.cols,d.rows))}Object.defineProperty(k,"__esModule",{value:!0});k.proposeGeometry=m;k.fit=n;k.apply=function(d){d.prototype.proposeGeometry=function(){return m(this)};d.prototype.fit=function(){n(this)}}},{}]},{},[1])(1)});SSHyClient.auth=function(a){this.parceler=a;this.authenticated=null;this.awaitingAuthentication=!1;this.hostname=wsproxyURL?wsproxyURL.split("/")[2].split(":")[0]:"";this.termUsername="";this.termPassword=void 0;this.failedAttempts=0;this.channelOpened=!1};
SSHyClient.auth.prototype={request_auth:function(){var a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_SERVICE_REQUEST));a.add_string("ssh-userauth");this.parceler.send(a)},ssh_connection:function(){if(this.termUsername&&this.termPassword){var a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_USERAUTH_REQUEST));a.add_string(this.termUsername);a.add_string("ssh-connection");a.add_string("password");a.add_boolean(!1);a.add_string(this.termPassword);this.awaitingAuthentication=
!0;this.parceler.send(a)}else term||startxtermjs()},auth_success:function(a){a&&(document.title=this.termUsername+"@"+this.hostname,this.termUsername="",this.termPassword=void 0,term||startxtermjs(),transport.settings.setKeepAlive(240),document.getElementById("keepAlive").value=240,this.open_channel("session"))},open_channel:function(a,b){b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_OPEN));b.add_string(a);b.add_int(1);b.add_int(SSHyClient.WINDOW_SIZE);b.add_int(SSHyClient.MAX_PACKET_SIZE);
this.parceler.send(b)},mod_pty:function(a,b,r,k){if(this.channelOpened){var m=new SSHyClient.Message;m.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_REQUEST));m.add_int(0);m.add_string(a);m.add_boolean(!1);k&&m.add_string(k);m.add_int(b);m.add_int(r);m.add_int(0);m.add_int(0);k&&m.add_string("");this.parceler.send(m);k&&this.invoke_shell()}},invoke_shell:function(){var a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_REQUEST));a.add_int(0);a.add_string("shell");
a.add_boolean(!1);this.parceler.send(a);void 0===this.termPassword?term.write("\n\r"):startxtermjs()},authFailure:function(){term?(term.write("Access Denied\r\n"),5<=++this.failedAttempts?(term.write("Too many failed authentication attempts"),transport.disconnect()):(term.write("password: "),this.termPassword="")):display_error("Invalid Username or Password")}};SSHyClient.crypto={};SSHyClient.crypto.AES=function(a,b,r,k){this.cipher=new sjcl.cipher.aes(sjcl.codec.bytes.toBits(toByteArray(a)),b);this.mode=b;this.mode==SSHyClient.AES_CBC&&(this.iv=toByteArray(r));this.counter=k};
SSHyClient.crypto.AES.prototype={encrypt:function(a){a=this.cipher.encrypt(toByteArray(a),this.iv,this.counter);this.mode==SSHyClient.AES_CBC&&(this.iv=a.slice(-16));return fromByteArray(a)},decrypt:function(a){a=toByteArray(a);if(this.mode==SSHyClient.AES_CBC){var b=this.cipher.decrypt(a,this.iv);this.iv=a.slice(-16)}else b=this.cipher.encrypt(a,this.iv,this.counter);return fromByteArray(b)}};
SSHyClient.crypto.counter=function(a,b){b=void 0===b?1:b;this.blocksize=a/8;this.overflow=0;0===b?this.value=(new array(this.blocksize+1)).join("\u00ff"):(a=deflate_long(b.subtract(BigInteger.ONE),!1),this.value=Array(this.blocksize-a.length+1).join("\x00")+a)};
SSHyClient.crypto.counter.prototype={increment:function(){for(var a=this.blocksize;a--;){var b=String.fromCharCode((this.value.charCodeAt(a)+1)%256);this.value=setCharAt(this.value,a,b);if("\x00"!=b)return this.value}a=deflate_long(this.overflow,!1);return this.value=Array(this.blocksize-a.length+1).join("\x00")+a}};SSHyClient.kex={K:null,H:null,sessionId:null};function verifyKey(a,b){if(!(new SSHyClient.RSAKey(new SSHyClient.Message(a))).verify(SSHyClient.kex.H,new SSHyClient.Message(b)))throw transport.disconnect(),"RSA signature verification failed, disconnecting.";}
SSHyClient.kex.DiffieHellman=function(a,b,r){this.transport=a;this.SHAVersion=r;this.group=b;void 0===this.group?(this.p=this.q=this.g=this.x=this.e=this.f=null,this.minBits=1024,this.maxBits=8192,this.preferredBits=2048):(1===this.group?this.P=new BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE65381FFFFFFFFFFFFFFFF",
16):14===this.group&&(this.P=new BigInteger("FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AACAA68FFFFFFFFFFFFFFFF",
16)),this.x=this.e=this.f=new BigInteger("0",10),this.G=new BigInteger("2",10))};
SSHyClient.kex.DiffieHellman.prototype={start:function(){var a=new SSHyClient.Message;void 0===this.group?(a.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_GEX_REQUEST)),a.add_int(this.minBits),a.add_int(this.preferredBits),a.add_int(this.maxBits)):(this.x=inflate_long(read_rng(128)),this.e=this.G.modPow(this.x,this.P),a.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_INIT)),a.add_mpint(this.e));this.transport.send_packet(a)},parse_reply:function(a,b){void 0===this.group&&a==SSHyClient.MSG_KEXDH_GEX_GROUP?
this.parse_gex_group(b):this.handleDHReply(b)},handleDHReply:function(a){a=new SSHyClient.Message(a);var b=a.get_string();if(transport.settings.rsaCheckEnabled){var r=wsproxyURL.split("/")[3],k=ascii2hex(b),m=ascii2hex(SSHyClient.hash.MD5(b)).match(/.{2}/g);randomart(m);var n=localStorage.getItem(r);if(n){if(n!=k)if(confirm("WARNING - POTENTIAL SECURITY BREACH!\r\n\nThe servers host key does not match the one SSHy has cached in local storage. This means that either the server administrator has changed the host key, or you have actually connected to another computer pretending to be the server.\r\nThe new rsa2 key fingerprint is:\r\nssh-rsa 2048 "+
m.join(":")+"\r\nIf you were expecting this change and trust the new key, hit `Ok` to add the key to SSHy's cache and carry on connecting.\r\nIf you do not trust this new key, hit `Cancel` to abandon the connection"))localStorage.setItem(r,k);else throw ws.close(),"Error: Locally stored rsa key does not match remote key";}else if(confirm("The server's host key is not cached in local storage. You have no guarentee that the server is the computer you think it is.\n\rThe server's rsa2 key finterprint is:\r\nssh-rsa 2048 "+
m.join(":")+"\r\nIf you trust the host, hit `Ok` to add the key to SSHy's cache and carry on connecting.\r\nIf you do not trust this host, hit `Cancel` to abandon the connection"))localStorage.setItem(r,k);else throw ws.close(),"User has declined the rsa-key and closed the connection";}this.f=a.get_mpint();a=a.get_string();r=this.f.modPow(this.x,this.p);k=new SSHyClient.Message;k.add_string(this.transport.local_version);k.add_string(this.transport.remote_version);k.add_string(this.transport.local_kex_message);
k.add_string(this.transport.remote_kex_message);k.add_string(b);void 0===this.group&&(k.add_int(this.minBits),k.add_int(this.preferredBits),k.add_int(this.maxBits),k.add_mpint(this.p),k.add_mpint(this.g));k.add_mpint(this.e);k.add_mpint(this.f);k.add_mpint(r);SSHyClient.kex.K=r;SSHyClient.kex.sessionId=SSHyClient.kex.H="SHA-1"==this.SHAVersion?(new SSHyClient.hash.SHA1(k.toString())).digest():(new SSHyClient.hash.SHA256(k.toString())).digest();transport.settings.rsaCheckEnabled&&verifyKey(b,a);this.transport.send_new_keys()},
generate_x:function(){var a=this.p.subtract(BigInteger.ONE);a=a.divide(new BigInteger("2",10));var b=deflate_long(a,0),r=b[0].charCodeAt(0);b=b.length;for(var k=255;!(r&128);)r<<=1,k>>=1;for(;!(r=read_rng(b),r=String.fromCharCode(r[0].charCodeAt(0)&k)+r.substring(1),r=inflate_long(r,1),0<r.compareTo(BigInteger.ONE)&&0<a.compareTo(r)););this.x=r},parse_gex_group:function(a){a=new SSHyClient.Message(a);this.p=a.get_mpint();this.g=a.get_mpint();this.generate_x();this.e=this.g.modPow(this.x,this.p);a=
new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_KEXDH_GEX_INIT));a.add_mpint(this.e);this.transport.send_packet(a)}};SSHyClient.Message=function(a){this.position=0;this.packet=void 0===a?String():String(a)};
SSHyClient.Message.prototype={toString:function(){return this.packet},get_bytes:function(a){var b=this.packet.substring(this.position,this.position+a);this.position+=a;return b.length<a&&1048576>a?b+Array(a-b.length+1).join("\x00"):b},get_int:function(){return struct.unpack("I",this.get_bytes(4))[0]},get_string:function(){return this.get_bytes(this.get_int())},get_mpint:function(){return inflate_long(this.get_string())},add_bytes:function(a){this.packet+=a;return this},add_boolean:function(a){this.add_bytes(!0===
a?"\u0001":"\x00");return this},add_int:function(a){this.packet+=struct.pack("I",a);return this},add_mpint:function(a){this.add_string(deflate_long(a));return this},add_string:function(a){this.add_int(a.length);this.packet+=a;return this}};SSHyClient.parceler=function(a,b){this.socket=a;this.transport=b;this.encrypting=!1;this.hmacSHAVersion=this.inbound_iv=this.inbound_enc_key=this.inbound_mac_key=this.inbound_cipher=this.outbound_enc_iv=this.outbound_enc_key=this.outbound_mac_key=this.outbound_cipher=null;this.outbound_sequence_num=this.inbound_sequence_num=this.macSize=0;this.block_size=8;this.prevHeader=this.inbound_buffer="";this.windowSize=SSHyClient.WINDOW_SIZE;this.recieveData=this.transmitData=0};
SSHyClient.parceler.prototype={send:function(a){packet=this.pack_message(a.toString());this.encrypting&&(packet=this.outbound_cipher.encrypt(packet)+SSHyClient.hash.HMAC(this.outbound_mac_key,struct.pack("I",this.outbound_sequence_num)+packet,this.hmacSHAVersion));this.socket.sendB64(packet);this.outbound_sequence_num++},pack_message:function(a){var b=3+this.block_size-(a.length+8)%this.block_size;a=struct.pack("I",a.length+b+1)+struct.pack("B",b)+a;return a+=this.encrypting?read_rng(b):Array(b+1).join("\x00")},
handle:function(a){this.recieveData+=a.length;this.transport.settings.setNetTraffic(transport.parceler.recieveData,!0);if(this.encrypting)this.inbound_buffer+=a,this.decrypt();else if(this.transport.remote_version)this.inbound_buffer+=a,this.decrypt(a);else this.transport.handler_table[0](this.transport,a)},decrypt:function(){for(var a=" ",b;null!==a;){if(this.prevHeader)b=this.prevHeader,this.prevHeader="";else{b=this.read_ibuffer();if(!b)break;this.encrypting&&(b=this.inbound_cipher.decrypt(b))}var r=
struct.unpack("I",b.substring(0,4))[0],k=b.substring(4);a=this.read_ibuffer(r+this.macSize-k.length);if(!a){this.prevHeader=b;break}b=a.substring(0,r-k.length);this.encrypting&&(b=this.inbound_cipher.decrypt(b));b=k+b;if(this.macSize){k=a.substring(r-k.length);var m=struct.pack("I",this.inbound_sequence_num)+struct.pack("I",r)+b;if(SSHyClient.hash.HMAC(this.inbound_mac_key,m,this.hmacSHAVersion)!=k)throw this.transport.disconnect(),"Inbound MAC verification failed - Mismatched MAC";}this.inbound_sequence_num++;
this.windowSize-=r;0>=this.windowSize&&this.transport.winAdjust();this.transport.handle_dec(b)}},read_ibuffer:function(a){a=void 0===a?this.block_size:a;if(this.inbound_buffer.length<a)return null;var b=this.inbound_buffer.substring(0,a);this.inbound_buffer=this.inbound_buffer.substring(a);return b}};SSHyClient.RSAKey=function(a){a.get_string();this.e=a.get_mpint();this.n=a.get_mpint()};SSHyClient.RSAKey.prototype={pkcs1imify:function(a){return"\x00\u0001"+Array(deflate_long(this.n,0).length-15-a.length-3+1).join("\u00ff")+"\x000!0\t\u0006\u0005+\u000e\u0003\u0002\u001a\u0005\x00\u0004\u0014"+a},verify:function(a,b){if("ssh-rsa"!=b.get_string())return!1;b=inflate_long(b.get_string(),!0);a=inflate_long(this.pkcs1imify((new SSHyClient.hash.SHA1(a)).digest()),!0);return b.modPow(this.e,this.n).equals(a)}};SSHyClient.settings=function(){this.localEcho=0;this.fsHintEnter="\u001b[?1";this.fsHintLeave=SSHyClient.bashFsHintLeave;this.autoEchoState=!1;this.autoEchoTimeout=0;this.blockedKeys=[":"];this.keepAliveInterval=void 0;this.fontSize=16;this.colorTango=!0;this.colorNames=Object.keys(this.colorSchemes);this.colorCounter=0;this.shellString="";this.sidenavElementState=0;this.rxElement=document.getElementById("rxTraffic");this.txElement=document.getElementById("txTraffic");this.autoEchoElement=document.getElementById("autoEchoState");
this.rsaCheckEnabled=!0};
SSHyClient.settings.prototype={colorSchemes:[["Solarized",{background:"#002b36",black:"#002b36",red:"#dc322f",green:"#859900",yellow:"#b58900",blue:"#268bd2",magenta:"#6c71c4",cyan:"#2aa198",white:"#93a1a1",brightBlack:"#657b83",brightRed:"#dc322f",brightGreen:"#859900",brightYellow:"#b58900",brightBlue:"#268bd2",brightMagenta:"#6c71c4",brightCyan:"#2aa198",brightWhite:"#fdf6e3",cursor:"#93a1a1",foreground:"#93a1a1"}],["Material",{background:"#263238",black:"#263238",red:"#ff9800",green:"#8bc34a",
yellow:"#ffc107",blue:"#03a9f4",magenta:"#e91e63",cyan:"#009688",white:"#cfd8dc",brightBlack:"#37474f",brightRed:"#ffa74d",brightGreen:"#9ccc65",brightYellow:"#ffa000",brightBlue:"#81d4fa",brightMagenta:"#ad1457",brightCyan:"#26a69a",brightWhite:"#eceff1",cursor:"#eceff1",foreground:"#eceff1"}],["Monokai",{background:"#272822",black:"#272822",red:"#dc2566",green:"#8fc029",yellow:"#d4c96e",blue:"#55bcce",magenta:"#9358fe",cyan:"#56b7a5",white:"#acada1",brightBlack:"#76715e",brightRed:"#fa2772",brightGreen:"#a7e22e",
brightYellow:"#e7db75",brightBlue:"#66d9ee",brightMagenta:"#ae82ff",brightCyan:"#66efd5",brightWhite:"#cfd0c2",cursor:"#f1ebeb",foreground:"#f1ebeb"}],["Ashes",{background:"#1c2023",black:"#1c2023",red:"#c7ae95",green:"#95c7ae",yellow:"#aec795",blue:"#ae95c7",magenta:"#c795ae",cyan:"#95aec7",white:"#c7ccd1",brightBlack:"#747c84",brightRed:"#c7ae95",brightGreen:"#95c7ae",brightYellow:"#aec795",brightBlue:"#ae95c7",brightMagenta:"#c795ae",brightCyan:"#95aec7",brightWhite:"#f3f4f5",cursor:"#c7ccd1",
foreground:"#c7ccd1"}],["Google",{background:"#ffffff",black:"#ffffff",red:"#cc342b",green:"#198844",yellow:"#fba922",blue:"#3971ed",magenta:"#a36ac7",cyan:"#3971ed",white:"#c5c8c6",brightBlack:"#969896",brightRed:"#cc342b",brightGreen:"#198844",brightYellow:"#fba922",brightBlue:"#3971ed",brightMagenta:"#a36ac7",brightCyan:"#3971ed",brightWhite:"#ffffff",cursor:"#373b41",foreground:"#373b41"}],["Mono Light",{background:"#f7f7f7",black:"#f7f7f7",red:"#7c7c7c",green:"#8e8e8e",yellow:"#a0a0a0",blue:"#686868",
magenta:"#747474",cyan:"#868686",white:"#b9b9b9",brightBlack:"#525252",brightRed:"#7c7c7c",brightGreen:"#8e8e8e",brightYellow:"#a0a0a0",brightBlue:"#686868",brightMagenta:"#747474",brightCyan:"#868686",brightWhite:"#f7f7f7",cursor:"#464646",foreground:"#464646"}],["Mono Dark",{background:"#000000",black:"#000000",red:"#6b6b6b",green:"#c4c4c4",yellow:"#b3b3b3",blue:"#999999",magenta:"#717171",cyan:"#8a8a8a",white:"#b5cabb",brightBlack:"#202020",brightRed:"#464646",brightGreen:"#f8f8f8",brightYellow:"#eeeeee",
brightBlue:"#7c7c7c",brightMagenta:"#adadad",brightCyan:"#c0c0c0",brightWhite:"#99ac9e",cursor:"#ffffff",foreground:"#ffffff"}],["Tango",{}]],testShell:function(a){-1===a.substring(0,2).indexOf("]")&&(0===this.shellString.length||7<this.shellString.length)?this.shellString="":(this.shellString+=a,7>this.shellString.length||(-1!==this.shellString.indexOf("]0;fish")?(this.shellString="",this.fsHintLeave=SSHyClient.fishFsHintLeave):-1!==this.shellString.indexOf("@")&&(this.shellString="",this.fsHintLeave=
SSHyClient.bashFsHintLeave)))},setLocalEcho:function(a){this.localEcho=Math.min(Math.max(this.localEcho+=a,0),2);document.getElementById("currentLEcho").innerHTML=["Force Off","Auto","Force On"][this.localEcho];a=document.getElementById("autoEchoState");1===this.localEcho?(a.style.visibility="visible",a.innerHTML="State: "+(!1===this.autoEchoState?"Disabled":"Enabled")):a.style.visibility="hidden"},parseLocalEcho:function(a){if(1===this.localEcho){var b=performance.now();if(!(100>b-this.autoEchoTimeout))if(a=
a.substring(0,64),!this.autoEchoState)-1!=a.indexOf(this.fsHintLeave)&&-1!=a.indexOf("@")&&(this.autoEchoState=!0,this.autoEchoElement.innerHTML="State: Enabled",this.autoEchoTimeout=b);else if(-1!=a.indexOf(this.fsHintEnter)||-1!=a.toLowerCase().indexOf("password"))this.autoEchoState=!1,this.autoEchoElement.innerHTML="State: Disabled",this.autoEchoTimeout=b}},parseKey:function(a){1===this.localEcho&&!1===this.autoEchoState||1<a.key.length||this.blockedKeys.includes(a.key)||a.altKey||a.ctrlKey||a.metaKey||
(transport.lastKey||term.write(a.key),transport.lastKey+=a.key)},setKeepAlive:function(a){a=void 0===a?0:1E3*Math.floor(a);if(0===a||void 0!==this.keepAliveInterval)if(clearInterval(this.keepAliveInterval),this.keepAliveInterval=void 0,!a)return;this.keepAliveInterval=setInterval(transport.keepAlive,a)},setColorScheme:function(a){var b=document.styleSheets[0],r=this.colorSchemes[a][0];a=this.colorSchemes[a][1];term&&term._setTheme(a);if(!this.colorTango)for(i=0;4>i;i++)b.deleteRule(13);"Tango"===
r?(this.colorTango=!0,document.getElementById("currentColor").innerHTML="Tango"):(b.insertRule("html, body {background-color: "+a.background+" !important;}",13),b.insertRule(".sidenav {background-color: "+modColorPercent(a.background,-.2)+" !important;}",13),b.insertRule(".brightgreen {color: "+a.brightGreen+" !important;}",13),b.insertRule(".brightyellow {color: "+a.brightYellow+" !important;}",13),this.colorTango=!1,document.getElementById("currentColor").innerHTML=void 0===r?"Custom":r)},importXresources:function(){var a=
new FileReader,b=document.getElementById("Xresources").files[0];a.readAsText(b);a.onload=function(){var r=a.result.split("\n");r=r.sort((new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"})).compare);colScheme=[];for(var k=0;k<r.length;k++){var m=r[k].match(/#([0-9a-f]{3}){1,2}/ig);if(m&&(colScheme.push(m[0]),19<=colScheme.length))break}if(19!==colScheme.length)return alert("Uploaded file could not be parsed correctly.");colScheme={background:colScheme[0],black:colScheme[1],red:colScheme[2],
green:colScheme[3],yellow:colScheme[4],blue:colScheme[5],magenta:colScheme[6],cyan:colScheme[7],white:colScheme[8],brightBlack:colScheme[9],brightRed:colScheme[10],brightGreen:colScheme[11],brightYellow:colScheme[12],brightBlue:colScheme[13],brightMagenta:colScheme[14],brightCyan:colScheme[15],brightWhite:colScheme[16],cursor:colScheme[17],foreground:colScheme[18]};colName=".Xresources"===b.name?"custom":b.name.split(".")[0];transport.settings.colorSchemes.push([colName,colScheme]);transport.settings.colorNames=
Object.keys(transport.settings.colorSchemes);transport.settings.setColorScheme(transport.settings.colorSchemes.length-1)}},cycleColorSchemes:function(a){this.colorCounter=0===a?--this.colorCounter:++this.colorCounter;if(this.colorCounter>this.colorNames.length-1||0>this.colorCounter)this.colorCounter=1===a?0:this.colorNames.length-1;this.setColorScheme(this.colorCounter)},modFontSize:function(a){this.fontSize+=a;term.setOption("fontSize",this.fontSize);document.getElementById("currentFontSize").innerHTML=
transport.settings.fontSize+"px";term.fit();transport.auth.mod_pty("window-change",term.cols,term.rows)},modTerm:function(a,b){a?term.resize(term.cols,b):term.resize(b,term.rows);transport.auth.mod_pty("window-change",term.cols,term.rows)},setNetTraffic:function(a,b){if(this.sidenavElementState){switch(!0){case 1024>a:a+="Bytes";break;case 1024<=a&&1048576>a:a=(a/1024).toFixed(3)+"KB";break;case 1048576<=a&&1073741824>a:a=(a/1048576).toFixed(3)+"MB";break;default:a=(a/1073741824).toFixed(3)+"GB"}element=
!0===b?this.rxElement:this.txElement;element.innerHTML=a}}};var ws,transport,term=null;window.msCrypto&&(window.crypto={},window.crypto.getRandomValues=function(a){return window.msCrypto.getRandomValues(a)},Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}));var resizeInterval;
window.onload=function(){document.body.innerHTML+='<div id="settingsNav" class="sidenav">\n\t\t\t\t\t\t\t\t\t<a href="javascript:;" class="closebtn" onclick="toggleNav(0)">&times;</a>\n\t\t\t\t\t\t\t\t\t<span class="title large">Terminal Options</span>\n\t\t\t\t\t\t\t\t\t<hr>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:20px">Font Size</span>\n\t\t\t\t\t\t\t\t\t<a class="leftarrow" href="javascript:;" onclick="transport.settings.modFontSize(-1)"><--</a>\n\t\t\t\t\t\t\t\t\t<span class="middle" id="currentFontSize">16px</span>\n\t\t\t\t\t\t\t\t\t<a class="rightarrow" href="javascript:;" onclick="transport.settings.modFontSize(1)">--\x3e</a>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:40px">Terminal Size</span>\n\t\t\t\t\t\t\t\t\t<span class="leftarrow">Cols:\n\t\t\t\t\t\t\t\t\t\t<input type="number" id="termCols" min="5" oninput="transport.settings.modTerm(0, this.value)">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class="rightarrow">Rows:\n\t\t\t\t\t\t\t\t\t\t<input type="number" id="termRows" min="5" oninput="transport.settings.modTerm(1, this.value)">\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:60px;">Local Echo</span>\n\t\t\t\t\t\t\t\t\t<a class="leftarrow" href="javascript:;" onclick="transport.settings.setLocalEcho(-1)"><--</a>\n\t\t\t\t\t\t\t\t\t<a class="rightarrow" href="javascript:;" onclick="transport.settings.setLocalEcho(1)">--\x3e</a>\n\t\t\t\t\t\t\t\t\t<div class="fileUpload btn btn-primary nomargin">\n\t\t\t\t\t\t\t\t\t\t<span class="tooltiptext" style="visibility:visible;" id="autoEchoState">State: Enabled</span>\n\t\t\t\t\t\t\t\t\t\t<span class="middle" id="currentLEcho">Force Off</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:50px">Colours</span>\n\t\t\t\t\t\t\t\t\t<a class="leftarrow" href="javascript:;" onclick="transport.settings.cycleColorSchemes(0)"><--</a>\n\t\t\t\t\t\t\t\t\t<span class="middle" id="currentColor">Monokai</span>\n\t\t\t\t\t\t\t\t\t<a class="rightarrow" href="javascript:;" onclick="transport.settings.cycleColorSchemes(1)">--\x3e</a>\n\t\t\t\t\t\t\t\t\t<div class="fileUpload btn btn-primary">\n\t\t\t\t\t\t\t\t\t\t<span class="tooltiptext">Format: Xresources</span>\n\t\t\t\t\t\t\t\t\t\t<span class="middle" style="width:220px;">Upload</span>\n\t\t\t\t\t\t\t\t\t\t<input type="file" title=" " id="Xresources" class="upload" onchange="transport.settings.importXresources()" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:20px;">Keep Alive</span>\n\t\t\t\t\t\t\t\t\t<div class="fileUpload btn btn-primary">\n\t\t\t\t\t\t\t\t\t\t<span class="tooltiptext">0 to disable</span>\n\t\t\t\t\t\t\t\t\t\t<input type="number" class="large" id="keepAlive" onchange="transport.settings.setKeepAlive(this.value);" placeholder="0">\n\t\t\t\t\t\t\t\t\t\t<span style="font-size:16px;"> seconds</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<span class="title" style="padding-top:20px;">Network Traffic</span>\n\t\t\t\t\t\t\t\t\t<div class="netTraffic">\n\t\t\t\t\t\t\t\t\t\t<span class="leftarrow brightgreen">rx: <span id="rxTraffic"></span></span>\n\t\t\t\t\t\t\t\t\t\t<span class="rightarrow brightyellow">tx: <span id="txTraffic"></span></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id="hostKey" style="display: none;">\n\t\t\t\t\t\t\t\t        <span class="title" style="padding-top:20px;">Host Key</span>\n\t\t\t\t\t\t\t\t        <span id="hostKeyImg" class="hostKeyImg"></span>\n\t\t\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<span id="gear" class="gear" style="visibility:visible;" onclick="toggleNav(250)">&#9881</span>';fit.apply(Terminal);
startSSHy()};window.onresize=function(){clearTimeout(resizeInterval);resizeInterval=setTimeout(resize,400)};window.onbeforeunload=function(){(ws||transport)&&transport.disconnect()};function resize(){term&&term.fit()}
function toggleNav(a){document.getElementById("settingsNav").style.width=a;if(transport.settings.sidenavElementState=a)transport.settings.setNetTraffic(transport.parceler.recieveData,!0),transport.settings.setNetTraffic(transport.parceler.transmitData,!1);a=document.getElementById("gear").style;a.visibility="hidden"===a.visibility?"visible":"hidden"}
function startSSHy(){document.title="SSHy Client";ws=new WebSocket(wsproxyURL,"base64");ws.onopen=function(a){transport=new SSHyClient.Transport(ws);transport.settings.rsaCheckEnabled=!1};ws.onmessage=function(a){transport.parceler.handle(atob(a.data))};ws.onclose=function(a){term?transport.closing||(term.write("\n\n\rWebsocket connection to "+transport.auth.hostname+" was unexpectedly closed."),transport.settings.keepAliveInterval||term.write("\n\n\rThis was likely caused by he remote SSH server timing out the session due to inactivity.\r\n- Session Keep Alive interval can be set in the settings to prevent this behaviour.")):
(termInit(),term.write("WebSocket connection failed: Error in connection establishment: code "+a.code))};ws.sendB64=function(a){this.send(btoa(a));transport.parceler.transmitData+=a.length;transport.settings.setNetTraffic(transport.parceler.transmitData,!1)}}
function termInit(){term=new Terminal({cols:80,rows:24});term.open(document.getElementById("terminal"),!0);term.fit();term.focus();document.getElementById("termCols").value=term.cols;document.getElementById("termRows").value=term.rows;transport.settings.setColorScheme(1)}
function startxtermjs(){termInit();transport.auth.authenticated||term.write(transport.auth.hostname+" login: ");term.textarea.onkeydown=function(a){if(ws&&transport&&!(5<=transport.auth.failedAttempts)&&!transport.auth.awaitingAuthentication){var b=a.char&&1==a.char.length?a.char:a.key;if(!(1<b.length&&(a.altKey||a.ctrlKey||a.metaKey||a.shiftKey)&&"Backspace"!=b)){if(transport.auth.authenticated){if(1==b.length&&(!(a.altKey||a.ctrlKey||a.metaKey)||a.altKey&&a.ctrlKey))var r=b;else if(1==b.length&&
a.shiftKey&&a.ctrlKey){if("V"!=a.key){a.preventDefault();return}}else r=term._evaluateKeyEscapeSequence(a).key;transport.settings.localEcho&&transport.settings.parseKey(a);return null===r?null:transport.expect_key(r)}if(!(a.altKey||a.ctrlKey||a.metaKey||1<b.length&&13!=a.keyCode&&8!=a.keyCode))switch(a.keyCode){case 8:void 0===transport.auth.termPassword?0<transport.auth.termUsername.length&&(termBackspace(term),transport.auth.termUsername=transport.auth.termUsername.slice(0,transport.auth.termUsername.length-
1)):transport.auth.termPassword=transport.auth.termPassword.slice(0,transport.auth.termPassword.length-1);break;case 13:void 0===transport.auth.termPassword?0<transport.auth.termUsername.length?(term.write("\n\rpassword: "),transport.auth.termPassword=""):term.write("\n\r"+transport.auth.hostname+" login: "):0<transport.auth.termPassword.length?(term.write("\n\r"),transport.auth.ssh_connection()):term.write("\n\rpassword: ");break;default:void 0===transport.auth.termPassword?(transport.auth.termUsername+=
b,term.write(b)):transport.auth.termPassword+=b}}}};term.textarea.onpaste=function(a){var b;window.clipboardData&&window.clipboardData.getData?b=window.clipboardData.getData("Text"):a.clipboardData&&a.clipboardData.getData&&(b=a.clipboardData.getData("text/plain"));if(b)if(1E6>b.length)if(5E3<b.length)for(b=splitSlice(b),a=0;a<b.length;a++)transport.expect_key(b[a]);else transport.expect_key(b);else alert("Error: Pasting large strings is not permitted.")}};SSHyClient.Transport=function(a,b){this.local_version="SSH-2.0-SSHyClient";this.remote_version="";this.remote_kex_message=this.local_kex_message=null;this.preferred_algorithms="diffie-hellman-group-exchange-sha256,diffie-hellman-group-exchange-sha1,diffie-hellman-group14-sha256,diffie-hellman-group14-sha1,diffie-hellman-group1-sha256,diffie-hellman-group1-sha1 ssh-rsa aes128-ctr hmac-sha2-256,hmac-sha1 none ".split(" ");this.preferred_hash=this.preferred_mac=this.preferred_kex=null;this.parceler=
new SSHyClient.parceler(a,this);this.auth=new SSHyClient.auth(this.parceler);this.settings=void 0===b?new SSHyClient.settings:b;this.lastKey="";this.closing=!1};
SSHyClient.Transport.prototype={kex_info:{"diffie-hellman-group1-sha1":function(a){return new SSHyClient.kex.DiffieHellman(a,1,"SHA-1")},"diffie-hellman-group14-sha1":function(a){return new SSHyClient.kex.DiffieHellman(a,14,"SHA-1")},"diffie-hellman-group-exchange-sha1":function(a){return new SSHyClient.kex.DiffieHellman(a,void 0,"SHA-1")},"diffie-hellman-group1-sha256":function(a){return new SSHyClient.kex.DiffieHellman(a,1,"SHA-256")},"diffie-hellman-group14-sha256":function(a){return new SSHyClient.kex.DiffieHellman(a,
14,"SHA-256")},"diffie-hellman-group-exchange-sha256":function(a){return new SSHyClient.kex.DiffieHellman(a,void 0,"SHA-256")}},mac_info:{"hmac-sha1":function(a){a.parceler.hmacSHAVersion="SHA-1";a.preferred_hash=20},"hmac-sha2-256":function(a){a.parceler.hmacSHAVersion="SHA-256";a.preferred_hash=32}},handler_table:{0:function(a,b){a.parceler.socket.sendB64(a.local_version+"\r\n");a.remote_version=b.slice(0,b.length-2);a.send_kex_init()},1:function(a,b){a.disconnect()},2:function(a,b){},3:function(a,
b){},6:function(a,b){"ssh-userauth"==(new SSHyClient.Message(b.slice(1))).get_string()&&a.auth.ssh_connection()},20:function(a,b){a.parse_kex_reply(b);a.remote_kex_message=b;a.preferred_kex.start()},21:function(a){a.activate_encryption()},31:function(a,b){a.preferred_kex.parse_reply(31,b.slice(1))},33:function(a,b){a.preferred_kex.parse_reply(33,b.slice(1))},51:function(a,b){a.auth.awaitingAuthentication=!1;a.auth.authFailure()},52:function(a,b){a.auth.authenticated=!0;a.auth.awaitingAuthentication=
!1;a.auth.auth_success(!0)},80:function(a,b){},91:function(a,b){a.auth.channelOpened=!0;resize();a.auth.mod_pty("pty-req",term.cols,term.rows,"xterm")},93:function(a,b){},94:function(a,b){b=b.slice(9);if(a.settings.localEcho&&(a.settings.testShell(b),a.settings.parseLocalEcho(b),a.lastKey)){if(b==a.lastKey.substring(0,1)){a.lastKey=a.lastKey.slice(1);return}a.lastKey=a.lastKey.slice(1);term.write("\b")}term.write(fromUtf8(b))},96:function(a,b){},97:function(a,b){a.disconnect()},98:function(a,b){}},
winAdjust:function(){var a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_WINDOW_ADJUST));a.add_int(0);a.add_int(SSHyClient.WINDOW_SIZE);this.send_packet(a.toString());this.parceler.windowSize=SSHyClient.WINDOW_SIZE},disconnect:function(a){this.closing=!0;a=void 0===a?11:a;var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_DISCONNECT));b.add_int(a);this.send_packet(b.toString());ws.close();term.write("\r\nConnection to "+this.auth.hostname+" closed. Code - "+
a)},keepAlive:function(){if(3!==ws.readyState){var a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_IGNORE));a.add_string("");transport.send_packet(a.toString())}},cut_padding:function(a){return a.substring(1,a.length-a[0].charCodeAt(0))},send_packet:function(a){this.parceler.send(a)},send_kex_init:function(){var a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_KEX_INIT));a.add_bytes(read_rng(16));a.add_string(this.preferred_algorithms[0]);a.add_string(this.preferred_algorithms[1]);
for(var b=2;6>b;b++)a.add_string(this.preferred_algorithms[b]),a.add_string(this.preferred_algorithms[b]);a.add_boolean(!1);a.add_int(0);this.local_kex_message=a=a.toString();this.send_packet(a)},parse_kex_reply:function(a){a=new SSHyClient.Message(a);a.get_bytes(17);var b=filter(this.preferred_algorithms[0],a.get_string().split(",")),r=filter(this.preferred_algorithms[1],a.get_string().split(","));a.get_string();var k=filter(this.preferred_algorithms[2],a.get_string().split(","));a.get_string();
a=filter(this.preferred_algorithms[3],a.get_string().split(","));if(!(b&&r&&k&&a))throw"Chosen Algs = kex="+b+", keys="+r+", cipher="+k+", mac="+a;this.preferred_kex=this.kex_info[b](this);this.preferred_mac=this.mac_info[a](this)},generate_key:function(a,b){var r=new SSHyClient.Message;r.add_mpint(SSHyClient.kex.K);r.add_bytes(SSHyClient.kex.H);r.add_bytes(a);r.add_bytes(SSHyClient.kex.sessionId);return"SHA-1"==this.preferred_kex.SHAVersion?(new SSHyClient.hash.SHA1(r.toString())).digest().substring(0,
b):(new SSHyClient.hash.SHA256(r.toString())).digest().substring(0,b)},activate_encryption:function(){this.parceler.block_size=16;this.parceler.macSize=this.preferred_hash;this.parceler.outbound_enc_iv=this.generate_key("A",this.parceler.block_size,this.preferred_kex.SHAVersion);this.parceler.outbound_enc_key=this.generate_key("C",this.parceler.block_size,this.preferred_kex.SHAVersion);this.parceler.outbound_mac_key=this.generate_key("E",this.parceler.macSize,this.preferred_kex.SHAVersion);this.parceler.outbound_cipher=
new SSHyClient.crypto.AES(this.parceler.outbound_enc_key,SSHyClient.AES_CTR,this.parceler.outbound_enc_iv,new SSHyClient.crypto.counter(8*this.parceler.block_size,inflate_long(this.parceler.outbound_enc_iv)));this.parceler.inbound_enc_iv=this.generate_key("B",this.parceler.block_size,this.preferred_kex.SHAVersion);this.parceler.inbound_enc_key=this.generate_key("D",this.parceler.block_size,this.preferred_kex.SHAVersion);this.parceler.inbound_mac_key=this.generate_key("F",this.parceler.macSize,this.preferred_kex.SHAVersion);
this.parceler.inbound_cipher=new SSHyClient.crypto.AES(this.parceler.inbound_enc_key,SSHyClient.AES_CTR,this.parceler.inbound_enc_iv,new SSHyClient.crypto.counter(8*this.parceler.block_size,inflate_long(this.parceler.inbound_enc_iv)));this.parceler.encrypting=!0;this.auth.request_auth()},handle_dec:function(a){a=this.cut_padding(a);try{this.handler_table[a.substring(0,1).charCodeAt(0)](this,a)}catch(b){console.log(b),console.log("Error! code - "+a.substring(0,1).charCodeAt(0)+" does not exist!")}},
str_to_bytes:function(a){return unescape(encodeURIComponent(a))},expect_key:function(a){if(a){var b=new SSHyClient.Message;b.add_bytes(String.fromCharCode(SSHyClient.MSG_CHANNEL_DATA));b.add_int(0);b.add_string(this.str_to_bytes(a.toString()));this.parceler.send(b)}},send_new_keys:function(a){a=new SSHyClient.Message;a.add_bytes(String.fromCharCode(SSHyClient.MSG_NEW_KEYS));this.send_packet(a)}};
